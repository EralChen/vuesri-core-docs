const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/chunk-CAROJH4b.js","assets/chunks/chunk-CMhy9c9G.js","assets/chunks/chunk-ByM7454y.js","assets/static/ShadedColorMaterial.B02UECUJ.css","assets/static/uno-ff4db1d1.D2PgLIQl.css","assets/static/src_styles_common_reset-f7a68b0e.BAKp5MHC.css","assets/static/src_styles_common_color-a7a524c7.CVau4Kly.css","assets/static/src_styles_common_is-19c6c24d.DKAKruk7.css","assets/static/style-57df08cc.D7BtIwaj.css","assets/static/style-700e5873.Beul3IQx.css","assets/static/src_styles_element-plus_reset-752cc03d.htEpr2M-.css","assets/static/src_styles_element-plus_form-item-877afd6a.Dy4HJB2K.css","assets/static/src_styles_element-plus_table-6cbc5816.DXG1SsxY.css","assets/static/src_styles_element-plus_tabs-67d1a98b.BMDMQPDv.css","assets/static/src_styles_element-plus_tree-cc28503d.nmT5n0wM.css","assets/static/src_styles_element-plus_dialog-7f91a00e.D4nTsJge.css","assets/static/src_styles_element-plus_breadcrumb-8ce3a1a1.CwEEGJYc.css","assets/static/src_styles_element-plus_menu-33b44202.hFAFO4eV.css","assets/static/style-a19f1b3e.COrvIKje.css","assets/static/style-ea2b3f9e.BxAlKMJv.css","assets/static/style-283bc4f4.Cc2PI5FU.css","assets/static/style-c4a1f0b7.CdbLw5at.css","assets/static/src_styles_form_sub-7371c85e.y3zh-mS3.css","assets/static/src_styles_layout_index-2891f17b.BNCqvENj.css","assets/static/style-b3fe97a2.BuWAVw4m.css","assets/static/src_styles_vitepress_demo-827dc91c.Z0iQYynG.css","assets/static/style-0c254f43.BgXNzrGH.css","assets/static/style-d5a1a87d.BZwgKm1s.css","assets/static/style-f69381ee.CFNWXuiE.css","assets/static/style-b895e1ce.X9gIGpBH.css","assets/static/style-44d656df.Di2LGzYR.css","assets/static/style-fbf2e11d.CdbrDi0S.css","assets/static/src_styles_markdown_reset-fbd16bdd.D3vNaEcf.css","assets/static/src_layouts_default_aside-6ea01de8.BjbON5Ij.css","assets/static/vitepress_components_VPDocOutlineItem-4ff7b581.ADPwdkw3.css","assets/static/vitepress_components_VPDocAsideOutline-9eba9441.2-W4eQLy.css","assets/chunks/chunk-BgQjxh0I.js"])))=>i.map(i=>d[i]);
import{_ as Z}from"./chunk-ByM7454y.js";import{a as ee}from"./chunk-8WtPGj6h.js";import{p4 as te,p5 as re,p6 as _,js as j,jv as K,p7 as se,p8 as oe,p9 as ne,pa as ae,pb as ie,f8 as le,nn as L,f9 as V,pc as S,pd as ue,pe as ce,pf as de,iH as k,nm as q,pg as fe,bx as O,nx as me,bq as w,br as B,nt as pe,na as xe,nb as U,nc as D,ph as he,pi as ge,pj as be,pk as G,pl as Q,pm as Te,pn as J,po as H,pp as ye,pq as $e,pr as Re,bo as ve,ns as we,ht as Be,cx as W,cv as Me,ps as z,d9 as Se,fb as Ae,o2 as Ee,k0 as Oe,a_ as C}from"./chunk-CMhy9c9G.js";import{o as $,a as Fe,n as _e,t as Ce}from"./chunk-DMjN6gl3.js";import{r as I}from"./chunk-BgQjxh0I.js";function M(t){if(t==null)return null;const r=t.offset!=null?t.offset:te,n=t.rotation!=null?t.rotation:0,o=t.scale!=null?t.scale:re,c=_(1,0,0,0,1,0,r[0],r[1],1),d=_(Math.cos(n),-Math.sin(n),0,Math.sin(n),Math.cos(n),0,0,0,1),i=_(o[0],0,0,0,o[1],0,0,0,1),u=K();return j(u,d,i),j(u,c,u),u}class Ie{constructor(){this.geometries=new Array,this.materials=new Array,this.textures=new Array}}class Le{constructor(r,n,o){this.name=r,this.lodThreshold=n,this.pivotOffset=o,this.stageResources=new Ie,this.numberOfVertices=0}}async function Ne(t,r){const n=X(ee(t));if(n.fileType==="wosr"){const l=await(r.cache?r.cache.loadWOSR(n.url,r):se(n.url,r)),{engineResources:m,referenceBoundingBox:x}=oe(l,r);return{lods:m,referenceBoundingBox:x,isEsriSymbolResource:!1,isWosr:!0}}let o;if(r.cache)o=await r.cache.loadGLTF(n.url,r,!!r.usePBR);else{const{loadGLTF:l}=await Z(()=>import("./chunk-CAROJH4b.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36]));o=await l(new ne(r.streamDataRequester),n.url,r,r.usePBR)}const c=o.model.meta?.ESRI_proxyEllipsoid,d=o.meta.isEsriSymbolResource&&c!=null&&o.meta.ESRI_webstyle==="EsriRealisticTreesStyle";d&&!o.customMeta.esriTreeRendering&&(o.customMeta.esriTreeRendering=!0,qe(o,c));const i=!!r.usePBR,u=o.meta.isEsriSymbolResource?{usePBR:i,isSchematic:!1,treeRendering:d,mrrFactors:ae}:{usePBR:i,isSchematic:!1,treeRendering:!1,mrrFactors:ie},a={...r.materialParameters,treeRendering:d},{engineResources:e,referenceBoundingBox:s}=Pe(o,u,a,r,n.specifiedLodIndex);return{lods:e,referenceBoundingBox:s,isEsriSymbolResource:o.meta.isEsriSymbolResource,isWosr:!1}}function X(t){const r=t.match(/(.*\.(gltf|glb))(\?lod=([0-9]+))?$/);return r?{fileType:"gltf",url:r[1],specifiedLodIndex:r[4]!=null?Number(r[4]):null}:t.match(/(.*\.(json|json\.gz))$/)?{fileType:"wosr",url:t,specifiedLodIndex:null}:{fileType:"unknown",url:t,specifiedLodIndex:null}}function Pe(t,r,n,o,c){const d=t.model,i=new Array,u=new Map,a=new Map,e=d.lods.length,s=le();return d.lods.forEach((l,m)=>{const x=o.skipHighLods===!0&&(e>1&&m===0||e>3&&m===1)||o.skipHighLods===!1&&c!=null&&m!==c;if(x&&m!==0)return;const f=new Le(l.name,l.lodThreshold,[0,0,0]);l.parts.forEach(p=>{const h=x?new L({},o):je(d,p,f,r,n,u,a,o),{geometry:b,vertexCount:y}=Ve(p,h??new L({},o)),g=b.boundingInfo;g!=null&&m===0&&(V(s,g.bbMin),V(s,g.bbMax)),h!=null&&(f.stageResources.geometries.push(b),f.numberOfVertices+=y)}),x||i.push(f)}),{engineResources:i,referenceBoundingBox:s}}function je(t,r,n,o,c,d,i,u){const a=r.material+(r.attributes.normal?"_normal":"")+(r.attributes.color?"_color":"")+(r.attributes.texCoord0?"_texCoord0":"")+(r.attributes.tangent?"_tangent":""),e=t.materials.get(r.material),s=r.attributes.texCoord0!=null,l=r.attributes.normal!=null;if(e==null)return null;const m=ke(e.alphaMode);if(!d.has(a)){if(s){const v=(E,Y=!1)=>{if(E!=null&&!i.has(E)){const F=t.textures.get(E);if(F!=null){const T=F.data;i.set(E,new Oe(I(T)?T.data:T,{...F.parameters,preMultiplyAlpha:!I(T)&&Y,encoding:I(T)&&T.encoding!=null?T.encoding:void 0}))}}};v(e.textureColor,m!==S.Opaque),v(e.textureNormal),v(e.textureOcclusion),v(e.textureEmissive),v(e.textureMetallicRoughness)}const f=e.color[0]**(1/$),p=e.color[1]**(1/$),h=e.color[2]**(1/$),b=e.emissiveFactor[0]**(1/$),y=e.emissiveFactor[1]**(1/$),g=e.emissiveFactor[2]**(1/$),A=e.textureColor!=null&&s?i.get(e.textureColor):null,N=ue({normalTexture:e.textureNormal,metallicRoughnessTexture:e.textureMetallicRoughness,metallicFactor:e.metallicFactor,roughnessFactor:e.roughnessFactor,emissiveTexture:e.textureEmissive,emissiveFactor:e.emissiveFactor,occlusionTexture:e.textureOcclusion}),P=e.normalTextureTransform?.scale!=null?e.normalTextureTransform?.scale:ce;d.set(a,new L({...o,transparent:m===S.Blend,customDepthTest:de.Lequal,textureAlphaMode:m,textureAlphaCutoff:e.alphaCutoff,diffuse:[f,p,h],ambient:[f,p,h],opacity:e.opacity,doubleSided:e.doubleSided,doubleSidedType:"winding-order",cullFace:e.doubleSided?k.None:k.Back,hasVertexColors:!!r.attributes.color,hasVertexTangents:!!r.attributes.tangent,normalType:l?q.Attribute:q.ScreenDerivative,castShadows:!0,receiveShadows:e.receiveShadows,receiveAmbientOcclusion:e.receiveAmbientOcclustion,textureId:A?.id,colorMixMode:e.colorMixMode,normalTextureId:e.textureNormal!=null&&s?i.get(e.textureNormal).id:void 0,textureAlphaPremultiplied:A!=null&&!!A.parameters.preMultiplyAlpha,occlusionTextureId:e.textureOcclusion!=null&&s?i.get(e.textureOcclusion).id:void 0,emissiveTextureId:e.textureEmissive!=null&&s?i.get(e.textureEmissive).id:void 0,metallicRoughnessTextureId:e.textureMetallicRoughness!=null&&s?i.get(e.textureMetallicRoughness).id:void 0,emissiveFactor:[b,y,g],mrrFactors:N?fe:[e.metallicFactor,e.roughnessFactor,o.mrrFactors[2]],isSchematic:N,colorTextureTransformMatrix:M(e.colorTextureTransform),normalTextureTransformMatrix:M(e.normalTextureTransform),scale:[P[0],P[1]],occlusionTextureTransformMatrix:M(e.occlusionTextureTransform),emissiveTextureTransformMatrix:M(e.emissiveTextureTransform),metallicRoughnessTextureTransformMatrix:M(e.metallicRoughnessTextureTransform),...c},u))}const x=d.get(a);if(n.stageResources.materials.push(x),s){const f=p=>{p!=null&&n.stageResources.textures.push(i.get(p))};f(e.textureColor),f(e.textureNormal),f(e.textureOcclusion),f(e.textureEmissive),f(e.textureMetallicRoughness)}return x}function Ve(t,r){const n=t.attributes.position.count,o=Fe(t.indices||n,t.primitiveType),c=O(3*n),{typedBuffer:d,typedBufferStride:i}=t.attributes.position;me(c,d,t.transform,3,i);const u=[[w.POSITION,new B(c,o,3,!0)]];if(t.attributes.normal!=null){const e=O(3*n),{typedBuffer:s,typedBufferStride:l}=t.attributes.normal;pe(R,t.transform),xe(e,s,R,3,l),U(R)&&D(e,e),u.push([w.NORMAL,new B(e,o,3,!0)])}if(t.attributes.tangent!=null){const e=O(4*n),{typedBuffer:s,typedBufferStride:l}=t.attributes.tangent;he(R,t.transform),ge(e,s,R,4,l),U(R)&&D(e,e,4),u.push([w.TANGENT,new B(e,o,4,!0)])}if(t.attributes.texCoord0!=null){const e=O(2*n),{typedBuffer:s,typedBufferStride:l}=t.attributes.texCoord0;_e(e,s,2,l),u.push([w.UV0,new B(e,o,2,!0)])}const a=t.attributes.color;if(a!=null){const e=new Uint8Array(4*n);a.elementCount===4?a instanceof be?G(e,a,255):a instanceof Q?Ce(e,a):a instanceof Te&&G(e,a,1/256):(e.fill(255),a instanceof J?H(e,a.typedBuffer,255,4,a.typedBufferStride):t.attributes.color instanceof ye?$e(e,a.typedBuffer,4,t.attributes.color.typedBufferStride):t.attributes.color instanceof Re&&H(e,a.typedBuffer,1/256,4,a.typedBufferStride)),u.push([w.COLOR,new B(e,o,4,!0)])}return{geometry:new ve(r,u),vertexCount:n}}const R=K();function ke(t){switch(t){case"BLEND":return S.Blend;case"MASK":return S.Mask;case"OPAQUE":case null:case void 0:return S.Opaque}}function qe(t,r){for(let n=0;n<t.model.lods.length;++n){const o=t.model.lods[n];for(const c of o.parts){const d=c.attributes.normal;if(d==null)return;const i=c.attributes.position,u=i.count,a=C(),e=C(),s=C(),l=new Uint8Array(4*u),m=new Float64Array(3*u),x=we(Be(),c.transform);let f=0,p=0;for(let h=0;h<u;h++){i.getVec(h,e),d.getVec(h,a),W(e,e,c.transform),Me(s,e,r.center),z(s,s,r.radius);const b=s[2],y=Se(s),g=Math.min(.45+.55*y*y,1);z(s,s,r.radius),x!==null&&W(s,s,x),Ae(s,s),n+1!==t.model.lods.length&&t.model.lods.length>1&&Ee(s,s,a,b>-1?.2:Math.min(-4*b-3.8,1)),m[f]=s[0],m[f+1]=s[1],m[f+2]=s[2],f+=3,l[p]=255*g,l[p+1]=255*g,l[p+2]=255*g,l[p+3]=255,p+=4}c.attributes.normal=new J(m),c.attributes.color=new Q(l)}}}const ze=Object.freeze(Object.defineProperty({__proto__:null,fetch:Ne,parseUrl:X},Symbol.toStringTag,{value:"Module"}));export{Ne as e,ze as o,M as s};
