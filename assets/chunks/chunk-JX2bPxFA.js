import{aX as C,a6 as B,E as d,gN as N,gT as u,lO as V,kX as M,gO as T,lo as A,gZ as G,gR as O,g_ as X,gW as v,gV as b,gX as k,h0 as z}from"./chunk-CMhy9c9G.js";import{u as H}from"./chunk-Dc5RCiI0.js";import{u as P}from"./chunk-Bza_EozM.js";import"./chunk-BY_FN4O4.js";import"./chunk-Dx0NO5tE.js";import"./chunk-hcQCkdqJ.js";import"./chunk-BCEYKtyI.js";import"./chunk-DfjCgXDb.js";import"./chunk-DIHKnm4l.js";import"./chunk-TufeK50d.js";import"./chunk-Dck1UqdK.js";import"./chunk-B4Rwpdzs.js";import"./chunk-igt1gBeK.js";import"./chunk-Cj_Zd08g.js";import"./chunk-BG40D5IJ.js";import"./chunk-Dzc4VObD.js";import"./chunk-DjjaYBlz.js";import"./chunk-CM_lIypp.js";import"./chunk-CmV2Xkqf.js";import"./chunk-CbY12eax.js";import"./chunk-BcJWwafW.js";import"./chunk-ClYvIdCO.js";import"./chunk-QvQIJROn.js";import"./chunk-CdctZqhD.js";import"./chunk-DaHzAMiu.js";import"./chunk-C1aYhagP.js";import"./chunk-BU_CQVD8.js";import"./chunk-D_aEPSIR.js";import"./chunk-CAaD5fpi.js";import"./chunk-C0Px4IH5.js";import"./chunk-gN39URxt.js";import"./chunk-HNqUD5wH.js";import"./chunk-3xYMskso.js";import"./chunk-etnkt-xL.js";import"./chunk-oE2be0WM.js";import"./chunk-BnPJJ4xW.js";import"./chunk-DdA8NjGq.js";import"./chunk-scr1RBcv.js";import"./chunk-BVa6-kjc.js";import"./chunk-CIKSIPV2.js";var E=(t=>(t.CENTER="center",t.RADIUS="radius",t))(E||{});const U=(t,g)=>{const y=new C({color:[255,0,0],size:8,outline:{color:[255,255,255],width:1}}),f=new C({color:[255,0,0],size:8,outline:{color:[255,255,255],width:1}}),w=new B({color:[0,0,0,.5],style:"solid",outline:{color:[0,0,0],width:1,style:"dash"}}),o=H(),{viewCursorAdd:r,viewCursorRemove:m}=P("crosshair"),p=new M,a=new d({symbol:y}),i=new d({symbol:f,attributes:{type:E.CENTER}}),n=new d({symbol:w});function _(){if(!u(t)){console.error("layerRef is not defined");return}r();const e=o.on("pointer-move",x);p.add(e);const s=o.on("click",R);p.add(s);const c=o.on("double-click",l=>{l.stopPropagation(),h()});p.add(c)}function R(e){if(!o.graphics.includes(i)){const{x:s,y:c}=e,l=o.toMap({x:s,y:c});i.geometry=l,o.graphics.add(i),o.graphics.add(n)}}function x(e){const{x:s,y:c}=e;if(a.geometry=o.toMap({x:s,y:c}),o.graphics.add(a),o.graphics.includes(n)){const S=i.geometry.distance(a.geometry);n.geometry=new V({center:i.geometry,radius:S})}}function h(){if(m(),p.removeAll(),o.graphics.remove(a),o.graphics.remove(i),!o.graphics.includes(n))return;const e=new d({geometry:n.geometry,symbol:g?.symbol});return u(t)?.add(e),o.graphics.remove(n),e}return N(h),{start:_,complete:h}},Bo=T({__name:"create",props:{layer:{type:Object,default:void 0}},setup(t){const g=t,y=A(()=>g.layer),{start:f,complete:w}=U(y);return(o,r)=>{const m=G("ElButton");return O(),X(z,null,[v(m,{onClick:u(f)},{default:b(()=>r[0]||(r[0]=[k(" Start ")])),_:1},8,["onClick"]),v(m,{onClick:u(w)},{default:b(()=>r[1]||(r[1]=[k(" Complete ")])),_:1},8,["onClick"])],64)}}});export{Bo as _};
