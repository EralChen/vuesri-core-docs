import{u as p}from"./chunk-vi6k8Juw.js";import{gY as h,lB as m,oy as d,gX as f}from"./chunk-7CxtqCyf.js";import{s as g,a as w}from"./chunk-B3AFDltd.js";const y={cursor:{type:String,default:""}},_={"update:cursor":s=>s||!0},k=h({emits:_,props:y,setup(s,{emit:r}){const e=p();class t extends f{constructor(i,l){super(),this.eventName=i,this.handler=l}add(){const i=e.on(this.eventName,this.handler);this.removeHandler=i.remove}}const o=e[g],c=new t("click",async n=>{const i=await e.hitTest(n);console.log("va_view_click_event",{view:e,event:n,hitTestResult:i}),o.emit("click",{view:e,event:n,hitTestResult:i})});c.add(),m(()=>{c.remove()});const a=new t("pointer-move",d(async n=>{const i=await e.hitTest(n),l=i.results[0];let u;if(l&&(l.type==="media"?u=l.layer:l.type==="graphic"&&(u=l.graphic?.layer)),u){const v=u[w];r("update:cursor",v)}else r("update:cursor","initial");o.emit("pointer-move",{view:e,event:n,hitTestResult:i})},600,{leading:!1,trailing:!0}));return a.add(),m(()=>{a.remove()}),()=>null}}),N=h({setup(){const s=p();class r extends f{constructor(a,n){super(),this.propertyName=a,this.handler=n}add(){const a=s.watch(this.propertyName,this.handler);this.removeHandler=a.remove}}const e=s[g],t=new r("extent",d((c,a)=>{e.emit("watch:extent",[c,a])},50));t.add(),m(()=>{t.remove()});const o=new r("scale",d((c,a)=>{e.emit("watch:scale",[c,a])},50));return o.add(),m(()=>{o.remove()}),()=>null}});function M(s){return{all:s=s||new Map,on:function(r,e){var t=s.get(r);t?t.push(e):s.set(r,[e])},off:function(r,e){var t=s.get(r);t&&(e?t.splice(t.indexOf(e)>>>0,1):s.set(r,[]))},emit:function(r,e){var t=s.get(r);t&&t.slice().map(function(o){o(e)}),(t=s.get("*"))&&t.slice().map(function(o){o(r,e)})}}}export{k as _,N as a,_ as e,M as m,y as p};
