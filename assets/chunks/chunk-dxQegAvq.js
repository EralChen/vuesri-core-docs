import{gY as P,b$ as C,a4 as N,C as h,h2 as y,lN as T,lP as A,gZ as B,lv as M,h8 as V,h0 as G,h9 as z,h6 as f,h4 as b,h5 as k,hb as $}from"./chunk-r79-UitW.js";import{u as _}from"./chunk-QlMQA5MY.js";import"./chunk-f-qDskxj.js";import"./chunk-QQWeD_ir.js";import"./chunk-c4b-Yaea.js";import"./chunk-EpNfzgt8.js";import"./chunk-GaQCtJAj.js";import"./chunk-iJFM8kcj.js";import"./chunk-MO7AtA6M.js";import"./chunk-A1k3Sw6V.js";import"./chunk-HbTg3DvT.js";import"./chunk-woU6z8Ei.js";import"./chunk-CaitbKEY.js";import"./chunk-ioYUBtQg.js";import"./chunk-AIkMVrBB.js";import"./chunk-zPn7vAq8.js";import"./chunk-Nl6L5Sha.js";import"./chunk-XYcYaV54.js";import"./chunk-oiJm1HFG.js";import"./chunk-Ze2sBanE.js";import"./chunk-A-93cahJ.js";import"./chunk-i8Hri-Zk.js";import"./chunk-qSwNteA0.js";import"./chunk-wpULlYmq.js";import"./chunk-9hAMyKdI.js";import"./chunk-HHSX2f6G.js";import"./chunk-rzTdRPKU.js";import"./chunk-nGBmUvPo.js";import"./chunk-F6pmMbG8.js";import"./chunk-UcyyodeN.js";import"./chunk-AWcxOjZK.js";import"./chunk-vpjPN8w4.js";import"./chunk-8GNmAK67.js";import"./chunk-ozya2Jv4.js";import"./chunk-56-EE9ID.js";import"./chunk-v81I-D8v.js";import"./chunk-yfXX26rS.js";import"./chunk-Z_IYtaAq.js";import"./chunk-V9_cq-fp.js";const j=(e="crosshair")=>{const r=_();class c extends P{constructor(){super(...arguments),this.cursor=e}add(){r.container.style.cursor=this.cursor,this.removeHandler=()=>{r.container.style.removeProperty("cursor")}}}const i=new c;return{viewCursorAdd:()=>{i.add()},viewCursorRemove:()=>{i.remove()}}};var S=(e=>(e.CENTER="center",e.RADIUS="radius",e))(S||{});const D=(e,r)=>{const c=r?.floatingPointSymbol||new C({color:[255,0,0],size:8,outline:{color:[255,255,255],width:1}}),i=r?.centerControlPointSymbol||new C({color:[255,0,0],size:8,outline:{color:[255,255,255],width:1}}),l=r?.previewSymbol||new N({color:[0,0,0,.5],style:"solid",outline:{color:[0,0,0],width:1,style:"dash"}}),o=_(),{viewCursorAdd:v,viewCursorRemove:p}=j("crosshair"),d=new A,u=new h({symbol:c}),n=new h({symbol:i,attributes:{type:S.CENTER}}),s=new h({symbol:l});function x(){if(!y(e)){console.error("layerRef is not defined");return}v();const t=o.on("pointer-move",R);d.add(t);const a=o.on("click",E);d.add(a);const m=o.on("double-click",g=>{g.stopPropagation(),w()});d.add(m)}function E(t){if(!o.graphics.includes(n)){const{x:a,y:m}=t,g=o.toMap({x:a,y:m});n.geometry=g,o.graphics.add(n),o.graphics.add(s)}}function R(t){const{x:a,y:m}=t;if(u.geometry=o.toMap({x:a,y:m}),o.graphics.add(u),o.graphics.includes(s)){const H=n.geometry.distance(u.geometry);s.geometry=new T({center:n.geometry,radius:H})}}function w(){if(p(),d.removeAll(),o.graphics.remove(u),o.graphics.remove(n),!o.graphics.includes(s))return;const t=new h({geometry:s.geometry,symbol:r?.symbol});return y(e)?.add(t),o.graphics.remove(s),t}return{start:x,complete:w}},Ro=B({__name:"create",props:{layer:{type:Object,default:void 0}},setup(e){const r=e,c=M(()=>r.layer),{start:i,complete:l}=D(c);return(o,v)=>{const p=V("ElButton");return G(),z($,null,[f(p,{onClick:y(i)},{default:b(()=>[k(" Start ")]),_:1},8,["onClick"]),f(p,{onClick:y(l)},{default:b(()=>[k(" Complete ")]),_:1},8,["onClick"])],64)}}});export{Ro as _};
