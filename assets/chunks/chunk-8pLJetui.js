import{$ as s,a0 as i,em as g,a2 as x,s as c,ey as E,bM as b,ar as F,bR as m}from"./chunk-5cgByRBI.js";const D=y=>{let e=class extends y{constructor(){super(...arguments),this.view=null}async fetchPopupFeaturesAtLocation(p,n){const{layer:r}=this;if(!p)throw new c("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:r});const{popupEnabled:u}=r,a=E(r,n);if(!u||a==null)throw new c("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:u,popupTemplate:a});const w=await a.getRequiredFields();b(n);const t=new F;t.timeExtent=this.timeExtent,t.geometry=p,t.outFields=w,t.outSpatialReference=p.spatialReference;const{resolution:o,spatialReference:l}=this.view,d=this.view.type==="2d"?new m(o,o,l):new m(.5*o,.5*o,l),{returnTopmostRaster:h,showNoDataRecords:R}=a.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},f={returnDomainValues:!0,returnTopmostRaster:h,pixelSize:d,showNoDataRecords:R,signal:n?.signal};return r.queryVisibleRasters(t,f).then(v=>v)}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return s([i()],e.prototype,"layer",void 0),s([i()],e.prototype,"suspended",void 0),s([i(g)],e.prototype,"timeExtent",void 0),s([i()],e.prototype,"view",void 0),e=s([x("esri.views.layers.ImageryLayerView")],e),e};export{D as u};
