import{s as S,bY as x,q as w,Q as u,bZ as f,b_ as N,b$ as $,c0 as D,c1 as U,c2 as F,c3 as g,c4 as h,c5 as I,c6 as R}from"./chunk-CMhy9c9G.js";import{c as q,a as d}from"./chunk-8WtPGj6h.js";import"./chunk-ByM7454y.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */function ht(t,r,o,e){const m=t.name;return m==null?Promise.reject(new S("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):t.styleName==="Esri2DPointSymbolsStyle"?E(m,r,e):x(t,r,e).then(l=>A(l,m,r,o,R,e))}function v(t,r){return r.items.find(o=>o.name===t)}function A(t,r,o,e,m,l){const a=o?.portal!=null?o.portal:w.getDefault(),y={portal:a,url:u(t.baseUrl),origin:"portal-item"},n=v(r,t.data);if(!n){const c=`The symbol name '${r}' could not be found`;return Promise.reject(new S("symbolstyleutils:symbol-name-not-found",c,{symbolName:r}))}let s=f(m(n,e),y),p=n.thumbnail?.href??null;const b=n.thumbnail?.imageData;q()&&(s=d(s)??"",p=d(p));const P={portal:a,url:u(N(s)),origin:"portal-item"};return $(s,l).then(c=>{const j=e==="cimRef"?D(c.data):c.data,i=U(j,P);if(i&&F(i)){if(p){const O=f(p,y);i.thumbnail=new g({url:O})}else b&&(i.thumbnail=new g({url:`data:image/png;base64,${b}`}));t.styleUrl?i.styleOrigin=new h({portal:o.portal,styleUrl:t.styleUrl,name:r}):t.styleName&&(i.styleOrigin=new h({portal:o.portal,styleName:t.styleName,name:r}))}return i})}function E(t,r,o){const e=I.replaceAll(/\{SymbolName\}/gi,t),m=r.portal!=null?r.portal:w.getDefault();return $(e,o).then(l=>{const a=D(l.data);return U(a,{portal:m,url:u(N(e)),origin:"portal-item"})})}export{A as fetchSymbolFromStyle,v as getStyleItemFromStyle,ht as resolveWebStyleSymbol};
