import{b$ as h,C as y,he as M,h2 as g,lO as f,lP as U,bR as w,lQ as E,gZ as V,lu as $,h8 as z,h0 as N,h9 as O,h6 as C,h4 as b,h5 as P,hb as T}from"./chunk-5cgByRBI.js";import{u as j}from"./chunk-AKK1CEJt.js";import"./chunk-Px56PspP.js";import"./chunk-E5BRPeYu.js";import"./chunk-pCqGjxAI.js";import"./chunk-zSey9Ooj.js";import"./chunk-h-6BO8IB.js";import"./chunk-xAN4VzPO.js";import"./chunk-UKZSLdqr.js";import"./chunk-WSF21JF0.js";import"./chunk-yZafP3rf.js";import"./chunk-H62H84bQ.js";import"./chunk-x_uP2gs7.js";import"./chunk-CuAaMpbW.js";import"./chunk-9fCAoXev.js";import"./chunk-at0AWBwu.js";import"./chunk-ahoVFfdr.js";import"./chunk-vVb9o76x.js";import"./chunk-xrk-kNOH.js";import"./chunk-pwJAAE4U.js";import"./chunk-n27tu1zc.js";import"./chunk-O7qZ5nAO.js";import"./chunk-Ow-0ZicZ.js";import"./chunk-n41jAy5X.js";import"./chunk-puQ8N500.js";import"./chunk-DLXyH4A4.js";import"./chunk-Kr9URs_A.js";import"./chunk-EL967GvW.js";import"./chunk-sPUU7m6j.js";import"./chunk-vI5OQCLh.js";import"./chunk-TdOen-x3.js";import"./chunk-FmJXFfP7.js";import"./chunk-e_xIS2Vw.js";import"./chunk-bCfOp0ta.js";import"./chunk-3EAHv1mu.js";import"./chunk-d0kHfygp.js";import"./chunk-Ysh6IYsX.js";import"./chunk-z09cFCry.js";import"./chunk-tdkwsFTd.js";const A=(m,p)=>{const l=p?.centerControlPointSymbol||new h({color:[255,0,0],size:10,style:"circle",outline:{color:[255,255,255],width:2}}),d=p?.radiusControlPointSymbol||new h({color:[255,0,0],size:10,style:"circle",outline:{color:[255,255,255],width:2}}),t=j(),s=new E,n=new y({symbol:l}),e=new y({symbol:d}),c=M();function _(){const o=g(m);if(!o){console.error("Graphic is not defined");return}const u=o.geometry,x=u.centroid;n.geometry=x,t.graphics.add(n);const R=u.getPoint(0,Math.floor(u.rings[0].length/12));e.geometry=R,t.graphics.add(e);const k=t.on("drag",i=>{c.value&&i.stopPropagation()});s.add(k);const S=t.on("pointer-move",i=>{if(c.value===n){const r=t.toMap({x:i.x,y:i.y});n.geometry=r,o.geometry=new f({...o.geometry,center:r,radius:o.geometry.radius,radiusUnit:o.geometry.radiusUnit});const a=o.geometry.getPoint(0,Math.floor(o.geometry.rings[0].length/12));e.geometry=a}if(c.value===e){const r=t.toMap({x:i.x,y:i.y});e.geometry=r;const a=n.geometry,H=U(new w({latitude:a.latitude,longitude:a.longitude,spatialReference:t.spatialReference}),new w({longitude:r.longitude,latitude:r.latitude,spatialReference:t.spatialReference}),"meters");o.geometry=new f({...o.geometry,center:a,radius:H,radiusUnit:"meters"})}});s.add(S);const B=t.on("pointer-down",i=>{t.hitTest(i).then(r=>{if(r.results.length){const a=r.results[0].graphic;c.value=a}})}),G=t.on("pointer-up",()=>{c.value=void 0});s.add(B),s.add(G)}function v(){s.removeAll(),t.graphics.remove(n),t.graphics.remove(e)}return{start:_,complate:v}},St=V({__name:"update",props:{graphic:{type:Object,default:void 0}},setup(m){const p=m,l=$(()=>p.graphic),{start:d,complate:t}=A(l);return(s,n)=>{const e=z("ElButton");return N(),O(T,null,[C(e,{onClick:g(d)},{default:b(()=>[P(" Start ")]),_:1},8,["onClick"]),C(e,{onClick:g(t)},{default:b(()=>[P(" Complate ")]),_:1},8,["onClick"])],64)}}});export{St as _};
