import{p as $r}from"./chunk-_oFyxSRx.js";import{C$ as Dr,D0 as Lr,D1 as Gr,gY as Ur,lt as Xr,h2 as Wr,oE as wt,gZ as Ot,lu as ze,U as Br,ct as Yr,br as zr,lD as Vr,h7 as Hr,g$ as kr,h0 as qr,h3 as Zr,hb as jr,nq as Qr,hi as Jr}from"./chunk-nmd5K2Af.js";import{f as Rt}from"./chunk-ESmddae3.js";import{u as Kr}from"./chunk-v_TIPWMu.js";import{V as en}from"./chunk-kWXoaKhu.js";const tn={},rn=Object.freeze(Object.defineProperty({__proto__:null,default:tn},Symbol.toStringTag,{value:"Module"})),nn={...$r,url:{type:String,required:!0},layerId:{type:String,required:!0},tileMatrixSetId:{type:String,default:"EPSG:3857"},defaultLayerOptions:{type:Object,default:()=>({})},optionsFromCapabilities:{type:Boolean,default:!1},tileInfo:{type:Object,default:void 0},fullExtent:{type:Object,default:void 0},customParameters:{type:Object,default:()=>({})}},on={},an={REQUEST:"GetTile",SERVICE:"WMTS",VERSION:"1.0.0",FORMAT:"application/vnd.mapbox-vector-tile"},ln=t=>({...an,TILEROW:"{y}",TILECOL:"{x}",LAYER:t.layerId,TILEMATRIXSET:t.tileMatrixSetId,TILEMATRIX:"{z}"}),_t=(t,e,r,n)=>{const i=r?{xmin:r.xmin,ymin:r.ymin,xmax:r.xmax,ymax:r.ymax,spatialReference:r.spatialReference}:Rt;n=n||r;const o=n?{xmin:n.xmin,ymin:n.ymin,xmax:n.xmax,ymax:n.ymax,spatialReference:n.spatialReference}:Rt;return{capabilities:"TilesOnly",tiles:[t.url+"?"+Object.entries(ln({layerId:t.layerId,tileMatrixSetId:t.tileMatrixSetId})).map(([a,s])=>`${a}=${s}`).join("&")],fullExtent:{spatialReference:{wkid:4326},...i},initialExtent:{spatialReference:{wkid:4326},...o},tileInfo:e}};var sn=Error,un=EvalError,fn=RangeError,cn=ReferenceError,lr=SyntaxError,we=TypeError,pn=URIError,yn=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,r);if(a.value!==i||a.enumerable!==!0)return!1}return!0},It=typeof Symbol<"u"&&Symbol,dn=yn,hn=function(){return typeof It!="function"||typeof Symbol!="function"||typeof It("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:dn()},Ve={__proto__:null,foo:{}},mn=Object,gn=function(){return{__proto__:Ve}.foo===Ve.foo&&!(Ve instanceof mn)},vn="Function.prototype.bind called on incompatible ",Sn=Object.prototype.toString,En=Math.max,Tn="[object Function]",Mt=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},xn=function(e,r){for(var n=[],i=r||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},bn=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},Pn=function(e){var r=this;if(typeof r!="function"||Sn.apply(r)!==Tn)throw new TypeError(vn+r);for(var n=xn(arguments,1),i,o=function(){if(this instanceof i){var f=r.apply(this,Mt(n,arguments));return Object(f)===f?f:this}return r.apply(e,Mt(n,arguments))},a=En(0,r.length-n.length),s=[],l=0;l<a;l++)s[l]="$"+l;if(i=Function("binder","return function ("+bn(s,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i},An=Pn,dt=Function.prototype.bind||An,wn=Function.prototype.call,On=Object.prototype.hasOwnProperty,Rn=dt,_n=Rn.call(wn,On),v,In=sn,Mn=un,Fn=fn,Cn=cn,de=lr,pe=we,Nn=pn,sr=Function,He=function(t){try{return sr('"use strict"; return ('+t+").constructor;")()}catch{}},ne=Object.getOwnPropertyDescriptor;if(ne)try{ne({},"")}catch{ne=null}var ke=function(){throw new pe},$n=ne?function(){try{return arguments.callee,ke}catch{try{return ne(arguments,"callee").get}catch{return ke}}}():ke,oe=hn(),Dn=gn(),_=Object.getPrototypeOf||(Dn?function(t){return t.__proto__}:null),fe={},Ln=typeof Uint8Array>"u"||!_?v:_(Uint8Array),ie={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?v:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?v:ArrayBuffer,"%ArrayIteratorPrototype%":oe&&_?_([][Symbol.iterator]()):v,"%AsyncFromSyncIteratorPrototype%":v,"%AsyncFunction%":fe,"%AsyncGenerator%":fe,"%AsyncGeneratorFunction%":fe,"%AsyncIteratorPrototype%":fe,"%Atomics%":typeof Atomics>"u"?v:Atomics,"%BigInt%":typeof BigInt>"u"?v:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?v:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?v:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?v:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":In,"%eval%":eval,"%EvalError%":Mn,"%Float32Array%":typeof Float32Array>"u"?v:Float32Array,"%Float64Array%":typeof Float64Array>"u"?v:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?v:FinalizationRegistry,"%Function%":sr,"%GeneratorFunction%":fe,"%Int8Array%":typeof Int8Array>"u"?v:Int8Array,"%Int16Array%":typeof Int16Array>"u"?v:Int16Array,"%Int32Array%":typeof Int32Array>"u"?v:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":oe&&_?_(_([][Symbol.iterator]())):v,"%JSON%":typeof JSON=="object"?JSON:v,"%Map%":typeof Map>"u"?v:Map,"%MapIteratorPrototype%":typeof Map>"u"||!oe||!_?v:_(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?v:Promise,"%Proxy%":typeof Proxy>"u"?v:Proxy,"%RangeError%":Fn,"%ReferenceError%":Cn,"%Reflect%":typeof Reflect>"u"?v:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?v:Set,"%SetIteratorPrototype%":typeof Set>"u"||!oe||!_?v:_(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?v:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":oe&&_?_(""[Symbol.iterator]()):v,"%Symbol%":oe?Symbol:v,"%SyntaxError%":de,"%ThrowTypeError%":$n,"%TypedArray%":Ln,"%TypeError%":pe,"%Uint8Array%":typeof Uint8Array>"u"?v:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?v:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?v:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?v:Uint32Array,"%URIError%":Nn,"%WeakMap%":typeof WeakMap>"u"?v:WeakMap,"%WeakRef%":typeof WeakRef>"u"?v:WeakRef,"%WeakSet%":typeof WeakSet>"u"?v:WeakSet};if(_)try{null.error}catch(t){var Gn=_(_(t));ie["%Error.prototype%"]=Gn}var Un=function t(e){var r;if(e==="%AsyncFunction%")r=He("async function () {}");else if(e==="%GeneratorFunction%")r=He("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=He("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&_&&(r=_(i.prototype))}return ie[e]=r,r},Ft={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Oe=dt,Ge=_n,Xn=Oe.call(Function.call,Array.prototype.concat),Wn=Oe.call(Function.apply,Array.prototype.splice),Ct=Oe.call(Function.call,String.prototype.replace),Ue=Oe.call(Function.call,String.prototype.slice),Bn=Oe.call(Function.call,RegExp.prototype.exec),Yn=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,zn=/\\(\\)?/g,Vn=function(e){var r=Ue(e,0,1),n=Ue(e,-1);if(r==="%"&&n!=="%")throw new de("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new de("invalid intrinsic syntax, expected opening `%`");var i=[];return Ct(e,Yn,function(o,a,s,l){i[i.length]=s?Ct(l,zn,"$1"):a||o}),i},Hn=function(e,r){var n=e,i;if(Ge(Ft,n)&&(i=Ft[n],n="%"+i[0]+"%"),Ge(ie,n)){var o=ie[n];if(o===fe&&(o=Un(n)),typeof o>"u"&&!r)throw new pe("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new de("intrinsic "+e+" does not exist!")},ge=function(e,r){if(typeof e!="string"||e.length===0)throw new pe("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new pe('"allowMissing" argument must be a boolean');if(Bn(/^%?[^%]*%?$/,e)===null)throw new de("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Vn(e),i=n.length>0?n[0]:"",o=Hn("%"+i+"%",r),a=o.name,s=o.value,l=!1,u=o.alias;u&&(i=u[0],Wn(n,Xn([0,1],u)));for(var f=1,y=!0;f<n.length;f+=1){var c=n[f],d=Ue(c,0,1),g=Ue(c,-1);if((d==='"'||d==="'"||d==="`"||g==='"'||g==="'"||g==="`")&&d!==g)throw new de("property names with quotes must have matching quotes");if((c==="constructor"||!y)&&(l=!0),i+="."+c,a="%"+i+"%",Ge(ie,a))s=ie[a];else if(s!=null){if(!(c in s)){if(!r)throw new pe("base intrinsic for "+e+" exists, but the property is not available.");return}if(ne&&f+1>=n.length){var S=ne(s,c);y=!!S,y&&"get"in S&&!("originalValue"in S.get)?s=S.get:s=s[c]}else y=Ge(s,c),s=s[c];y&&!l&&(ie[a]=s)}}return s},ur={exports:{}},qe,Nt;function ht(){if(Nt)return qe;Nt=1;var t=ge,e=t("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return qe=e,qe}var kn=ge,Le=kn("%Object.getOwnPropertyDescriptor%",!0);if(Le)try{Le([],"length")}catch{Le=null}var fr=Le,$t=ht(),qn=lr,ae=we,Dt=fr,Zn=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new ae("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new ae("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new ae("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new ae("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new ae("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new ae("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,s=arguments.length>6?arguments[6]:!1,l=!!Dt&&Dt(e,r);if($t)$t(e,r,{configurable:a===null&&l?l.configurable:!a,enumerable:i===null&&l?l.enumerable:!i,value:n,writable:o===null&&l?l.writable:!o});else if(s||!i&&!o&&!a)e[r]=n;else throw new qn("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},nt=ht(),cr=function(){return!!nt};cr.hasArrayLengthDefineBug=function(){if(!nt)return null;try{return nt([],"length",{value:1}).length!==1}catch{return!0}};var jn=cr,Qn=ge,Lt=Zn,Jn=jn(),Gt=fr,Ut=we,Kn=Qn("%Math.floor%"),ei=function(e,r){if(typeof e!="function")throw new Ut("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||Kn(r)!==r)throw new Ut("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in e&&Gt){var a=Gt(e,"length");a&&!a.configurable&&(i=!1),a&&!a.writable&&(o=!1)}return(i||o||!n)&&(Jn?Lt(e,"length",r,!0,!0):Lt(e,"length",r)),e};(function(t){var e=dt,r=ge,n=ei,i=we,o=r("%Function.prototype.apply%"),a=r("%Function.prototype.call%"),s=r("%Reflect.apply%",!0)||e.call(a,o),l=ht(),u=r("%Math.max%");t.exports=function(c){if(typeof c!="function")throw new i("a function is required");var d=s(e,a,arguments);return n(d,1+u(0,c.length-(arguments.length-1)),!0)};var f=function(){return s(e,o,arguments)};l?l(t.exports,"apply",{value:f}):t.exports.apply=f})(ur);var ti=ur.exports,pr=ge,yr=ti,ri=yr(pr("String.prototype.indexOf")),ni=function(e,r){var n=pr(e,!!r);return typeof n=="function"&&ri(e,".prototype.")>-1?yr(n):n};const ii=Dr(rn);var mt=typeof Map=="function"&&Map.prototype,Ze=Object.getOwnPropertyDescriptor&&mt?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Xe=mt&&Ze&&typeof Ze.get=="function"?Ze.get:null,Xt=mt&&Map.prototype.forEach,gt=typeof Set=="function"&&Set.prototype,je=Object.getOwnPropertyDescriptor&&gt?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,We=gt&&je&&typeof je.get=="function"?je.get:null,Wt=gt&&Set.prototype.forEach,oi=typeof WeakMap=="function"&&WeakMap.prototype,be=oi?WeakMap.prototype.has:null,ai=typeof WeakSet=="function"&&WeakSet.prototype,Pe=ai?WeakSet.prototype.has:null,li=typeof WeakRef=="function"&&WeakRef.prototype,Bt=li?WeakRef.prototype.deref:null,si=Boolean.prototype.valueOf,ui=Object.prototype.toString,fi=Function.prototype.toString,ci=String.prototype.match,vt=String.prototype.slice,J=String.prototype.replace,pi=String.prototype.toUpperCase,Yt=String.prototype.toLowerCase,dr=RegExp.prototype.test,zt=Array.prototype.concat,V=Array.prototype.join,yi=Array.prototype.slice,Vt=Math.floor,it=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Qe=Object.getOwnPropertySymbols,ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,he=typeof Symbol=="function"&&typeof Symbol.iterator=="object",$=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===he||!0)?Symbol.toStringTag:null,hr=Object.prototype.propertyIsEnumerable,Ht=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function kt(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||dr.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-Vt(-t):Vt(t);if(n!==t){var i=String(n),o=vt.call(e,i.length+1);return J.call(i,r,"$&_")+"."+J.call(J.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return J.call(e,r,"$&_")}var at=ii,qt=at.custom,Zt=gr(qt)?qt:null,di=function t(e,r,n,i){var o=r||{};if(j(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(j(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=j(o,"customInspect")?o.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(j(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(j(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Sr(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return s?kt(e,l):l}if(typeof e=="bigint"){var u=String(e)+"n";return s?kt(e,u):u}var f=typeof o.depth>"u"?5:o.depth;if(typeof n>"u"&&(n=0),n>=f&&f>0&&typeof e=="object")return lt(e)?"[Array]":"[Object]";var y=Fi(o,n);if(typeof i>"u")i=[];else if(vr(i,e)>=0)return"[Circular]";function c(x,F,D){if(F&&(i=yi.call(i),i.push(F)),D){var L={depth:o.depth};return j(o,"quoteStyle")&&(L.quoteStyle=o.quoteStyle),t(x,L,n+1,i)}return t(x,o,n+1,i)}if(typeof e=="function"&&!jt(e)){var d=bi(e),g=_e(e,c);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(g.length>0?" { "+V.call(g,", ")+" }":"")}if(gr(e)){var S=he?J.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):ot.call(e);return typeof e=="object"&&!he?Te(S):S}if(_i(e)){for(var b="<"+Yt.call(String(e.nodeName)),m=e.attributes||[],O=0;O<m.length;O++)b+=" "+m[O].name+"="+mr(hi(m[O].value),"double",o);return b+=">",e.childNodes&&e.childNodes.length&&(b+="..."),b+="</"+Yt.call(String(e.nodeName))+">",b}if(lt(e)){if(e.length===0)return"[]";var P=_e(e,c);return y&&!Mi(P)?"["+st(P,y)+"]":"[ "+V.call(P,", ")+" ]"}if(gi(e)){var I=_e(e,c);return!("cause"in Error.prototype)&&"cause"in e&&!hr.call(e,"cause")?"{ ["+String(e)+"] "+V.call(zt.call("[cause]: "+c(e.cause),I),", ")+" }":I.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+V.call(I,", ")+" }"}if(typeof e=="object"&&a){if(Zt&&typeof e[Zt]=="function"&&at)return at(e,{depth:f-n});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Pi(e)){var U=[];return Xt&&Xt.call(e,function(x,F){U.push(c(F,e,!0)+" => "+c(x,e))}),Qt("Map",Xe.call(e),U,y)}if(Oi(e)){var W=[];return Wt&&Wt.call(e,function(x){W.push(c(x,e))}),Qt("Set",We.call(e),W,y)}if(Ai(e))return Je("WeakMap");if(Ri(e))return Je("WeakSet");if(wi(e))return Je("WeakRef");if(Si(e))return Te(c(Number(e)));if(Ti(e))return Te(c(it.call(e)));if(Ei(e))return Te(si.call(e));if(vi(e))return Te(c(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===Lr)return"{ [object globalThis] }";if(!mi(e)&&!jt(e)){var w=_e(e,c),k=Ht?Ht(e)===Object.prototype:e instanceof Object||e.constructor===Object,Y=e instanceof Object?"":"null prototype",B=!k&&$&&Object(e)===e&&$ in e?vt.call(ee(e),8,-1):Y?"Object":"",M=k||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",h=M+(B||Y?"["+V.call(zt.call([],B||[],Y||[]),": ")+"] ":"");return w.length===0?h+"{}":y?h+"{"+st(w,y)+"}":h+"{ "+V.call(w,", ")+" }"}return String(e)};function mr(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function hi(t){return J.call(String(t),/"/g,"&quot;")}function lt(t){return ee(t)==="[object Array]"&&(!$||!(typeof t=="object"&&$ in t))}function mi(t){return ee(t)==="[object Date]"&&(!$||!(typeof t=="object"&&$ in t))}function jt(t){return ee(t)==="[object RegExp]"&&(!$||!(typeof t=="object"&&$ in t))}function gi(t){return ee(t)==="[object Error]"&&(!$||!(typeof t=="object"&&$ in t))}function vi(t){return ee(t)==="[object String]"&&(!$||!(typeof t=="object"&&$ in t))}function Si(t){return ee(t)==="[object Number]"&&(!$||!(typeof t=="object"&&$ in t))}function Ei(t){return ee(t)==="[object Boolean]"&&(!$||!(typeof t=="object"&&$ in t))}function gr(t){if(he)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!ot)return!1;try{return ot.call(t),!0}catch{}return!1}function Ti(t){if(!t||typeof t!="object"||!it)return!1;try{return it.call(t),!0}catch{}return!1}var xi=Object.prototype.hasOwnProperty||function(t){return t in this};function j(t,e){return xi.call(t,e)}function ee(t){return ui.call(t)}function bi(t){if(t.name)return t.name;var e=ci.call(fi.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function vr(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function Pi(t){if(!Xe||!t||typeof t!="object")return!1;try{Xe.call(t);try{We.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function Ai(t){if(!be||!t||typeof t!="object")return!1;try{be.call(t,be);try{Pe.call(t,Pe)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function wi(t){if(!Bt||!t||typeof t!="object")return!1;try{return Bt.call(t),!0}catch{}return!1}function Oi(t){if(!We||!t||typeof t!="object")return!1;try{We.call(t);try{Xe.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function Ri(t){if(!Pe||!t||typeof t!="object")return!1;try{Pe.call(t,Pe);try{be.call(t,be)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function _i(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Sr(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Sr(vt.call(t,0,e.maxStringLength),e)+n}var i=J.call(J.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Ii);return mr(i,"single",e)}function Ii(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+pi.call(e.toString(16))}function Te(t){return"Object("+t+")"}function Je(t){return t+" { ? }"}function Qt(t,e,r,n){var i=n?st(r,n):V.call(r,", ");return t+" ("+e+") {"+i+"}"}function Mi(t){for(var e=0;e<t.length;e++)if(vr(t[e],`
`)>=0)return!1;return!0}function Fi(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=V.call(Array(t.indent+1)," ");else return null;return{base:r,prev:V.call(Array(e+1),r)}}function st(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+V.call(t,","+r)+`
`+e.prev}function _e(t,e){var r=lt(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=j(t,i)?e(t[i],t):""}var o=typeof Qe=="function"?Qe(t):[],a;if(he){a={};for(var s=0;s<o.length;s++)a["$"+o[s]]=o[s]}for(var l in t)j(t,l)&&(r&&String(Number(l))===l&&l<t.length||he&&a["$"+l]instanceof Symbol||(dr.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if(typeof Qe=="function")for(var u=0;u<o.length;u++)hr.call(t,o[u])&&n.push("["+e(o[u])+"]: "+e(t[o[u]],t));return n}var Er=ge,ve=ni,Ci=di,Ni=we,Ie=Er("%WeakMap%",!0),Me=Er("%Map%",!0),$i=ve("WeakMap.prototype.get",!0),Di=ve("WeakMap.prototype.set",!0),Li=ve("WeakMap.prototype.has",!0),Gi=ve("Map.prototype.get",!0),Ui=ve("Map.prototype.set",!0),Xi=ve("Map.prototype.has",!0),St=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},Wi=function(t,e){var r=St(t,e);return r&&r.value},Bi=function(t,e,r){var n=St(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},Yi=function(t,e){return!!St(t,e)},zi=function(){var e,r,n,i={assert:function(o){if(!i.has(o))throw new Ni("Side channel does not contain "+Ci(o))},get:function(o){if(Ie&&o&&(typeof o=="object"||typeof o=="function")){if(e)return $i(e,o)}else if(Me){if(r)return Gi(r,o)}else if(n)return Wi(n,o)},has:function(o){if(Ie&&o&&(typeof o=="object"||typeof o=="function")){if(e)return Li(e,o)}else if(Me){if(r)return Xi(r,o)}else if(n)return Yi(n,o);return!1},set:function(o,a){Ie&&o&&(typeof o=="object"||typeof o=="function")?(e||(e=new Ie),Di(e,o,a)):Me?(r||(r=new Me),Ui(r,o,a)):(n||(n={key:{},next:null}),Bi(n,o,a))}};return i},Vi=String.prototype.replace,Hi=/%20/g,Ke={RFC1738:"RFC1738",RFC3986:"RFC3986"},Et={default:Ke.RFC3986,formatters:{RFC1738:function(t){return Vi.call(t,Hi,"+")},RFC3986:function(t){return String(t)}},RFC1738:Ke.RFC1738,RFC3986:Ke.RFC3986},ki=Et,et=Object.prototype.hasOwnProperty,re=Array.isArray,z=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),qi=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(re(n)){for(var i=[],o=0;o<n.length;++o)typeof n[o]<"u"&&i.push(n[o]);r.obj[r.prop]=i}}},Tr=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},Zi=function t(e,r,n){if(!r)return e;if(typeof r!="object"){if(re(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!et.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var i=e;return re(e)&&!re(r)&&(i=Tr(e,n)),re(e)&&re(r)?(r.forEach(function(o,a){if(et.call(e,a)){var s=e[a];s&&typeof s=="object"&&o&&typeof o=="object"?e[a]=t(s,o,n):e.push(o)}else e[a]=o}),e):Object.keys(r).reduce(function(o,a){var s=r[a];return et.call(o,a)?o[a]=t(o[a],s,n):o[a]=s,o},i)},ji=function(e,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},e)},Qi=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},Ji=function(e,r,n,i,o){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var s="",l=0;l<a.length;++l){var u=a.charCodeAt(l);if(u===45||u===46||u===95||u===126||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||o===ki.RFC1738&&(u===40||u===41)){s+=a.charAt(l);continue}if(u<128){s=s+z[u];continue}if(u<2048){s=s+(z[192|u>>6]+z[128|u&63]);continue}if(u<55296||u>=57344){s=s+(z[224|u>>12]+z[128|u>>6&63]+z[128|u&63]);continue}l+=1,u=65536+((u&1023)<<10|a.charCodeAt(l)&1023),s+=z[240|u>>18]+z[128|u>>12&63]+z[128|u>>6&63]+z[128|u&63]}return s},Ki=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],i=0;i<r.length;++i)for(var o=r[i],a=o.obj[o.prop],s=Object.keys(a),l=0;l<s.length;++l){var u=s[l],f=a[u];typeof f=="object"&&f!==null&&n.indexOf(f)===-1&&(r.push({obj:a,prop:u}),n.push(f))}return qi(r),e},eo=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},to=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},ro=function(e,r){return[].concat(e,r)},no=function(e,r){if(re(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(r(e[i]));return n}return r(e)},xr={arrayToObject:Tr,assign:ji,combine:ro,compact:Ki,decode:Qi,encode:Ji,isBuffer:to,isRegExp:eo,maybeMap:no,merge:Zi},br=zi,ut=xr,Ae=Et,io=Object.prototype.hasOwnProperty,Jt={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},q=Array.isArray,oo=String.prototype.split,ao=Array.prototype.push,Pr=function(t,e){ao.apply(t,q(e)?e:[e])},lo=Date.prototype.toISOString,Kt=Ae.default,C={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:ut.encode,encodeValuesOnly:!1,format:Kt,formatter:Ae.formatters[Kt],indices:!1,serializeDate:function(e){return lo.call(e)},skipNulls:!1,strictNullHandling:!1},so=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},tt={},uo=function t(e,r,n,i,o,a,s,l,u,f,y,c,d,g,S,b){for(var m=e,O=b,P=0,I=!1;(O=O.get(tt))!==void 0&&!I;){var U=O.get(e);if(P+=1,typeof U<"u"){if(U===P)throw new RangeError("Cyclic object value");I=!0}typeof O.get(tt)>"u"&&(P=0)}if(typeof l=="function"?m=l(r,m):m instanceof Date?m=y(m):n==="comma"&&q(m)&&(m=ut.maybeMap(m,function(Ye){return Ye instanceof Date?y(Ye):Ye})),m===null){if(o)return s&&!g?s(r,C.encoder,S,"key",c):r;m=""}if(so(m)||ut.isBuffer(m)){if(s){var W=g?r:s(r,C.encoder,S,"key",c);if(n==="comma"&&g){for(var w=oo.call(String(m),","),k="",Y=0;Y<w.length;++Y)k+=(Y===0?"":",")+d(s(w[Y],C.encoder,S,"value",c));return[d(W)+(i&&q(m)&&w.length===1?"[]":"")+"="+k]}return[d(W)+"="+d(s(m,C.encoder,S,"value",c))]}return[d(r)+"="+d(String(m))]}var B=[];if(typeof m>"u")return B;var M;if(n==="comma"&&q(m))M=[{value:m.length>0?m.join(",")||null:void 0}];else if(q(l))M=l;else{var h=Object.keys(m);M=u?h.sort(u):h}for(var x=i&&q(m)&&m.length===1?r+"[]":r,F=0;F<M.length;++F){var D=M[F],L=typeof D=="object"&&typeof D.value<"u"?D.value:m[D];if(!(a&&L===null)){var Ee=q(m)?typeof n=="function"?n(x,D):x:x+(f?"."+D:"["+D+"]");b.set(e,P);var At=br();At.set(tt,b),Pr(B,t(L,Ee,n,i,o,a,s,l,u,f,y,c,d,g,S,At))}}return B},fo=function(e){if(!e)return C;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||C.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Ae.default;if(typeof e.format<"u"){if(!io.call(Ae.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=Ae.formatters[n],o=C.filter;return(typeof e.filter=="function"||q(e.filter))&&(o=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:C.addQueryPrefix,allowDots:typeof e.allowDots>"u"?C.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:C.charsetSentinel,delimiter:typeof e.delimiter>"u"?C.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:C.encode,encoder:typeof e.encoder=="function"?e.encoder:C.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:C.encodeValuesOnly,filter:o,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:C.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:C.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:C.strictNullHandling}},co=function(t,e){var r=t,n=fo(e),i,o;typeof n.filter=="function"?(o=n.filter,r=o("",r)):q(n.filter)&&(o=n.filter,i=o);var a=[];if(typeof r!="object"||r===null)return"";var s;e&&e.arrayFormat in Jt?s=e.arrayFormat:e&&"indices"in e?s=e.indices?"indices":"repeat":s="indices";var l=Jt[s];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var u=l==="comma"&&e&&e.commaRoundTrip;i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var f=br(),y=0;y<i.length;++y){var c=i[y];n.skipNulls&&r[c]===null||Pr(a,uo(r[c],c,l,u,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,f))}var d=a.join(n.delimiter),g=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),d.length>0?g+d:""},me=xr,ft=Object.prototype.hasOwnProperty,po=Array.isArray,R={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:me.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},yo=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},Ar=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},ho="utf8=%26%2310003%3B",mo="utf8=%E2%9C%93",go=function(e,r){var n={},i=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,o=r.parameterLimit===1/0?void 0:r.parameterLimit,a=i.split(r.delimiter,o),s=-1,l,u=r.charset;if(r.charsetSentinel)for(l=0;l<a.length;++l)a[l].indexOf("utf8=")===0&&(a[l]===mo?u="utf-8":a[l]===ho&&(u="iso-8859-1"),s=l,l=a.length);for(l=0;l<a.length;++l)if(l!==s){var f=a[l],y=f.indexOf("]="),c=y===-1?f.indexOf("="):y+1,d,g;c===-1?(d=r.decoder(f,R.decoder,u,"key"),g=r.strictNullHandling?null:""):(d=r.decoder(f.slice(0,c),R.decoder,u,"key"),g=me.maybeMap(Ar(f.slice(c+1),r),function(S){return r.decoder(S,R.decoder,u,"value")})),g&&r.interpretNumericEntities&&u==="iso-8859-1"&&(g=yo(g)),f.indexOf("[]=")>-1&&(g=po(g)?[g]:g),ft.call(n,d)?n[d]=me.combine(n[d],g):n[d]=g}return n},vo=function(t,e,r,n){for(var i=n?e:Ar(e,r),o=t.length-1;o>=0;--o){var a,s=t[o];if(s==="[]"&&r.parseArrays)a=[].concat(i);else{a=r.plainObjects?Object.create(null):{};var l=s.charAt(0)==="["&&s.charAt(s.length-1)==="]"?s.slice(1,-1):s,u=parseInt(l,10);!r.parseArrays&&l===""?a={0:i}:!isNaN(u)&&s!==l&&String(u)===l&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(a=[],a[u]=i):l!=="__proto__"&&(a[l]=i)}i=a}return i},So=function(e,r,n,i){if(e){var o=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,l=n.depth>0&&a.exec(o),u=l?o.slice(0,l.index):o,f=[];if(u){if(!n.plainObjects&&ft.call(Object.prototype,u)&&!n.allowPrototypes)return;f.push(u)}for(var y=0;n.depth>0&&(l=s.exec(o))!==null&&y<n.depth;){if(y+=1,!n.plainObjects&&ft.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;f.push(l[1])}return l&&f.push("["+o.slice(l.index)+"]"),vo(f,r,n,i)}},Eo=function(e){if(!e)return R;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?R.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?R.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:R.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:R.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:R.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:R.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:R.comma,decoder:typeof e.decoder=="function"?e.decoder:R.decoder,delimiter:typeof e.delimiter=="string"||me.isRegExp(e.delimiter)?e.delimiter:R.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:R.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:R.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:R.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:R.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:R.strictNullHandling}},To=function(t,e){var r=Eo(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?go(t,r):t,i=r.plainObjects?Object.create(null):{},o=Object.keys(n),a=0;a<o.length;++a){var s=o[a],l=So(s,n[s],r,typeof t=="string");i=me.merge(i,l,r)}return r.allowSparse===!0?i:me.compact(i)},xo=co,bo=To,Po=Et,Ao={formats:Po,parse:bo,stringify:xo};const wo=Gr(Ao);function Oo(){throw new Error("Unimplemented abstract method.")}function Ro(t,e){return t>e?1:t<e?-1:0}function _o(t,e,r){if(t[0]<=e)return 0;const n=t.length;if(e<=t[n-1])return n-1;if(typeof r=="function"){for(let i=1;i<n;++i){const o=t[i];if(o===e)return i;if(o<e)return r(e,t[i-1],o)>0?i-1:i}return n-1}if(r>0){for(let i=1;i<n;++i)if(t[i]<e)return i-1;return n-1}if(r<0){for(let i=1;i<n;++i)if(t[i]<=e)return i;return n-1}for(let i=1;i<n;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return n-1}function Io(t,e,r){const n=e||Ro;return t.every(function(i,o){if(o===0)return!0;const a=n(t[o-1],i);return!(a>0||r&&a===0)})}function Tt(t,e){return wr(t,e,[]).join("")}function wr(t,e,r){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?r.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(t.nodeValue);else{let n;for(n=t.firstChild;n;n=n.nextSibling)wr(n,e,r)}return r}function Mo(t){return"documentElement"in t}function Fo(t){return new DOMParser().parseFromString(t,"application/xml")}function ct(t,e){return function(r,n){const i=t.call(e!==void 0?e:this,r,n);i!==void 0&&n[n.length-1].push(i)}}function X(t,e,r){return function(n,i){const o=t.call(r!==void 0?r:this,n,i);if(o!==void 0){const a=i[i.length-1],s=e!==void 0?e:n.localName;let l;s in a?l=a[s]:(l=[],a[s]=l),l.push(o)}}}function p(t,e,r){return function(n,i){const o=t.call(r!==void 0?r:this,n,i);if(o!==void 0){const a=i[i.length-1],s=e!==void 0?e:n.localName;a[s]=o}}}function T(t,e,r){r=r!==void 0?r:{};let n,i;for(n=0,i=t.length;n<i;++n)r[t[n]]=e;return r}function Co(t,e,r,n){let i;for(i=e.firstElementChild;i;i=i.nextElementSibling){const o=t[i.namespaceURI];if(o!==void 0){const a=o[i.localName];a!==void 0&&a.call(n,i,r)}}}function A(t,e,r,n,i){return n.push(t),Co(e,r,n,i),n.pop()}class Or{read(e){if(!e)return null;if(typeof e=="string"){const r=Fo(e);return this.readFromDocument(r)}return Mo(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let r=e.firstChild;r;r=r.nextSibling)if(r.nodeType==Node.ELEMENT_NODE)return this.readFromNode(r);return null}readFromNode(e){Oo()}}const No="http://www.w3.org/1999/xlink";function xt(t){return t.getAttributeNS(No,"href")}function $o(t){const e=Tt(t,!1);return Do(e)}function Do(t){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);if(e)return parseFloat(e[1])}function K(t){const e=Tt(t,!1);return Lo(e)}function Lo(t){const e=/^\s*(\d+)\s*$/.exec(t);if(e)return parseInt(e[1],10)}function E(t){return Tt(t,!1).trim()}const G=[null,"http://www.opengis.net/ows/1.1"],Go=T(G,{ServiceIdentification:p(ua),ServiceProvider:p(ca),OperationsMetadata:p(la)});class Uo extends Or{constructor(){super()}readFromNode(e){const r=A({},Go,e,[]);return r||null}}const Xo=T(G,{DeliveryPoint:p(E),City:p(E),AdministrativeArea:p(E),PostalCode:p(E),Country:p(E),ElectronicMailAddress:p(E)}),Wo=T(G,{Value:X(pa)}),Bo=T(G,{AllowedValues:p(ea)}),Yo=T(G,{Phone:p(sa),Address:p(Ko)}),zo=T(G,{HTTP:p(oa)}),Vo=T(G,{Get:X(ia),Post:void 0}),Ho=T(G,{DCP:p(na)}),ko=T(G,{Operation:aa}),qo=T(G,{Voice:p(E),Facsimile:p(E)}),Zo=T(G,{Constraint:X(ta)}),jo=T(G,{IndividualName:p(E),PositionName:p(E),ContactInfo:p(ra)}),Qo=T(G,{Abstract:p(E),AccessConstraints:p(E),Fees:p(E),Title:p(E),ServiceTypeVersion:p(E),ServiceType:p(E)}),Jo=T(G,{ProviderName:p(E),ProviderSite:p(xt),ServiceContact:p(fa)});function Ko(t,e){return A({},Xo,t,e)}function ea(t,e){return A({},Wo,t,e)}function ta(t,e){const r=t.getAttribute("name");if(r)return A({name:r},Bo,t,e)}function ra(t,e){return A({},Yo,t,e)}function na(t,e){return A({},zo,t,e)}function ia(t,e){const r=xt(t);if(r)return A({href:r},Zo,t,e)}function oa(t,e){return A({},Vo,t,e)}function aa(t,e){const r=t.getAttribute("name"),n=A({},Ho,t,e);if(!n)return;const i=e[e.length-1];i[r]=n}function la(t,e){return A({},ko,t,e)}function sa(t,e){return A({},qo,t,e)}function ua(t,e){return A({},Qo,t,e)}function fa(t,e){return A({},jo,t,e)}function ca(t,e){return A({},Jo,t,e)}function pa(t,e){return E(t)}const N={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function ya(t){const e=_r();for(let r=0,n=t.length;r<n;++r)ma(e,t[r]);return e}function da(t,e,r){const n=Math.min.apply(null,t),i=Math.min.apply(null,e),o=Math.max.apply(null,t),a=Math.max.apply(null,e);return bt(n,i,o,a,r)}function Rr(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function er(t,e){const r=t[0],n=t[1],i=t[2],o=t[3],a=e[0],s=e[1];let l=N.UNKNOWN;return a<r?l=l|N.LEFT:a>i&&(l=l|N.RIGHT),s<n?l=l|N.BELOW:s>o&&(l=l|N.ABOVE),l===N.UNKNOWN&&(l=N.INTERSECTING),l}function _r(){return[1/0,1/0,-1/0,-1/0]}function bt(t,e,r,n,i){return i?(i[0]=t,i[1]=e,i[2]=r,i[3]=n,i):[t,e,r,n]}function ha(t){return bt(1/0,1/0,-1/0,-1/0,t)}function ma(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function ga(t,e,r,n,i){for(;r<n;r+=i)va(t,e[r],e[r+1]);return t}function va(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)}function Sa(t){return[t[0],t[3]]}function Ea(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Ta(t){return t[2]<t[0]||t[3]<t[1]}function xa(t,e,r){let n=!1;const i=er(t,e),o=er(t,r);if(i===N.INTERSECTING||o===N.INTERSECTING)n=!0;else{const a=t[0],s=t[1],l=t[2],u=t[3],f=e[0],y=e[1],c=r[0],d=r[1],g=(d-y)/(c-f);let S,b;o&N.ABOVE&&!(i&N.ABOVE)&&(S=c-(d-u)/g,n=S>=a&&S<=l),!n&&o&N.RIGHT&&!(i&N.RIGHT)&&(b=d-(c-l)*g,n=b>=s&&b<=u),!n&&o&N.BELOW&&!(i&N.BELOW)&&(S=c-(d-s)/g,n=S>=a&&S<=l),!n&&o&N.LEFT&&!(i&N.LEFT)&&(b=d-(c-a)*g,n=b>=s&&b<=u)}return n}function ba(t,e,r,n){if(Ta(t))return ha(r);let i=[];if(n>1){const s=t[2]-t[0],l=t[3]-t[1];for(let u=0;u<n;++u)i.push(t[0]+s*u/n,t[1],t[2],t[1]+l*u/n,t[2]-s*u/n,t[3],t[0],t[3]-l*u/n)}else i=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(i,i,2);const o=[],a=[];for(let s=0,l=i.length;s<l;s+=2)o.push(i[s]),a.push(i[s+1]);return da(o,a,r)}const H=[null,"http://www.opengis.net/wmts/1.0"],Se=[null,"http://www.opengis.net/ows/1.1"],Pa=T(H,{Contents:p(Da)});class Aa extends Or{constructor(){super(),this.owsParser_=new Uo}readFromNode(e){let r=e.getAttribute("version");r&&(r=r.trim());let n=this.owsParser_.readFromNode(e);return n?(n.version=r,n=A(n,Pa,e,[]),n||null):null}}const wa=T(H,{Layer:X(La),TileMatrixSet:X(Ga)}),Oa=T(H,{Style:X(Ua),Format:X(E),TileMatrixSetLink:X(Xa),Dimension:X(Wa),ResourceURL:X(Ba)},T(Se,{Title:p(E),Abstract:p(E),WGS84BoundingBox:p(Ir),Identifier:p(E)})),Ra=T(H,{LegendURL:X(Ya)},T(Se,{Title:p(E),Identifier:p(E)})),_a=T(H,{TileMatrixSet:p(E),TileMatrixSetLimits:p(Va)}),Ia=T(H,{TileMatrixLimits:ct(Ha)}),Ma=T(H,{TileMatrix:p(E),MinTileRow:p(K),MaxTileRow:p(K),MinTileCol:p(K),MaxTileCol:p(K)}),Fa=T(H,{Default:p(E),Value:X(E)},T(Se,{Identifier:p(E)})),Ca=T(Se,{LowerCorner:ct(pt),UpperCorner:ct(pt)}),Na=T(H,{WellKnownScaleSet:p(E),TileMatrix:X(za)},T(Se,{SupportedCRS:p(E),Identifier:p(E),BoundingBox:p(Ir)})),$a=T(H,{TopLeftCorner:p(pt),ScaleDenominator:p($o),TileWidth:p(K),TileHeight:p(K),MatrixWidth:p(K),MatrixHeight:p(K)},T(Se,{Identifier:p(E)}));function Da(t,e){return A({},wa,t,e)}function La(t,e){return A({},Oa,t,e)}function Ga(t,e){return A({},Na,t,e)}function Ua(t,e){const r=A({},Ra,t,e);if(!r)return;const n=t.getAttribute("isDefault")==="true";return r.isDefault=n,r}function Xa(t,e){return A({},_a,t,e)}function Wa(t,e){return A({},Fa,t,e)}function Ba(t,e){const r=t.getAttribute("format"),n=t.getAttribute("template"),i=t.getAttribute("resourceType"),o={};return r&&(o.format=r),n&&(o.template=n),i&&(o.resourceType=i),o}function Ir(t,e){const r=A([],Ca,t,e);if(r.length==2)return ya(r)}function Ya(t,e){const r={};return r.format=t.getAttribute("format"),r.href=xt(t),r}function pt(t,e){const r=E(t).split(/\s+/);if(!r||r.length!=2)return;const n=+r[0],i=+r[1];if(!(isNaN(n)||isNaN(i)))return[n,i]}function za(t,e){return A({},$a,t,e)}function Va(t,e){return A([],Ia,t,e)}function Ha(t,e){return A({},Ma,t,e)}const ka=Aa,qa={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Mr{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||qa[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Re=6378137,ce=Math.PI*Re,Za=[-ce,-ce,ce,ce],ja=[-180,-85,180,85],Fe=Re*Math.log(Math.tan(Math.PI/2));class le extends Mr{constructor(e){super({code:e,units:"m",extent:Za,global:!0,worldExtent:ja,getPointResolution:function(r,n){return r/Math.cosh(n[1]/Re)}})}}const tr=[new le("EPSG:3857"),new le("EPSG:102100"),new le("EPSG:102113"),new le("EPSG:900913"),new le("http://www.opengis.net/def/crs/EPSG/0/3857"),new le("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Qa(t,e,r){const n=t.length;r=r>1?r:2,e===void 0&&(r>2?e=t.slice():e=new Array(n));for(let i=0;i<n;i+=r){e[i]=ce*t[i]/180;let o=Re*Math.log(Math.tan(Math.PI*(+t[i+1]+90)/360));o>Fe?o=Fe:o<-Fe&&(o=-Fe),e[i+1]=o}return e}function Ja(t,e,r){const n=t.length;r=r>1?r:2,e===void 0&&(r>2?e=t.slice():e=new Array(n));for(let i=0;i<n;i+=r)e[i]=180*t[i]/ce,e[i+1]=360*Math.atan(Math.exp(t[i+1]/Re))/Math.PI-90;return e}const Ka=6378137,rr=[-180,-90,180,90],el=Math.PI*Ka/180;class te extends Mr{constructor(e,r){super({code:e,units:"degrees",extent:rr,axisOrientation:r,global:!0,metersPerUnit:el,worldExtent:rr})}}const nr=[new te("CRS:84"),new te("EPSG:4326","neu"),new te("urn:ogc:def:crs:OGC:1.3:CRS84"),new te("urn:ogc:def:crs:OGC:2:84"),new te("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new te("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new te("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let yt={};function tl(t){return yt[t]||yt[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function rl(t,e){yt[t]=e}let ye={};function Be(t,e,r){const n=t.getCode(),i=e.getCode();n in ye||(ye[n]={}),ye[n][i]=r}function nl(t,e){let r;return t in ye&&e in ye[t]&&(r=ye[t][e]),r}function il(t,e,r){return Math.min(Math.max(t,e),r)}function Fr(t,e){const r=Math.pow(10,e);return Math.round(t*r)/r}function Ce(t,e){return Math.floor(Fr(t,e))}function Ne(t,e){return Math.ceil(Fr(t,e))}function Pt(t,e){if(e!==void 0){for(let r=0,n=t.length;r<n;++r)e[r]=t[r];e=e}else e=t.slice();return e}function ol(t,e){if(e!==void 0&&t!==e){for(let r=0,n=t.length;r<n;++r)e[r]=t[r];t=e}return t}function al(t){rl(t.getCode(),t),Be(t,t,Pt)}function ll(t){t.forEach(al)}function Q(t){return typeof t=="string"?tl(t):t||null}function ir(t){ll(t),t.forEach(function(e){t.forEach(function(r){e!==r&&Be(e,r,Pt)})})}function sl(t,e,r,n){t.forEach(function(i){e.forEach(function(o){Be(i,o,r),Be(o,i,n)})})}function or(t,e){if(t===e)return!0;const r=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||Cr(t,e)===Pt)&&r}function Cr(t,e){const r=t.getCode(),n=e.getCode();let i=nl(r,n);return i||(i=ol),i}function ul(t,e){const r=Q(t),n=Q(e);return Cr(r,n)}function fl(t,e,r,n){const i=ul(e,r);return ba(t,i,void 0,n)}function cl(){ir(tr),ir(nr),sl(nr,tr,Qa,Ja)}cl();function xe(t,e){if(!t)throw new Error(e)}function ar(t,e,r,n){return n!==void 0?(n[0]=t,n[1]=e,n[2]=r,n):[t,e,r]}class Nr{constructor(e,r,n,i){this.minX=e,this.maxX=r,this.minY=n,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,r){return this.minX<=e&&e<=this.maxX&&this.minY<=r&&r<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function se(t,e,r,n,i){return i!==void 0?(i.minX=t,i.maxX=e,i.minY=r,i.maxY=n,i):new Nr(t,e,r,n)}const pl=256;function yl(t,e,r,n,i){let o;for(e+=n;e<r;e+=n)if(o=i(t.slice(e-n,e),t.slice(e,e+n)),o)return o;return!1}function $e(t,e,r,n,i,o){let a=0,s=t[r-n],l=t[r-n+1];for(;e<r;e+=n){const u=t[e],f=t[e+1];l<=o?f>o&&(u-s)*(o-l)-(i-s)*(f-l)>0&&a++:f<=o&&(u-s)*(o-l)-(i-s)*(f-l)<0&&a--,s=u,l=f}return a!==0}function dl(t,e,r,n,i){const o=ga(_r(),t,e,r,n);return Ea(i,o)?Rr(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]?!0:yl(t,e,r,n,function(a,s){return xa(i,a,s)}):!1}function hl(t,e,r,n,i){return!!(dl(t,e,r,n,i)||$e(t,e,r,n,i[0],i[1])||$e(t,e,r,n,i[0],i[3])||$e(t,e,r,n,i[2],i[1])||$e(t,e,r,n,i[2],i[3]))}function De(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}const ue=[0,0,0],Z=5;class ml{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,xe(Io(this.resolutions_,(i,o)=>o-i,!0),"`resolutions` must be sorted in descending order");let r;if(!e.origins){for(let i=0,o=this.resolutions_.length-1;i<o;++i)if(!r)r=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==r){r=void 0;break}}this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,xe(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Sa(n)),xe(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,xe(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:pl,xe(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,o)=>{const a=new Nr(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(n){const s=this.getTileRangeForExtentAndZ(n,o);a.minX=Math.max(s.minX,a.minX),a.maxX=Math.min(s.maxX,a.maxX),a.minY=Math.max(s.minY,a.minY),a.maxY=Math.min(s.maxY,a.maxY)}return a}):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,r,n){const i=this.getTileRangeForExtentAndZ(e,r);for(let o=i.minX,a=i.maxX;o<=a;++o)for(let s=i.minY,l=i.maxY;s<=l;++s)n([r,o,s])}forEachTileCoordParentTileRange(e,r,n,i){let o,a,s,l=null,u=e[0]-1;for(this.zoomFactor_===2?(a=e[1],s=e[2]):l=this.getTileCoordExtent(e,i);u>=this.minZoom;){if(a!==void 0&&s!==void 0?(a=Math.floor(a/2),s=Math.floor(s/2),o=se(a,a,s,s,n)):o=this.getTileRangeForExtentAndZ(l,u,n),r(u,o))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,r,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const o=e[1]*2,a=e[2]*2;return se(o,o+1,a,a+1,r)}const i=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,r)}return null}getTileRangeForTileCoordAndZ(e,r,n){if(r>this.maxZoom||r<this.minZoom)return null;const i=e[0],o=e[1],a=e[2];if(r===i)return se(o,a,o,a,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,r-i),u=Math.floor(o*l),f=Math.floor(a*l);if(r<i)return se(u,u,f,f,n);const y=Math.floor(l*(o+1))-1,c=Math.floor(l*(a+1))-1;return se(u,y,f,c,n)}const s=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,r,n)}getTileRangeForExtentAndZ(e,r,n){this.getTileCoordForXYAndZ_(e[0],e[3],r,!1,ue);const i=ue[1],o=ue[2];this.getTileCoordForXYAndZ_(e[2],e[1],r,!0,ue);const a=ue[1],s=ue[2];return se(i,a,o,s,n)}getTileCoordCenter(e){const r=this.getOrigin(e[0]),n=this.getResolution(e[0]),i=De(this.getTileSize(e[0]),this.tmpSize_);return[r[0]+(e[1]+.5)*i[0]*n,r[1]-(e[2]+.5)*i[1]*n]}getTileCoordExtent(e,r){const n=this.getOrigin(e[0]),i=this.getResolution(e[0]),o=De(this.getTileSize(e[0]),this.tmpSize_),a=n[0]+e[1]*o[0]*i,s=n[1]-(e[2]+1)*o[1]*i,l=a+o[0]*i,u=s+o[1]*i;return bt(a,s,l,u,r)}getTileCoordForCoordAndResolution(e,r,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],r,!1,n)}getTileCoordForXYAndResolution_(e,r,n,i,o){const a=this.getZForResolution(n),s=n/this.getResolution(a),l=this.getOrigin(a),u=De(this.getTileSize(a),this.tmpSize_);let f=s*(e-l[0])/n/u[0],y=s*(l[1]-r)/n/u[1];return i?(f=Ne(f,Z)-1,y=Ne(y,Z)-1):(f=Ce(f,Z),y=Ce(y,Z)),ar(a,f,y,o)}getTileCoordForXYAndZ_(e,r,n,i,o){const a=this.getOrigin(n),s=this.getResolution(n),l=De(this.getTileSize(n),this.tmpSize_);let u=(e-a[0])/s/l[0],f=(a[1]-r)/s/l[1];return i?(u=Ne(u,Z)-1,f=Ne(f,Z)-1):(u=Ce(u,Z),f=Ce(f,Z)),ar(n,u,f,o)}getTileCoordForCoordAndZ(e,r,n){return this.getTileCoordForXYAndZ_(e[0],e[1],r,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,r){const n=_o(this.resolutions_,e,r||0);return il(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,r){return hl(r,0,r.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const r=this.resolutions_.length,n=new Array(r);for(let i=this.minZoom;i<r;++i)n[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=n}}class gl extends ml{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function vl(t,e,r){const n=[],i=[],o=[],a=[],s=[];r=r!==void 0?r:[];const l="SupportedCRS",u="TileMatrix",f="Identifier",y="ScaleDenominator",c="TopLeftCorner",d="TileWidth",g="TileHeight",S=t[l],b=Q(S),m=b.getMetersPerUnit(),O=b.getAxisOrientation().substr(0,2)=="ne";return t[u].sort(function(P,I){return I[y]-P[y]}),t[u].forEach(function(P){let I;if(r.length>0?I=r.find(function(U){return P[f]==U[u]?!0:P[f].includes(":")?!1:t[f]+":"+P[f]===U[u]}):I=!0,I){i.push(P[f]);const U=P[y]*28e-5/m,W=P[d],w=P[g];O?o.push([P[c][1],P[c][0]]):o.push(P[c]),n.push(U),a.push(W==w?W:[W,w]),s.push([P.MatrixWidth,P.MatrixHeight])}}),new gl({extent:e,origins:o,resolutions:n,matrixIds:i,tileSizes:a,sizes:s})}function Sl(t,e){const n=t.Contents.Layer.find(function(h){return h.Identifier==e.layer});if(!n)return null;const i=t.Contents.TileMatrixSet;let o;n.TileMatrixSetLink.length>1?"projection"in e?o=n.TileMatrixSetLink.findIndex(function(h){const F=i.find(function(Ee){return Ee.Identifier==h.TileMatrixSet}).SupportedCRS,D=Q(F),L=Q(e.projection);return D&&L?or(D,L):F==e.projection}):o=n.TileMatrixSetLink.findIndex(function(h){return h.TileMatrixSet==e.matrixSet}):o=0,o<0&&(o=0);const a=n.TileMatrixSetLink[o].TileMatrixSet,s=n.TileMatrixSetLink[o].TileMatrixSetLimits;let l=n.Format[0];"format"in e&&(l=e.format),o=n.Style.findIndex(function(h){return"style"in e?h.Title==e.style:h.isDefault}),o<0&&(o=0);const u=n.Style[o].Identifier,f={};"Dimension"in n&&n.Dimension.forEach(function(h,x,F){const D=h.Identifier;let L=h.Default;L===void 0&&(L=h.Value[0]),f[D]=L});const c=t.Contents.TileMatrixSet.find(function(h){return h.Identifier==a});let d;const g=c.SupportedCRS;if(g&&(d=Q(g)),"projection"in e){const h=Q(e.projection);h&&(!d||or(h,d))&&(d=h)}let S=!1;const b=d.getAxisOrientation().substr(0,2)=="ne";let m=c.TileMatrix[0],O={MinTileCol:0,MinTileRow:0,MaxTileCol:m.MatrixWidth-1,MaxTileRow:m.MatrixHeight-1};if(s){O=s[s.length-1];const h=c.TileMatrix.find(x=>x.Identifier===O.TileMatrix||c.Identifier+":"+x.Identifier===O.TileMatrix);h&&(m=h)}const P=m.ScaleDenominator*28e-5/d.getMetersPerUnit(),I=b?[m.TopLeftCorner[1],m.TopLeftCorner[0]]:m.TopLeftCorner,U=m.TileWidth*P,W=m.TileHeight*P;let w=c.BoundingBox;w&&b&&(w=[w[1],w[0],w[3],w[2]]);let k=[I[0]+U*O.MinTileCol,I[1]-W*(1+O.MaxTileRow),I[0]+U*(1+O.MaxTileCol),I[1]-W*O.MinTileRow];if(w!==void 0&&!Rr(w,k)){const h=n.WGS84BoundingBox,x=Q("EPSG:4326").getExtent();if(k=w,h)S=h[0]===x[0]&&h[2]===x[2];else{const F=fl(w,c.SupportedCRS,"EPSG:4326");S=F[0]-1e-10<=x[0]&&F[2]+1e-10>=x[2]}}const Y=vl(c,k,s),B=[];let M=e.requestEncoding;if(M=M!==void 0?M:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata){const h=t.OperationsMetadata.GetTile.DCP.HTTP.Get;for(let x=0,F=h.length;x<F;++x)if(h[x].Constraint){const L=h[x].Constraint.find(function(Ee){return Ee.name=="GetEncoding"}).AllowedValues.Value;if(M===""&&(M=L[0]),M==="KVP")L.includes("KVP")&&B.push(h[x].href);else break}else h[x].href&&(M="KVP",B.push(h[x].href))}return B.length===0&&(M="REST",n.ResourceURL.forEach(function(h){h.resourceType==="tile"&&(l=h.format,B.push(h.template))})),{urls:B,layer:e.layer,matrixSet:a,format:l,projection:d,requestEncoding:M,tileGrid:Y,style:u,dimensions:f,wrapX:S,crossOrigin:e.crossOrigin}}const El=new ka,Tl=Ur({name:"VaGeoserverVectorTileLayer",components:{VaVectorTileLayer:en},props:nn,emits:on,setup(t){const e=Xr({}),r=Wr(!0);t.optionsFromCapabilities&&(r.value=!1,s().then(async()=>{await wt(),r.value=!0}),Ot(()=>[t.url,t.layerId,t.tileMatrixSetId],s));const{interceptorToggle:n}=Kr({urls:[new RegExp(`${t.url}.*FORMAT=application%2Fvnd.mapbox-vector-tile`)],before:l=>{const u=wo.parse(l.url),f=l.requestOptions;f.query||(f.query={});const y=f.query;y.TILEMATRIX=`${u.TILEMATRIXSET}:${u.TILEMATRIX}`;for(const c in t.customParameters)y[c]=t.customParameters[c]}});n.add();const i=ze(()=>{const l=t.tileInfo||e.tileInfo;if(!l)return"";const u=t.fullExtent||e.extent,f=_t(t,l,u);return URL.createObjectURL(new Blob([JSON.stringify(f)],{type:"application/json"}))}),o=ze(()=>{const l={type:"vector"};return i.value?l.url=i.value:l.tiles=_t(t).tiles,l}),a=ze(()=>({version:8,sources:{esri:o.value},layers:[{id:"main",type:"fill","source-layer":t.layerId.split(":")[1],source:"esri",paint:{"fill-color":"#088","fill-outline-color":"green"},...t.defaultLayerOptions}]}));Ot(()=>a.value,async()=>{r.value=!1,await wt(),r.value=!0});async function s(){return Br(t.url,{responseType:"text",query:{SERVICE:"WMTS",REQUEST:"GetCapabilities",...t.customParameters}}).then(l=>{const u=El.read(l.data);return[Sl(u,{layer:t.layerId,matrixSet:t.tileMatrixSetId}),u]}).then(([l,u])=>{if(!l)return console.warn(`No capabilities found for layer ${t.layerId} in ${t.url}`);const f=l.tileGrid.getExtent(),y=u.Contents.TileMatrixSet.find(S=>S.Identifier===t.tileMatrixSetId);if(!y)return console.warn(`No tileMatrixSet found for layer ${t.layerId} in ${t.url}`);const c=y.SupportedCRS.split(":").pop(),d=y.TileMatrix,g=new Yr({lods:d.map((S,b)=>({level:b,resolution:l.tileGrid.getResolution(b),scale:S.ScaleDenominator,rows:S.MatrixHeight,cols:S.MatrixWidth,origin:l.tileGrid.getOrigin(b)})),size:[l.tileGrid.getTileSize(0),l.tileGrid.getTileSize(1)],spatialReference:{wkid:c}});e.extent=new zr({xmin:f[0],ymin:f[1],xmax:f[2],ymax:f[3],spatialReference:{wkid:c}}),e.tileInfo=g})}return{layerStyle:a,ready:r}}});function xl(t,e,r,n,i,o){const a=Hr("VaVectorTileLayer");return t.ready?(kr(),qr(a,{key:0,style:Qr(t.layerStyle),"custom-parameters":t.customParameters},{default:Zr(()=>[jr(t.$slots,"default")]),_:3},8,["style","custom-parameters"])):Jr("",!0)}const rt=Vr(Tl,[["render",xl]]);rt.install=t=>{t.component(rt.name,rt)};export{rt as V};
