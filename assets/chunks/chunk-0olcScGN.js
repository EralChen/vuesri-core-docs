import{gY as P,b$ as C,a4 as T,C as h,h2 as y,lO as A,lQ as B,gZ as M,lv as N,h8 as V,h0 as G,h9 as z,h6 as f,h4 as b,h5 as k,hb as O}from"./chunk-xMPjLCrx.js";import{u as _}from"./chunk-J9RASU-T.js";import"./chunk-5tsSCYgh.js";import"./chunk-i_6XDy5U.js";import"./chunk-0_GtP_p4.js";import"./chunk-2fXqQPVR.js";import"./chunk-9KZWtd42.js";import"./chunk-JLhCycX3.js";import"./chunk-NfHojIUH.js";import"./chunk-V11zOVoy.js";import"./chunk-solU3qLG.js";import"./chunk-aWq6ArXi.js";import"./chunk-zMsd7moL.js";import"./chunk-QGZQfL-6.js";import"./chunk-bVSt-vq9.js";import"./chunk-w3qa_8IS.js";import"./chunk-KVNnRaiv.js";import"./chunk-HOjhYsx3.js";import"./chunk-Kk-FsYOI.js";import"./chunk-mQiHYxNr.js";import"./chunk-Vp0MFqt1.js";import"./chunk-xRfHx62q.js";import"./chunk-XFUWsSlJ.js";import"./chunk-3YEdJcEN.js";import"./chunk-1SEN342O.js";import"./chunk-FaStYSus.js";import"./chunk-ZZVIt58t.js";import"./chunk-E-RLbiwB.js";import"./chunk-raaMsR-G.js";import"./chunk-qxoGV1yl.js";import"./chunk-Bd5xscMd.js";import"./chunk-rerlXJLz.js";import"./chunk-LE__wJ9I.js";import"./chunk-g6Mu5kDo.js";import"./chunk-um3EVGjc.js";import"./chunk-bavg-2oE.js";import"./chunk-HLnvRq1G.js";import"./chunk-soETSAjW.js";import"./chunk-dR-Xmx-w.js";const $=(e="crosshair")=>{const r=_();class c extends P{constructor(){super(...arguments),this.cursor=e}add(){r.container.style.cursor=this.cursor,this.removeHandler=()=>{r.container.style.removeProperty("cursor")}}}const i=new c;return{viewCursorAdd:()=>{i.add()},viewCursorRemove:()=>{i.remove()}}};var S=(e=>(e.CENTER="center",e.RADIUS="radius",e))(S||{});const j=(e,r)=>{const c=r?.floatingPointSymbol||new C({color:[255,0,0],size:8,outline:{color:[255,255,255],width:1}}),i=r?.centerControlPointSymbol||new C({color:[255,0,0],size:8,outline:{color:[255,255,255],width:1}}),l=r?.previewSymbol||new T({color:[0,0,0,.5],style:"solid",outline:{color:[0,0,0],width:1,style:"dash"}}),o=_(),{viewCursorAdd:v,viewCursorRemove:p}=$("crosshair"),d=new B,u=new h({symbol:c}),n=new h({symbol:i,attributes:{type:S.CENTER}}),s=new h({symbol:l});function x(){if(!y(e)){console.error("layerRef is not defined");return}v();const t=o.on("pointer-move",R);d.add(t);const a=o.on("click",E);d.add(a);const m=o.on("double-click",g=>{g.stopPropagation(),w()});d.add(m)}function E(t){if(!o.graphics.includes(n)){const{x:a,y:m}=t,g=o.toMap({x:a,y:m});n.geometry=g,o.graphics.add(n),o.graphics.add(s)}}function R(t){const{x:a,y:m}=t;if(u.geometry=o.toMap({x:a,y:m}),o.graphics.add(u),o.graphics.includes(s)){const H=n.geometry.distance(u.geometry);s.geometry=new A({center:n.geometry,radius:H})}}function w(){if(p(),d.removeAll(),o.graphics.remove(u),o.graphics.remove(n),!o.graphics.includes(s))return;const t=new h({geometry:s.geometry,symbol:r?.symbol});return y(e)?.add(t),o.graphics.remove(s),t}return{start:x,complete:w}},Ro=M({__name:"create",props:{layer:{type:Object,default:void 0}},setup(e){const r=e,c=N(()=>r.layer),{start:i,complete:l}=j(c);return(o,v)=>{const p=V("ElButton");return G(),z(O,null,[f(p,{onClick:y(i)},{default:b(()=>[k(" Start ")]),_:1},8,["onClick"]),f(p,{onClick:y(l)},{default:b(()=>[k(" Complete ")]),_:1},8,["onClick"])],64)}}});export{Ro as _};
