import{V as y,s as _}from"./chunk-y6ytdDAi.js";import{gT as V,gZ as h,U as w,C as T,gX as b,lF as F,hc as v,h3 as f,lu as L,h0 as $,h1 as g,h4 as n,h2 as e,h6 as s,hf as I,h5 as x}from"./chunk-xMPjLCrx.js";import"./chunk-WHST2ZjR.js";import{R as P}from"./chunk-YAzdkTjJ.js";import"./chunk-5tsSCYgh.js";import"./chunk-i_6XDy5U.js";import"./chunk-0_GtP_p4.js";import"./chunk-2fXqQPVR.js";import"./chunk-9KZWtd42.js";import"./chunk-JLhCycX3.js";import"./chunk-NfHojIUH.js";import"./chunk-V11zOVoy.js";import{V as S}from"./chunk-solU3qLG.js";import"./chunk-aWq6ArXi.js";import"./chunk-zMsd7moL.js";import"./chunk-QGZQfL-6.js";import"./chunk-bVSt-vq9.js";import{V as j}from"./chunk-w3qa_8IS.js";import"./chunk-KVNnRaiv.js";import"./chunk-HOjhYsx3.js";import"./chunk-Kk-FsYOI.js";import"./chunk-mQiHYxNr.js";import"./chunk-Vp0MFqt1.js";import"./chunk-xRfHx62q.js";import"./chunk-XFUWsSlJ.js";import{V as k}from"./chunk-3YEdJcEN.js";import"./chunk-1SEN342O.js";import"./chunk-FaStYSus.js";import"./chunk-ZZVIt58t.js";import"./chunk-E-RLbiwB.js";import"./chunk-raaMsR-G.js";import"./chunk-qxoGV1yl.js";import"./chunk-Bd5xscMd.js";import"./chunk-rerlXJLz.js";import"./chunk-LE__wJ9I.js";import"./chunk-g6Mu5kDo.js";import"./chunk-um3EVGjc.js";import"./chunk-bavg-2oE.js";import{V as R}from"./chunk-HLnvRq1G.js";import"./chunk-soETSAjW.js";import"./chunk-dR-Xmx-w.js";import{u as U}from"./chunk-14EaSuFZ.js";import"./chunk-Qgrzwe6s.js";import"./chunk-xWC1_lmp.js";import"./chunk-J9RASU-T.js";import"./chunk-B3AFDltd.js";import"./chunk-rQi2mmfE.js";import"./chunk-tmZ5iYy4.js";import"./chunk-gzqjvZQi.js";import"./chunk-X6bIPsmo.js";import"./chunk-cBu6LOLZ.js";import"./chunk-esItw7VO.js";import"./chunk-0qOLKVtw.js";import"./chunk-tAXmGf4E.js";import"./chunk-wDLU_hcC.js";import"./chunk-1QMMptYd.js";import"./chunk-9vCejg7V.js";import"./chunk-FqhRJRvF.js";import"./chunk-QAEz0L2u.js";import"./chunk-QHcv4ANa.js";import"./chunk-LvfigmnP.js";function B(){const t=V("vaPopupTemplate");if(!t)throw new Error("The component which use usePopupTemplate() must be in a PopupTemplate component");return t}const d="http://t1.zjsophon.com:10000/geoserver",E=new P({baseURL:d,setRequestInit(t){return t.headers,t}}),O=t=>E.request(t),W=()=>O({method:"GET",url:"/rest/layers.json"}).then(t=>t.layers.layer),C={defaultOptions:{type:Object,default:()=>({})}},D={load:t=>t},N=h({name:"VaWmsLayerPopupTemplate",props:C,emits:D,setup(){const t=U(),i=t.fetchFeatureInfoFunction,r=B();return t.fetchFeatureInfoFunction=async a=>{a.info_format="application/json",a.feature_count=5;const{data:p}=await w(t.featureInfoUrl,{query:a});return p.features.map(u=>new T({attributes:u.properties,popupTemplate:r}))},b(()=>{t.fetchFeatureInfoFunction=i}),{popupTemplate:r}}});function q(t,i,r,a,p,u){return v(t.$slots,"default")}const l=F(N,[["render",q]]);l.install=t=>{t.component(l.name,l)};const Kt=h({__name:"index",setup(t){const i=async m=>{const o=m.view;await m.layer.when(),o.goTo(m.layer.fullExtent)},r=f([]),a=f([{templateType:"VkfSelect",prop:"name",filterable:!0,options:r}]),p=L({name:"pub:O3_predict_20220301"});u();function u(){W().then(m=>{r.value=m.map(o=>({label:o.name,value:o.name}))})}return(m,o)=>($(),g(e(j),null,{before:n(()=>[s(e(y),{formItems:a.value,data:e(p),onSetData:o[0]||(o[0]=c=>e(_)(e(p),c))},null,8,["formItems","data"])]),default:n(()=>[s(e(S),{type:"vec_c",anno:!1,"spatial-reference":{wkid:4490}}),s(e(R),{url:e(d)+"/ows",onLoad:i,sublayers:[{name:e(p).name,queryable:!0,popupEnabled:!0}]},{default:n(()=>[s(e(k),{orphan:!0},{plugins:n(()=>[s(e(l))]),default:n(({attributes:c})=>[x(I(c),1)]),_:1})]),_:1},8,["url","sublayers"])]),_:1}))}});export{Kt as default};
