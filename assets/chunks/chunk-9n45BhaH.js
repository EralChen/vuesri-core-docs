import{V as y}from"./chunk-zPn7vAq8.js";import{V as h}from"./chunk-HbTg3DvT.js";import{_}from"./chunk-woU6z8Ei.js";import{u as V}from"./chunk-QlMQA5MY.js";import{gZ as c,he as w,lv as T,g_ as b,lE as v,h8 as g,h0 as u,h1 as d,h4 as f,hc as I,h7 as L,bR as R,h2 as s,h6 as m}from"./chunk-r79-UitW.js";import{V as S,s as k}from"./chunk-1Scc6I4K.js";import"./chunk-FXkWrVKJ.js";import{V as x}from"./chunk-CaitbKEY.js";import"./chunk-B3AFDltd.js";import"./chunk-Y0Vu1B5E.js";import"./chunk-ENCxAf3G.js";import"./chunk-c4b-Yaea.js";import"./chunk-GaQCtJAj.js";import"./chunk-VeTFGOxM.js";import"./chunk-X1l1T6Lo.js";import"./chunk-NxD5GeLy.js";import"./chunk-Qgrzwe6s.js";import"./chunk-lYyaG9p-.js";import"./chunk-1e5GIKf6.js";const $={url:{type:String,required:!0},format:{type:String,default:"png"},transparent:{type:Boolean,default:!0},tileInfo:{type:Object,default:void 0},spatialReference:{type:Object,default:void 0}},O={load:e=>e},C=c({name:"VaSupmapZxyTileImage",components:{VaWebTileLayer:_},props:$,emits:O,setup(e,{emit:t}){const n=V(),r=w(),p=n.map.basemap.baseLayers.getItemAt(0),o=T(()=>{const a=new URL(e.url);return a.pathname+=`.${e.format}`,a.searchParams.set("transparent",e.transparent+""),a.searchParams.set("z","{level}"),a.searchParams.set("x","{col}"),a.searchParams.set("y","{row}"),decodeURIComponent(a.toString())});return b(o,a=>{r.value?.set("urlTemplate",a),r.value?.refresh()}),{defaultOptions:{urlTemplate:o.value,tileInfo:e.tileInfo||p?.tileInfo,spatialReference:e.spatialReference||p?.spatialReference},layerLoad:a=>{r.value=a.layer,t("load",a)}}}});function B(e,t,n,r,p,o){const l=g("VaWebTileLayer");return u(),d(l,{"default-options":e.defaultOptions,onLoad:e.layerLoad},{default:f(()=>[I(e.$slots,"default")]),_:3},8,["default-options","onLoad"])}const i=v(C,[["render",B]]);i.install=e=>{e.component(i.name||"VaSupmapZxyTileImage",i)};const P="https://iserver.supermap.io/iserver/services/map-china400/rest/maps/China/zxyTileImage",ae=c({__name:"basic",setup(e){const t=L({url:P,transparent:!0,format:"png"}),n=[{templateType:"VkfInput",label:"url",prop:"url"},{templateType:"VkfSwitch",label:"transparent",prop:"transparent"},{templateType:"VkfInput",label:"format",prop:"format"}],r={center:new R({x:1213019755e-2,y:475975503e-2,spatialReference:{wkid:3857}}),zoom:16};return(p,o)=>(u(),d(s(y),{"default-options":r},{before:f(()=>[m(s(S),{"form-items":n,data:t,onSetData:o[0]||(o[0]=l=>s(k)(t,l))},null,8,["data"])]),default:f(()=>[m(s(h),{type:"img_w","spatial-reference":{wkid:3857},anno:!1}),m(s(i),{url:t.url,transparent:t.transparent,format:t.format,opacity:.8},null,8,["url","transparent","format"]),m(s(x),{type:"cta_w","spatial-reference":{wkid:3857}})]),_:1}))}});export{ae as default};
