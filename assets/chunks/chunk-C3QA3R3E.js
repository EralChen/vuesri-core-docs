import{a1 as s,a2 as i,a4 as g,s as v,eM as x,bI as E,as as $,aL as l}from"./chunk-CMhy9c9G.js";import{i as b}from"./chunk-DjDIt6nn.js";const N=m=>{let e=class extends m{constructor(){super(...arguments),this.view=null}get timeExtent(){return b(this.layer,this.view?.timeExtent,this._get("timeExtent"))}async fetchPopupFeaturesAtLocation(o,n){const{layer:r}=this;if(!o)throw new v("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:r});const{popupEnabled:c}=r,p=x(r,n);if(!c||p==null)return[];const y=await p.getRequiredFields();E(n);const t=new $;t.timeExtent=this.timeExtent,t.geometry=o,t.outFields=y,t.outSpatialReference=o.spatialReference;const{resolution:a,spatialReference:u}=this.view,h=this.view.type==="2d"?new l(a,a,u):new l(.5*a,.5*a,u),{returnTopmostRaster:w,showNoDataRecords:d}=p.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},R={returnDomainValues:!0,returnTopmostRaster:w,pixelSize:h,showNoDataRecords:d,signal:n?.signal};return r.queryVisibleRasters(t,R).then(f=>f)}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return s([i()],e.prototype,"layer",void 0),s([i()],e.prototype,"suspended",void 0),s([i({readOnly:!0})],e.prototype,"timeExtent",null),s([i()],e.prototype,"view",void 0),e=s([g("esri.views.layers.ImageryLayerView")],e),e};export{N as m};
