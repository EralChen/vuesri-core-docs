import{V as y,s as _}from"./chunk-UsAGatjR.js";import{gJ as V,gO as d,ck as g,E as w,gN as T,lE as b,h1 as v,gU as f,lu as F,gR as L,gS as I,gV as a,gW as n,gT as o,gX as $,h4 as x}from"./chunk-CMhy9c9G.js";import"./chunk-C5o2Zojc.js";import{R as P}from"./chunk-zKPkODU6.js";import"./chunk-BY_FN4O4.js";import"./chunk-Dx0NO5tE.js";import"./chunk-hcQCkdqJ.js";import"./chunk-BCEYKtyI.js";import"./chunk-DfjCgXDb.js";import"./chunk-DIHKnm4l.js";import"./chunk-TufeK50d.js";import"./chunk-Dck1UqdK.js";import{V as S}from"./chunk-B4Rwpdzs.js";import"./chunk-igt1gBeK.js";import"./chunk-Cj_Zd08g.js";import"./chunk-BG40D5IJ.js";import"./chunk-Dzc4VObD.js";import{V as k}from"./chunk-DjjaYBlz.js";import"./chunk-CM_lIypp.js";import"./chunk-CmV2Xkqf.js";import"./chunk-CbY12eax.js";import"./chunk-BcJWwafW.js";import"./chunk-ClYvIdCO.js";import"./chunk-QvQIJROn.js";import"./chunk-CdctZqhD.js";import{V as E}from"./chunk-DaHzAMiu.js";import"./chunk-C1aYhagP.js";import"./chunk-BU_CQVD8.js";import"./chunk-D_aEPSIR.js";import"./chunk-CAaD5fpi.js";import"./chunk-C0Px4IH5.js";import"./chunk-gN39URxt.js";import"./chunk-HNqUD5wH.js";import"./chunk-3xYMskso.js";import"./chunk-etnkt-xL.js";import"./chunk-oE2be0WM.js";import"./chunk-BnPJJ4xW.js";import"./chunk-DdA8NjGq.js";import{V as R}from"./chunk-scr1RBcv.js";import"./chunk-BVa6-kjc.js";import"./chunk-CIKSIPV2.js";import{u as j}from"./chunk-Bk8Hyb5O.js";import"./chunk-_SCJxduo.js";import"./chunk-ByM7454y.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./chunk-DobUN8tB.js";import"./chunk-Dc5RCiI0.js";import"./chunk-Ch0SDxT-.js";import"./chunk-DHvBO4SR.js";/* empty css              */import"./chunk-35-ZZMVr.js";import"./chunk-DAZPr-5t.js";import"./chunk-B-RuJrXv.js";import"./chunk-CNtoRp8i.js";import"./chunk-CLFhYyJ8.js";import"./chunk-CLwfGE1I.js";import"./chunk--OMOLJvv.js";import"./chunk-BqmX71u_.js";import"./chunk-2F9zfzHu.js";import"./chunk-PTUe1aNG.js";/* empty css              */import"./chunk-DZzPOt9C.js";/* empty css              *//* empty css              */import"./chunk-CNgyMX9t.js";import"./chunk-frOQcENt.js";import"./chunk-Ds9r7LkQ.js";import"./chunk-Dz7Zvk-S.js";function O(){const t=V("vaPopupTemplate");if(!t)throw new Error("The component which use usePopupTemplate() must be in a PopupTemplate component");return t}const h="http://t1.zjsophon.com:10000/geoserver",U=new P({baseURL:h,setRequestInit(t){return t.headers,t}}),W=t=>U.request(t),B=()=>W({method:"GET",url:"/rest/layers.json"}).then(t=>t.layers.layer),N={defaultOptions:{type:Object,default:()=>({})}},D={load:t=>t},q=d({name:"VaWmsLayerPopupTemplate",props:N,emits:D,setup(){const t=j(),s=t.fetchFeatureInfoFunction,e=O();return t.fetchFeatureInfoFunction=async p=>{p.info_format="application/json",p.feature_count=5;const{data:m}=await g(t.featureInfoUrl,{query:p});return m.features.map(u=>new w({attributes:u.properties,popupTemplate:e}))},T(()=>{t.fetchFeatureInfoFunction=s}),{popupTemplate:e}}});function C(t,s,e,p,m,u){return v(t.$slots,"default")}const l=b(q,[["render",C]]);l.install=t=>{t.component(l.name,l)};const Oo=d({__name:"index",setup(t){const s=async i=>{const r=i.view;await i.layer.when(),r.goTo(i.layer.fullExtent)},e=f([]),p=f([{templateType:"VkfSelect",prop:"name",filterable:!0,options:e}]),m=F({name:"pub:O3_predict_20220301"});u();function u(){B().then(i=>{e.value=i.map(r=>({label:r.name,value:r.name}))})}return(i,r)=>(L(),I(o(k),null,{before:a(()=>[n(o(y),{formItems:p.value,data:o(m),onSetData:r[0]||(r[0]=c=>o(_)(o(m),c))},null,8,["formItems","data"])]),default:a(()=>[n(o(S),{type:"vec_c",anno:!1,"spatial-reference":{wkid:4490}}),n(o(R),{url:o(h)+"/ows",onLoad:s,sublayers:[{name:o(m).name,queryable:!0,popupEnabled:!0}]},{default:a(()=>[n(o(E),{orphan:!0},{plugins:a(()=>[n(o(l))]),default:a(({attributes:c})=>[$(x(c),1)]),_:1})]),_:1},8,["url","sublayers"])]),_:1}))}});export{Oo as default};
