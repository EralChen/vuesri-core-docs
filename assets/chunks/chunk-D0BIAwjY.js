import{a1 as s,a2 as i,eo as g,a4 as x,s as c,eA as E,c0 as b,at as F,bd as m}from"./chunk-CGsGeN7j.js";const D=y=>{let e=class extends y{constructor(){super(...arguments),this.view=null}async fetchPopupFeaturesAtLocation(p,n){const{layer:a}=this;if(!p)throw new c("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:a});const{popupEnabled:u}=a,r=E(a,n);if(!u||r==null)throw new c("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:u,popupTemplate:r});const w=await r.getRequiredFields();b(n);const t=new F;t.timeExtent=this.timeExtent,t.geometry=p,t.outFields=w,t.outSpatialReference=p.spatialReference;const{resolution:o,spatialReference:l}=this.view,d=this.view.type==="2d"?new m(o,o,l):new m(.5*o,.5*o,l),{returnTopmostRaster:h,showNoDataRecords:R}=r.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},f={returnDomainValues:!0,returnTopmostRaster:h,pixelSize:d,showNoDataRecords:R,signal:n?.signal};return a.queryVisibleRasters(t,f).then(v=>v)}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return s([i()],e.prototype,"layer",void 0),s([i()],e.prototype,"suspended",void 0),s([i(g)],e.prototype,"timeExtent",void 0),s([i()],e.prototype,"view",void 0),e=s([x("esri.views.layers.ImageryLayerView")],e),e};export{D as u};
