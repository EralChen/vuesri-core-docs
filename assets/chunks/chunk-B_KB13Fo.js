import{u as p}from"./chunk-vPx4somd.js";import{e as l}from"./chunk-Ega-93jy.js";import"./chunk-ByM7454y.js";import"./chunk-CGsGeN7j.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */let e,i;async function T(s){if(await c(),s.inputs.length<1)return{result:{status:p.Failed,error:"",jobDescJson:"",data:new Uint8Array(0),missingInputUrls:[]},transferList:[]};const o={ptrs:[],sizes:[]};for(const t of s.inputs){const u=i._malloc(t.byteLength);new Uint8Array(i.HEAPU8.buffer,u,t.byteLength).set(new Uint8Array(t)),o.ptrs.push(u),o.sizes.push(t.byteLength)}const r=i.process(s.jobDescJson,o,s.isMissingResourceCase),m=r.status===p.Succeeded&&r.data,a=r.status===p.MissingInputs&&r.missingInputUrls.length>0;if(m){const t=r.data.slice();r.data=t}else a&&(r.jobDescJson=r.jobDescJson.slice(0),r.originalInputs=s.inputs);for(let t=0;t<o.ptrs.length;++t)i._free(o.ptrs[t]);const n=[];if(m)n.push(r.data.buffer);else if(a)for(const t of s.inputs)n.push(t);return{result:r,transferList:n}}function V(){i&&(i.uninitialize_lyr3d_worker_wasm(),i=null)}function c(){return i?Promise.resolve():(e||(e=l().then(s=>{i=s,i.initialize_lyr3d_worker_wasm(),e=null})),e)}export{V as destroyWasm,c as initialize,T as process};
