import{$ as l,j as n}from"./chunk-FBk98eTj.js";import{l as y,k as c,m as a,n as u}from"./chunk-YzRi88Dj.js";import"./chunk-ByM7454y.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */const m="Image Service",g="imagery-layer-save",v="imagery-layer-save-as",f="imagery-tile-layer-save",d="imagery-tile-layer-save-as";function o(t){if(t.type==="imagery")return{isValid:!0};const{raster:r}=t,e=r?.datasetFormat==="Function"?r.primaryRasters?.rasters[0]:r;return{isValid:e?.datasetFormat==="RasterTileServer"&&(e.tileType==="Raster"||e.tileType==="Map"),errorMessage:"imagery tile layer should be created from a tiled image service."}}function p(t){const r=t.layerJSON;return Promise.resolve(r&&Object.keys(r).length?r:null)}async function T(t,r){const{parsedUrl:e,title:i,fullExtent:s}=t;r.url=e.path,r.title||=i;try{r.extent=await y(s)}catch{r.extent=void 0}c(r,a.METADATA),t.type==="imagery-tile"&&u(r,a.TILED_IMAGERY)}async function rr(t,r){const e=t.type==="imagery"?g:f;return l({layer:t,itemType:m,validateLayer:o,createItemData:p,errorNamePrefix:e},r)}async function tr(t,r,e){const i=t.type==="imagery"?v:d;return n({layer:t,itemType:m,validateLayer:o,createItemData:p,errorNamePrefix:i,newItem:r,setItemProperties:T},e)}export{rr as save,tr as saveAs};
