import{p as d,u as p,a as y}from"./chunk-_oFyxSRx.js";import{gY as S,oQ as x,gT as l,ly as i,br as h,lD as _,hb as w}from"./chunk-nmd5K2Af.js";import{u as L}from"./chunk-SsoqVI4I.js";const $={...d,defaultOptions:{type:Object,default:()=>({})},url:{type:String,default:""},sublayers:{type:Array},customParameters:{type:Object,default:()=>({})}},O={load:t=>t},g=S({name:"VaWmsLayer",emits:O,props:$,setup(t,{emit:m}){const r=L(),f=r.map,e=new x({...t.defaultOptions});l(()=>{e.url=t.url}),l(()=>{e.customParameters=t.customParameters,e.refresh()}),l(()=>{t.sublayers&&(e.sublayers=t.sublayers,o())}),e.when(o),p(e,t),y(f,e,t),i("vaLayer",e),i("vaWmsLayer",e),m("load",{layer:e,view:r});function o(){if(t.sublayers?.length&&e.resourceInfo){const u=e.resourceInfo.layers.reduce((a,s)=>(a[s.name]=s,a),{});e.sublayers.forEach(a=>{let s=a.name;s.includes(":")&&(s=s.split(":")[1]);const n=u[s];n&&(a.title||(a.title=n.title),a.maxScale||(a.maxScale=n.maxScale),a.minScale||(a.minScale=n.minScale),a.fullExtent||(a.fullExtent=new h(n.extent)))})}}return{layer:e}}});function v(t,m,r,f,e,o){return w(t.$slots,"default")}const c=_(g,[["render",v]]);c.install=t=>{t.component(c.name,c)};export{c as V};
