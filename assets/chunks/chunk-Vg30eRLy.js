import{bn as v,a6 as B,E as d,g_ as V,h4 as u,lV as M,lv as N,g$ as A,lw as G,ha as T,h2 as z,hb as H,h7 as C,h6 as b,h8 as k,hd as P}from"./chunk-YzRi88Dj.js";import{u as U}from"./chunk-mQ0J7OJ8.js";import{u as $}from"./chunk-Bn0Cmn66.js";import"./chunk-DZ3w8ZOu.js";import"./chunk-BX1wMDvx.js";import"./chunk-DlgRifwZ.js";import"./chunk-MXvXirnR.js";import"./chunk-Clcwg9Qm.js";import"./chunk-CVnttSzt.js";import"./chunk-BlTBh7Wn.js";import"./chunk-DltoMSe1.js";import"./chunk-C9tqeO9j.js";import"./chunk-BkUj7kCJ.js";import"./chunk-lA_W8v3a.js";import"./chunk-CheEsZui.js";import"./chunk-CLQIQQkk.js";import"./chunk-CD3FIDfI.js";import"./chunk-DjXdGIkr.js";import"./chunk-BeMirVWN.js";import"./chunk-CtOsnhEP.js";import"./chunk-Dsi4UQrI.js";import"./chunk-D83kxBTm.js";import"./chunk-CMTIf1CS.js";import"./chunk-DhQzXLKM.js";import"./chunk-Dw_nTs4K.js";import"./chunk-FEB8T15a.js";import"./chunk-BRnY4uVr.js";import"./chunk--uKKWstj.js";import"./chunk-Bv-gq04m.js";import"./chunk-DNuFRK75.js";import"./chunk-BBWE_Ghm.js";import"./chunk-CpRg--ys.js";import"./chunk-CvEYJb1U.js";import"./chunk-CyteEnia.js";import"./chunk-DunbwQDX.js";import"./chunk-CFGc4D18.js";import"./chunk-CfNfXr3t.js";import"./chunk-B40jiAhY.js";import"./chunk-BwNtFsQb.js";import"./chunk-BVXbP2w4.js";var E=(t=>(t.CENTER="center",t.RADIUS="radius",t))(E||{});const j=(t,g)=>{const y=new v({color:[255,0,0],size:8,outline:{color:[255,255,255],width:1}}),h=new v({color:[255,0,0],size:8,outline:{color:[255,255,255],width:1}}),f=new B({color:[0,0,0,.5],style:"solid",outline:{color:[0,0,0],width:1,style:"dash"}}),o=U(),{viewCursorAdd:r,viewCursorRemove:m}=$("crosshair"),p=new N,a=new d({symbol:y}),i=new d({symbol:h,attributes:{type:E.CENTER}}),n=new d({symbol:f});function _(){if(!u(t)){console.error("layerRef is not defined");return}r();const e=o.on("pointer-move",R);p.add(e);const s=o.on("click",x);p.add(s);const c=o.on("double-click",l=>{l.stopPropagation(),w()});p.add(c)}function x(e){if(!o.graphics.includes(i)){const{x:s,y:c}=e,l=o.toMap({x:s,y:c});i.geometry=l,o.graphics.add(i),o.graphics.add(n)}}function R(e){const{x:s,y:c}=e;if(a.geometry=o.toMap({x:s,y:c}),o.graphics.add(a),o.graphics.includes(n)){const S=i.geometry.distance(a.geometry);n.geometry=new M({center:i.geometry,radius:S})}}function w(){if(m(),p.removeAll(),o.graphics.remove(a),o.graphics.remove(i),!o.graphics.includes(n))return;const e=new d({geometry:n.geometry,symbol:g?.symbol});return u(t)?.add(e),o.graphics.remove(n),e}return V(w),{start:_,complete:w}},Bo=A({__name:"create",props:{layer:{type:Object,default:void 0}},setup(t){const g=t,y=G(()=>g.layer),{start:h,complete:f}=j(y);return(o,r)=>{const m=T("ElButton");return z(),H(P,null,[C(m,{onClick:u(h)},{default:b(()=>r[0]||(r[0]=[k(" Start ")])),_:1},8,["onClick"]),C(m,{onClick:u(f)},{default:b(()=>r[1]||(r[1]=[k(" Complete ")])),_:1},8,["onClick"])],64)}}});export{Bo as _};
