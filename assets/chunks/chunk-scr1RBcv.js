import{p as x,u as y,a as w}from"./chunk-35-ZZMVr.js";import{gO as I,ra as h,gK as c,lz as u,aH as d,lE as E,h1 as _}from"./chunk-CMhy9c9G.js";import{u as $}from"./chunk-Dc5RCiI0.js";const L={...x,defaultOptions:{type:Object,default:()=>({})},url:{type:String,default:""},sublayers:{type:Array},customParameters:{type:Object,default:()=>({})}},O={load:a=>a},g=I({name:"VaWmsLayer",props:L,emits:O,setup(a,{emit:m}){const l=$(),i=l.map,t=new h({...a.defaultOptions});c(()=>{t.url=a.url}),c(()=>{t.customParameters=a.customParameters,t.refresh()}),c(()=>{a.sublayers&&(t.sublayers=a.sublayers,r())}),t.when(r),y(t,a),w(i,t,a),u("vaLayer",t),u("vaWmsLayer",t),m("load",{layer:t,view:l});function r(){if(console.log("setInfoToSublayer",t.resourceInfo),a.sublayers?.length&&t.resourceInfo){const S=t.resourceInfo.layers.reduce((e,n)=>(e[n.name]=n,e),{}),p=t.resourceInfo.layers.reduce((e,n)=>(e[n.title]=n,e),{});t.sublayers.forEach(e=>{let n=e.name;n.includes(":")&&(n=n.split(":")[1]);const s=S[n];s&&(e.title||(e.title=s.title),e.maxScale||(e.maxScale=s.maxScale),e.minScale||(e.minScale=s.minScale),e.fullExtent||(e.fullExtent=new d(s.extent)));const o=p[n];o&&(e.maxScale||(e.maxScale=o.maxScale),e.minScale||(e.minScale=o.minScale),e.fullExtent||(e.fullExtent=new d(o.extent)))})}}return{layer:t}}});function v(a,m,l,i,t,r){return _(a.$slots,"default")}const f=E(g,[["render",v]]);f.install=a=>{a.component(f.name,f)};export{f as V};
