import{V as k}from"./chunk-BRnY4uVr.js";import{V as x}from"./chunk-DZ3w8ZOu.js";import{V as y}from"./chunk-C9tqeO9j.js";import{u as E}from"./chunk-mQ0J7OJ8.js";import{g$ as B,h5 as C,hf as D,hg as S,h0 as b,ha as u,h2 as N,hb as T,hc as p,h7 as a,h6 as l,h8 as c,h4 as s,hh as A,hi as G,hj as I,hd as L}from"./chunk-YzRi88Dj.js";import{V as U}from"./chunk-Dsi4UQrI.js";const $={class:"esri-sketch__section"},H=B({__name:"dialog-sketch",props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(f,{emit:h}){const d=f,V=h,n=C(!1),m=E(),i=new D;m.watch("extent",async t=>{if(n.value)return;const e=await i.promise;e.extent=t}),i.promise.then(t=>{t.watch("extent",e=>{n.value&&(m.extent=e.extent)})});const r=S(d.modelValue.map(t=>t.clone()));b(()=>d.modelValue,t=>{r.value=t.map(e=>e.clone())});const v=()=>{V("update:modelValue",r.value),n.value=!1};return(t,e)=>{const w=u("ElButton"),_=u("ElIcon"),g=u("ElDialog");return N(),T(L,null,[p("p",null,[a(w,{onClick:e[0]||(e[0]=o=>n.value=!0)},{default:l(()=>e[4]||(e[4]=[c("open")])),_:1})]),a(g,{title:"绘制图斑",modelValue:n.value,"onUpdate:modelValue":e[3]||(e[3]=o=>n.value=o),draggable:!0},{default:l(()=>[a(s(x),{onLoad:e[2]||(e[2]=o=>s(i).resolve(o.view))},{after:l(()=>[c(A(r.value.map(o=>o.geometry)),1)]),default:l(()=>[a(s(y),{type:"img_w",anno:!1,"spatial-reference":{wkid:3857}}),a(s(U),null,{default:l(()=>[a(s(k),{class:"esri-sketch-dialog-with-save",modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=o=>r.value=o)},{default:l(()=>[a(s(G),{to:".esri-sketch-dialog-with-save .esri-sketch__panel",sleep:800},{default:l(()=>[p("div",$,[a(_,{class:"esri-sketch-ui-save esri-widget--button",onClick:v},{default:l(()=>[a(s(I))]),_:1})])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{H as _};
