import{u as d}from"./chunk-mQ0J7OJ8.js";import{g$ as h,lJ as u,oZ as p}from"./chunk-YzRi88Dj.js";import{T as f}from"./chunk-Ch0SDxT-.js";import{s as v,a as w}from"./chunk-DHvBO4SR.js";const y={cursor:{type:String,default:""}},T={"update:cursor":s=>s||!0},N=h({emits:T,props:y,setup(s,{emit:r}){const e=d();class t extends f{constructor(i,l){super(),this.eventName=i,this.handler=l}add(){const i=e.on(this.eventName,this.handler);this.removeHandler=i.remove}}const o=e[v],c=new t("click",async n=>{const i=await e.hitTest(n);console.log("va_view_click_event",{view:e,event:n,hitTestResult:i}),o.emit("click",{view:e,event:n,hitTestResult:i})});c.add(),u(()=>{c.remove()});const a=new t("pointer-move",p(async n=>{const i=await e.hitTest(n),l=i.results[0];let m;if(l&&(l.type==="media"?m=l.layer:l.type==="graphic"&&(m=l.graphic?.layer)),m){const g=m[w];r("update:cursor",g)}else r("update:cursor","initial");o.emit("pointer-move",{view:e,event:n,hitTestResult:i})},600,{leading:!1,trailing:!0}));return a.add(),u(()=>{a.remove()}),()=>null}}),M=h({setup(){const s=d();class r extends f{constructor(a,n){super(),this.propertyName=a,this.handler=n}add(){const a=s.watch(this.propertyName,this.handler);this.removeHandler=a.remove}}const e=s[v],t=new r("extent",p((c,a)=>{e.emit("watch:extent",[c,a])},50));t.add(),u(()=>{t.remove()});const o=new r("scale",p((c,a)=>{e.emit("watch:scale",[c,a])},50));return o.add(),u(()=>{o.remove()}),()=>null}});function V(s){return{all:s=s||new Map,on:function(r,e){var t=s.get(r);t?t.push(e):s.set(r,[e])},off:function(r,e){var t=s.get(r);t&&(e?t.splice(t.indexOf(e)>>>0,1):s.set(r,[]))},emit:function(r,e){var t=s.get(r);t&&t.slice().map(function(o){o(e)}),(t=s.get("*"))&&t.slice().map(function(o){o(r,e)})}}}export{N as _,M as a,T as e,V as m,y as p};
