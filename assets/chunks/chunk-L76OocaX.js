import{gY as P,b$ as C,a4 as T,C as h,h2 as y,lO as A,lQ as B,gZ as M,lu as N,h8 as V,h0 as G,h9 as z,h6 as f,h4 as b,h5 as k,hb as O}from"./chunk-5cgByRBI.js";import{u as _}from"./chunk-AKK1CEJt.js";import"./chunk-Px56PspP.js";import"./chunk-E5BRPeYu.js";import"./chunk-pCqGjxAI.js";import"./chunk-zSey9Ooj.js";import"./chunk-h-6BO8IB.js";import"./chunk-xAN4VzPO.js";import"./chunk-UKZSLdqr.js";import"./chunk-WSF21JF0.js";import"./chunk-yZafP3rf.js";import"./chunk-H62H84bQ.js";import"./chunk-x_uP2gs7.js";import"./chunk-CuAaMpbW.js";import"./chunk-9fCAoXev.js";import"./chunk-at0AWBwu.js";import"./chunk-ahoVFfdr.js";import"./chunk-vVb9o76x.js";import"./chunk-xrk-kNOH.js";import"./chunk-pwJAAE4U.js";import"./chunk-n27tu1zc.js";import"./chunk-O7qZ5nAO.js";import"./chunk-Ow-0ZicZ.js";import"./chunk-n41jAy5X.js";import"./chunk-puQ8N500.js";import"./chunk-DLXyH4A4.js";import"./chunk-Kr9URs_A.js";import"./chunk-EL967GvW.js";import"./chunk-sPUU7m6j.js";import"./chunk-vI5OQCLh.js";import"./chunk-TdOen-x3.js";import"./chunk-FmJXFfP7.js";import"./chunk-e_xIS2Vw.js";import"./chunk-bCfOp0ta.js";import"./chunk-3EAHv1mu.js";import"./chunk-d0kHfygp.js";import"./chunk-Ysh6IYsX.js";import"./chunk-z09cFCry.js";import"./chunk-tdkwsFTd.js";const $=(e="crosshair")=>{const r=_();class c extends P{constructor(){super(...arguments),this.cursor=e}add(){r.container.style.cursor=this.cursor,this.removeHandler=()=>{r.container.style.removeProperty("cursor")}}}const i=new c;return{viewCursorAdd:()=>{i.add()},viewCursorRemove:()=>{i.remove()}}};var S=(e=>(e.CENTER="center",e.RADIUS="radius",e))(S||{});const j=(e,r)=>{const c=r?.floatingPointSymbol||new C({color:[255,0,0],size:8,outline:{color:[255,255,255],width:1}}),i=r?.centerControlPointSymbol||new C({color:[255,0,0],size:8,outline:{color:[255,255,255],width:1}}),l=r?.previewSymbol||new T({color:[0,0,0,.5],style:"solid",outline:{color:[0,0,0],width:1,style:"dash"}}),o=_(),{viewCursorAdd:w,viewCursorRemove:p}=$("crosshair"),d=new B,u=new h({symbol:c}),n=new h({symbol:i,attributes:{type:S.CENTER}}),s=new h({symbol:l});function x(){if(!y(e)){console.error("layerRef is not defined");return}w();const t=o.on("pointer-move",R);d.add(t);const a=o.on("click",E);d.add(a);const m=o.on("double-click",g=>{g.stopPropagation(),v()});d.add(m)}function E(t){if(!o.graphics.includes(n)){const{x:a,y:m}=t,g=o.toMap({x:a,y:m});n.geometry=g,o.graphics.add(n),o.graphics.add(s)}}function R(t){const{x:a,y:m}=t;if(u.geometry=o.toMap({x:a,y:m}),o.graphics.add(u),o.graphics.includes(s)){const H=n.geometry.distance(u.geometry);s.geometry=new A({center:n.geometry,radius:H})}}function v(){if(p(),d.removeAll(),o.graphics.remove(u),o.graphics.remove(n),!o.graphics.includes(s))return;const t=new h({geometry:s.geometry,symbol:r?.symbol});return y(e)?.add(t),o.graphics.remove(s),t}return{start:x,complete:v}},Ro=M({__name:"create",props:{layer:{type:Object,default:void 0}},setup(e){const r=e,c=N(()=>r.layer),{start:i,complete:l}=j(c);return(o,w)=>{const p=V("ElButton");return G(),z(O,null,[f(p,{onClick:y(i)},{default:b(()=>[k(" Start ")]),_:1},8,["onClick"]),f(p,{onClick:y(l)},{default:b(()=>[k(" Complete ")]),_:1},8,["onClick"])],64)}}});export{Ro as _};
