import{V as _,s as y}from"./chunk-SyfkAsIp.js";import{gW as V,g$ as h,U as w,E as T,g_ as b,lL as L,he as $,h5 as f,lB as v,h2 as F,h3 as g,h6 as a,h7 as n,h4 as o,h8 as I,hh as x}from"./chunk-YzRi88Dj.js";import"./chunk-DjOIj6-o.js";import{R as P}from"./chunk-zKPkODU6.js";import"./chunk-DZ3w8ZOu.js";import"./chunk-BX1wMDvx.js";import"./chunk-DlgRifwZ.js";import"./chunk-MXvXirnR.js";import"./chunk-Clcwg9Qm.js";import"./chunk-CVnttSzt.js";import"./chunk-BlTBh7Wn.js";import"./chunk-DltoMSe1.js";import{V as S}from"./chunk-C9tqeO9j.js";import"./chunk-BkUj7kCJ.js";import"./chunk-lA_W8v3a.js";import"./chunk-CheEsZui.js";import"./chunk-CLQIQQkk.js";import{V as j}from"./chunk-CD3FIDfI.js";import"./chunk-DjXdGIkr.js";import"./chunk-BeMirVWN.js";import"./chunk-CtOsnhEP.js";import"./chunk-Dsi4UQrI.js";import"./chunk-D83kxBTm.js";import"./chunk-CMTIf1CS.js";import"./chunk-DhQzXLKM.js";import{V as k}from"./chunk-Dw_nTs4K.js";import"./chunk-FEB8T15a.js";import"./chunk-BRnY4uVr.js";import"./chunk--uKKWstj.js";import"./chunk-Bv-gq04m.js";import"./chunk-DNuFRK75.js";import"./chunk-BBWE_Ghm.js";import"./chunk-CpRg--ys.js";import"./chunk-CvEYJb1U.js";import"./chunk-CyteEnia.js";import"./chunk-DunbwQDX.js";import"./chunk-CFGc4D18.js";import"./chunk-CfNfXr3t.js";import{V as B}from"./chunk-B40jiAhY.js";import"./chunk-BwNtFsQb.js";import"./chunk-BVXbP2w4.js";import{u as E}from"./chunk-C7zv9yu9.js";import"./chunk-_SCJxduo.js";import"./chunk-ByM7454y.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./chunk-B7IxsrlQ.js";import"./chunk-mQ0J7OJ8.js";import"./chunk-Ch0SDxT-.js";import"./chunk-DHvBO4SR.js";/* empty css              */import"./chunk-BHw4eVQu.js";import"./chunk-BCOlSIf9.js";import"./chunk-Da7lMuRe.js";import"./chunk-CFLxDY7g.js";import"./chunk-D1eaHFcV.js";import"./chunk-CzH9YP0J.js";import"./chunk-BJmFAILw.js";import"./chunk-CurIDYYZ.js";import"./chunk-CuewZUm5.js";import"./chunk-BxGO9xbL.js";/* empty css              */import"./chunk-BZo4aBej.js";/* empty css              *//* empty css              */import"./chunk-D4KI0uoT.js";import"./chunk-Bw6A12Vg.js";import"./chunk-DGYRbKE9.js";import"./chunk-c5sFaa6D.js";function R(){const t=V("vaPopupTemplate");if(!t)throw new Error("The component which use usePopupTemplate() must be in a PopupTemplate component");return t}const d="http://t1.zjsophon.com:10000/geoserver",U=new P({baseURL:d,setRequestInit(t){return t.headers,t}}),W=t=>U.request(t),O=()=>W({method:"GET",url:"/rest/layers.json"}).then(t=>t.layers.layer),D={defaultOptions:{type:Object,default:()=>({})}},N={load:t=>t},q=h({name:"VaWmsLayerPopupTemplate",props:D,emits:N,setup(){const t=E(),s=t.fetchFeatureInfoFunction,e=R();return t.fetchFeatureInfoFunction=async p=>{p.info_format="application/json",p.feature_count=5;const{data:m}=await w(t.featureInfoUrl,{query:p});return m.features.map(u=>new T({attributes:u.properties,popupTemplate:e}))},b(()=>{t.fetchFeatureInfoFunction=s}),{popupTemplate:e}}});function C(t,s,e,p,m,u){return $(t.$slots,"default")}const l=L(q,[["render",C]]);l.install=t=>{t.component(l.name,l)};const Ro=h({__name:"index",setup(t){const s=async i=>{const r=i.view;await i.layer.when(),r.goTo(i.layer.fullExtent)},e=f([]),p=f([{templateType:"VkfSelect",prop:"name",filterable:!0,options:e}]),m=v({name:"pub:O3_predict_20220301"});u();function u(){O().then(i=>{e.value=i.map(r=>({label:r.name,value:r.name}))})}return(i,r)=>(F(),g(o(j),null,{before:a(()=>[n(o(_),{formItems:p.value,data:o(m),onSetData:r[0]||(r[0]=c=>o(y)(o(m),c))},null,8,["formItems","data"])]),default:a(()=>[n(o(S),{type:"vec_c",anno:!1,"spatial-reference":{wkid:4490}}),n(o(B),{url:o(d)+"/ows",onLoad:s,sublayers:[{name:o(m).name,queryable:!0,popupEnabled:!0}]},{default:a(()=>[n(o(k),{orphan:!0},{plugins:a(()=>[n(o(l))]),default:a(({attributes:c})=>[I(x(c),1)]),_:1})]),_:1},8,["url","sublayers"])]),_:1}))}});export{Ro as default};
