import{p as E,e as R,_ as I,c as L,a as S}from"./chunk-BkUj7kCJ.js";import{a as d,t as y}from"./chunk-BJmFAILw.js";import{a as T}from"./chunk-CurIDYYZ.js";import{b as a}from"./chunk-CuewZUm5.js";import{g$ as $,lw as b,cL as h,h5 as k,h0 as w,p1 as V,lL as _,ha as O,h2 as v,h3 as g,h6 as W,he as C,hk as M,o$ as N,hm as P}from"./chunk-YzRi88Dj.js";const x={...E,type:{type:String,default:"img_c"},spatialReference:{type:Object,default:()=>({wkid:4326})},token:{type:String,default:"f0175927031c1e12cb804b0c3b8cce4d"},minScale:{type:Number,default:d[1]},maxScale:{type:Number,default:d[18]},tileInfoVersion:{type:Number,default:2}},A={...R},B={1:{4326:y,4490:y,3857:a,102100:a,4549:a},2:{4326:T,4490:T,3857:a,102100:a,4549:a}},z=$({name:"VaTdtWebTileLayer",components:{VaWebTileLayer:I},props:x,emits:A,setup(e,{emit:c}){const f=["t0","t1","t2","t3","t4","t5","t6","t7"],o=b(()=>{const n=e.type.split("_"),t=n[0],s=n[1];return{baseLayer:t,typeSR:s}}),u=b(()=>{const n=e.spatialReference.wkid,t=B[e.tileInfoVersion][n],s={origin:t.origin,spatialReference:e.spatialReference,size:t.tileInfo.size};s.lods=t.lods.slice(1,19);const p={subDomains:f,urlTemplate:`https://{subDomain}.tianditu.gov.cn/${e.type}/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=${o.value.baseLayer}&STYLE=default&TILEMATRIXSET=${o.value.typeSR}&FORMAT=tiles&TILEMATRIX={level}&TILEROW={row}&TILECOL={col}&tk=${e.token}`,tileInfo:s,spatialReference:e.spatialReference,...e.defaultOptions};return t.fullExtent&&(p.fullExtent=new h({...t.fullExtent,spatialReference:e.spatialReference})),p}),m=L(e,["defaultOptions"]),l=S(c),i=k(!0);return w(()=>e.type,async()=>{i.value=!1,await V(),i.value=!0}),{defaultOptions:u,coreProps:m,coreEmits:l,ready:i}}});function D(e,c,f,o,u,m){const l=O("VaWebTileLayer");return e.ready?(v(),g(l,M({key:0,"default-options":e.defaultOptions},e.coreProps,N(e.coreEmits)),{default:W(()=>[C(e.$slots,"default")]),_:3},16,["default-options"])):P("",!0)}const r=_(z,[["render",D]]);r.install=e=>{e.component(r.name,r)};export{r as V};
