import{p as Gr}from"./chunk-BHw4eVQu.js";import{Dq as Ur,Dr as It,Ds as Br,g$ as Xr,lB as Wr,h5 as Yr,p1 as Ot,h0 as Rt,lw as Ve,U as zr,dI as Vr,cL as kr,lL as Hr,ha as qr,h2 as Zr,h3 as Kr,h6 as Qr,he as jr,nG as Jr,hm as en}from"./chunk-YzRi88Dj.js";import{f as _t}from"./chunk-BJmFAILw.js";import{u as tn}from"./chunk-c5sFaa6D.js";import{V as rn}from"./chunk-CBb1t_Nh.js";const nn={},on=Object.freeze(Object.defineProperty({__proto__:null,default:nn},Symbol.toStringTag,{value:"Module"})),an={...Gr,url:{type:String,required:!0},layerId:{type:String,required:!0},tileMatrixSetId:{type:String,default:"EPSG:3857"},defaultLayerOptions:{type:Object,default:()=>({})},optionsFromCapabilities:{type:Boolean,default:!1},tileInfo:{type:Object,default:void 0},fullExtent:{type:Object,default:void 0},customParameters:{type:Object,default:()=>({})}},ln={},sn={REQUEST:"GetTile",SERVICE:"WMTS",VERSION:"1.0.0",FORMAT:"application/vnd.mapbox-vector-tile"},un=t=>({...sn,TILEROW:"{y}",TILECOL:"{x}",LAYER:t.layerId,TILEMATRIXSET:t.tileMatrixSetId,TILEMATRIX:"{z}"}),Mt=(t,e,r,n)=>{const i=r?{xmin:r.xmin,ymin:r.ymin,xmax:r.xmax,ymax:r.ymax,spatialReference:r.spatialReference}:_t;n=n||r;const o=n?{xmin:n.xmin,ymin:n.ymin,xmax:n.xmax,ymax:n.ymax,spatialReference:n.spatialReference}:_t;return{capabilities:"TilesOnly",tiles:[t.url+"?"+Object.entries(un({layerId:t.layerId,tileMatrixSetId:t.tileMatrixSetId})).map(([a,s])=>`${a}=${s}`).join("&")],fullExtent:{spatialReference:{wkid:4326},...i},initialExtent:{spatialReference:{wkid:4326},...o},tileInfo:e}};var fn=Error,cn=EvalError,pn=RangeError,yn=ReferenceError,sr=SyntaxError,Pe=TypeError,dn=URIError,hn=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,r);if(a.value!==i||a.enumerable!==!0)return!1}return!0},Ft=typeof Symbol<"u"&&Symbol,mn=hn,gn=function(){return typeof Ft!="function"||typeof Symbol!="function"||typeof Ft("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:mn()},ke={__proto__:null,foo:{}},vn=Object,Sn=function(){return{__proto__:ke}.foo===ke.foo&&!(ke instanceof vn)},En="Function.prototype.bind called on incompatible ",Tn=Object.prototype.toString,wn=Math.max,xn="[object Function]",Ct=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},bn=function(e,r){for(var n=[],i=r,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},An=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},Pn=function(e){var r=this;if(typeof r!="function"||Tn.apply(r)!==xn)throw new TypeError(En+r);for(var n=bn(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,Ct(n,arguments));return Object(u)===u?u:this}return r.apply(e,Ct(n,arguments))},a=wn(0,r.length-n.length),s=[],l=0;l<a;l++)s[l]="$"+l;if(i=Function("binder","return function ("+An(s,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var f=function(){};f.prototype=r.prototype,i.prototype=new f,f.prototype=null}return i},In=Pn,ht=Function.prototype.bind||In,On=Function.prototype.call,Rn=Object.prototype.hasOwnProperty,_n=ht,Mn=_n.call(On,Rn),v,Fn=fn,Cn=cn,Nn=pn,Dn=yn,he=sr,ye=Pe,$n=dn,ur=Function,He=function(t){try{return ur('"use strict"; return ('+t+").constructor;")()}catch{}},ie=Object.getOwnPropertyDescriptor;if(ie)try{ie({},"")}catch{ie=null}var qe=function(){throw new ye},Ln=ie?function(){try{return arguments.callee,qe}catch{try{return ie(arguments,"callee").get}catch{return qe}}}():qe,ae=gn(),Gn=Sn(),M=Object.getPrototypeOf||(Gn?function(t){return t.__proto__}:null),ce={},Un=typeof Uint8Array>"u"||!M?v:M(Uint8Array),oe={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?v:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?v:ArrayBuffer,"%ArrayIteratorPrototype%":ae&&M?M([][Symbol.iterator]()):v,"%AsyncFromSyncIteratorPrototype%":v,"%AsyncFunction%":ce,"%AsyncGenerator%":ce,"%AsyncGeneratorFunction%":ce,"%AsyncIteratorPrototype%":ce,"%Atomics%":typeof Atomics>"u"?v:Atomics,"%BigInt%":typeof BigInt>"u"?v:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?v:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?v:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?v:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Fn,"%eval%":eval,"%EvalError%":Cn,"%Float32Array%":typeof Float32Array>"u"?v:Float32Array,"%Float64Array%":typeof Float64Array>"u"?v:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?v:FinalizationRegistry,"%Function%":ur,"%GeneratorFunction%":ce,"%Int8Array%":typeof Int8Array>"u"?v:Int8Array,"%Int16Array%":typeof Int16Array>"u"?v:Int16Array,"%Int32Array%":typeof Int32Array>"u"?v:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ae&&M?M(M([][Symbol.iterator]())):v,"%JSON%":typeof JSON=="object"?JSON:v,"%Map%":typeof Map>"u"?v:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ae||!M?v:M(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?v:Promise,"%Proxy%":typeof Proxy>"u"?v:Proxy,"%RangeError%":Nn,"%ReferenceError%":Dn,"%Reflect%":typeof Reflect>"u"?v:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?v:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ae||!M?v:M(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?v:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ae&&M?M(""[Symbol.iterator]()):v,"%Symbol%":ae?Symbol:v,"%SyntaxError%":he,"%ThrowTypeError%":Ln,"%TypedArray%":Un,"%TypeError%":ye,"%Uint8Array%":typeof Uint8Array>"u"?v:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?v:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?v:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?v:Uint32Array,"%URIError%":$n,"%WeakMap%":typeof WeakMap>"u"?v:WeakMap,"%WeakRef%":typeof WeakRef>"u"?v:WeakRef,"%WeakSet%":typeof WeakSet>"u"?v:WeakSet};if(M)try{null.error}catch(t){var Bn=M(M(t));oe["%Error.prototype%"]=Bn}var Xn=function t(e){var r;if(e==="%AsyncFunction%")r=He("async function () {}");else if(e==="%GeneratorFunction%")r=He("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=He("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&M&&(r=M(i.prototype))}return oe[e]=r,r},Nt={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ie=ht,Ue=Mn,Wn=Ie.call(Function.call,Array.prototype.concat),Yn=Ie.call(Function.apply,Array.prototype.splice),Dt=Ie.call(Function.call,String.prototype.replace),Be=Ie.call(Function.call,String.prototype.slice),zn=Ie.call(Function.call,RegExp.prototype.exec),Vn=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,kn=/\\(\\)?/g,Hn=function(e){var r=Be(e,0,1),n=Be(e,-1);if(r==="%"&&n!=="%")throw new he("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new he("invalid intrinsic syntax, expected opening `%`");var i=[];return Dt(e,Vn,function(o,a,s,l){i[i.length]=s?Dt(l,kn,"$1"):a||o}),i},qn=function(e,r){var n=e,i;if(Ue(Nt,n)&&(i=Nt[n],n="%"+i[0]+"%"),Ue(oe,n)){var o=oe[n];if(o===ce&&(o=Xn(n)),typeof o>"u"&&!r)throw new ye("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new he("intrinsic "+e+" does not exist!")},ve=function(e,r){if(typeof e!="string"||e.length===0)throw new ye("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ye('"allowMissing" argument must be a boolean');if(zn(/^%?[^%]*%?$/,e)===null)throw new he("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Hn(e),i=n.length>0?n[0]:"",o=qn("%"+i+"%",r),a=o.name,s=o.value,l=!1,f=o.alias;f&&(i=f[0],Yn(n,Wn([0,1],f)));for(var u=1,p=!0;u<n.length;u+=1){var c=n[u],h=Be(c,0,1),g=Be(c,-1);if((h==='"'||h==="'"||h==="`"||g==='"'||g==="'"||g==="`")&&h!==g)throw new he("property names with quotes must have matching quotes");if((c==="constructor"||!p)&&(l=!0),i+="."+c,a="%"+i+"%",Ue(oe,a))s=oe[a];else if(s!=null){if(!(c in s)){if(!r)throw new ye("base intrinsic for "+e+" exists, but the property is not available.");return}if(ie&&u+1>=n.length){var S=ie(s,c);p=!!S,p&&"get"in S&&!("originalValue"in S.get)?s=S.get:s=s[c]}else p=Ue(s,c),s=s[c];p&&!l&&(oe[a]=s)}}return s},fr={exports:{}},Ze,$t;function mt(){if($t)return Ze;$t=1;var t=ve,e=t("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return Ze=e,Ze}var Zn=ve,Le=Zn("%Object.getOwnPropertyDescriptor%",!0);if(Le)try{Le([],"length")}catch{Le=null}var cr=Le,Lt=mt(),Kn=sr,le=Pe,Gt=cr,Qn=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new le("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new le("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new le("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new le("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new le("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new le("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,s=arguments.length>6?arguments[6]:!1,l=!!Gt&&Gt(e,r);if(Lt)Lt(e,r,{configurable:a===null&&l?l.configurable:!a,enumerable:i===null&&l?l.enumerable:!i,value:n,writable:o===null&&l?l.writable:!o});else if(s||!i&&!o&&!a)e[r]=n;else throw new Kn("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},ot=mt(),pr=function(){return!!ot};pr.hasArrayLengthDefineBug=function(){if(!ot)return null;try{return ot([],"length",{value:1}).length!==1}catch{return!0}};var jn=pr,Jn=ve,Ut=Qn,ei=jn(),Bt=cr,Xt=Pe,ti=Jn("%Math.floor%"),ri=function(e,r){if(typeof e!="function")throw new Xt("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||ti(r)!==r)throw new Xt("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in e&&Bt){var a=Bt(e,"length");a&&!a.configurable&&(i=!1),a&&!a.writable&&(o=!1)}return(i||o||!n)&&(ei?Ut(e,"length",r,!0,!0):Ut(e,"length",r)),e};(function(t){var e=ht,r=ve,n=ri,i=Pe,o=r("%Function.prototype.apply%"),a=r("%Function.prototype.call%"),s=r("%Reflect.apply%",!0)||e.call(a,o),l=mt(),f=r("%Math.max%");t.exports=function(c){if(typeof c!="function")throw new i("a function is required");var h=s(e,a,arguments);return n(h,1+f(0,c.length-(arguments.length-1)),!0)};var u=function(){return s(e,o,arguments)};l?l(t.exports,"apply",{value:u}):t.exports.apply=u})(fr);var ni=fr.exports,yr=ve,dr=ni,ii=dr(yr("String.prototype.indexOf")),oi=function(e,r){var n=yr(e,!!r);return typeof n=="function"&&ii(e,".prototype.")>-1?dr(n):n};const ai=Ur(on);var gt=typeof Map=="function"&&Map.prototype,Ke=Object.getOwnPropertyDescriptor&&gt?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Xe=gt&&Ke&&typeof Ke.get=="function"?Ke.get:null,Wt=gt&&Map.prototype.forEach,vt=typeof Set=="function"&&Set.prototype,Qe=Object.getOwnPropertyDescriptor&&vt?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,We=vt&&Qe&&typeof Qe.get=="function"?Qe.get:null,Yt=vt&&Set.prototype.forEach,li=typeof WeakMap=="function"&&WeakMap.prototype,xe=li?WeakMap.prototype.has:null,si=typeof WeakSet=="function"&&WeakSet.prototype,be=si?WeakSet.prototype.has:null,ui=typeof WeakRef=="function"&&WeakRef.prototype,zt=ui?WeakRef.prototype.deref:null,fi=Boolean.prototype.valueOf,ci=Object.prototype.toString,pi=Function.prototype.toString,yi=String.prototype.match,St=String.prototype.slice,j=String.prototype.replace,di=String.prototype.toUpperCase,Vt=String.prototype.toLowerCase,hr=RegExp.prototype.test,kt=Array.prototype.concat,V=Array.prototype.join,hi=Array.prototype.slice,Ht=Math.floor,at=typeof BigInt=="function"?BigInt.prototype.valueOf:null,je=Object.getOwnPropertySymbols,lt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,me=typeof Symbol=="function"&&typeof Symbol.iterator=="object",N=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===me||!0)?Symbol.toStringTag:null,mr=Object.prototype.propertyIsEnumerable,qt=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Zt(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||hr.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-Ht(-t):Ht(t);if(n!==t){var i=String(n),o=St.call(e,i.length+1);return j.call(i,r,"$&_")+"."+j.call(j.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return j.call(e,r,"$&_")}var st=ai,Kt=st.custom,Qt=vr(Kt)?Kt:null,mi=function t(e,r,n,i){var o=r||{};if(K(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(K(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=K(o,"customInspect")?o.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(K(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(K(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Er(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return s?Zt(e,l):l}if(typeof e=="bigint"){var f=String(e)+"n";return s?Zt(e,f):f}var u=typeof o.depth>"u"?5:o.depth;if(typeof n>"u"&&(n=0),n>=u&&u>0&&typeof e=="object")return ut(e)?"[Array]":"[Object]";var p=Ni(o,n);if(typeof i>"u")i=[];else if(Sr(i,e)>=0)return"[Circular]";function c(x,F,U){if(F&&(i=hi.call(i),i.push(F)),U){var $={depth:o.depth};return K(o,"quoteStyle")&&($.quoteStyle=o.quoteStyle),t(x,$,n+1,i)}return t(x,o,n+1,i)}if(typeof e=="function"&&!jt(e)){var h=Ai(e),g=Re(e,c);return"[Function"+(h?": "+h:" (anonymous)")+"]"+(g.length>0?" { "+V.call(g,", ")+" }":"")}if(vr(e)){var S=me?j.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):lt.call(e);return typeof e=="object"&&!me?Te(S):S}if(Mi(e)){for(var T="<"+Vt.call(String(e.nodeName)),P=e.attributes||[],_=0;_<P.length;_++)T+=" "+P[_].name+"="+gr(gi(P[_].value),"double",o);return T+=">",e.childNodes&&e.childNodes.length&&(T+="..."),T+="</"+Vt.call(String(e.nodeName))+">",T}if(ut(e)){if(e.length===0)return"[]";var d=Re(e,c);return p&&!Ci(d)?"["+ft(d,p)+"]":"[ "+V.call(d,", ")+" ]"}if(Si(e)){var O=Re(e,c);return!("cause"in Error.prototype)&&"cause"in e&&!mr.call(e,"cause")?"{ ["+String(e)+"] "+V.call(kt.call("[cause]: "+c(e.cause),O),", ")+" }":O.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+V.call(O,", ")+" }"}if(typeof e=="object"&&a){if(Qt&&typeof e[Qt]=="function"&&st)return st(e,{depth:u-n});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Pi(e)){var D=[];return Wt&&Wt.call(e,function(x,F){D.push(c(F,e,!0)+" => "+c(x,e))}),Jt("Map",Xe.call(e),D,p)}if(Ri(e)){var W=[];return Yt&&Yt.call(e,function(x){W.push(c(x,e))}),Jt("Set",We.call(e),W,p)}if(Ii(e))return Je("WeakMap");if(_i(e))return Je("WeakSet");if(Oi(e))return Je("WeakRef");if(Ti(e))return Te(c(Number(e)));if(xi(e))return Te(c(at.call(e)));if(wi(e))return Te(fi.call(e));if(Ei(e))return Te(c(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof It<"u"&&e===It)return"{ [object globalThis] }";if(!vi(e)&&!jt(e)){var I=Re(e,c),q=qt?qt(e)===Object.prototype:e instanceof Object||e.constructor===Object,H=e instanceof Object?"":"null prototype",L=!q&&N&&Object(e)===e&&N in e?St.call(ee(e),8,-1):H?"Object":"",G=q||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",m=G+(L||H?"["+V.call(kt.call([],L||[],H||[]),": ")+"] ":"");return I.length===0?m+"{}":p?m+"{"+ft(I,p)+"}":m+"{ "+V.call(I,", ")+" }"}return String(e)};function gr(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function gi(t){return j.call(String(t),/"/g,"&quot;")}function ut(t){return ee(t)==="[object Array]"&&(!N||!(typeof t=="object"&&N in t))}function vi(t){return ee(t)==="[object Date]"&&(!N||!(typeof t=="object"&&N in t))}function jt(t){return ee(t)==="[object RegExp]"&&(!N||!(typeof t=="object"&&N in t))}function Si(t){return ee(t)==="[object Error]"&&(!N||!(typeof t=="object"&&N in t))}function Ei(t){return ee(t)==="[object String]"&&(!N||!(typeof t=="object"&&N in t))}function Ti(t){return ee(t)==="[object Number]"&&(!N||!(typeof t=="object"&&N in t))}function wi(t){return ee(t)==="[object Boolean]"&&(!N||!(typeof t=="object"&&N in t))}function vr(t){if(me)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!lt)return!1;try{return lt.call(t),!0}catch{}return!1}function xi(t){if(!t||typeof t!="object"||!at)return!1;try{return at.call(t),!0}catch{}return!1}var bi=Object.prototype.hasOwnProperty||function(t){return t in this};function K(t,e){return bi.call(t,e)}function ee(t){return ci.call(t)}function Ai(t){if(t.name)return t.name;var e=yi.call(pi.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function Sr(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function Pi(t){if(!Xe||!t||typeof t!="object")return!1;try{Xe.call(t);try{We.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function Ii(t){if(!xe||!t||typeof t!="object")return!1;try{xe.call(t,xe);try{be.call(t,be)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function Oi(t){if(!zt||!t||typeof t!="object")return!1;try{return zt.call(t),!0}catch{}return!1}function Ri(t){if(!We||!t||typeof t!="object")return!1;try{We.call(t);try{Xe.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function _i(t){if(!be||!t||typeof t!="object")return!1;try{be.call(t,be);try{xe.call(t,xe)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function Mi(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Er(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Er(St.call(t,0,e.maxStringLength),e)+n}var i=j.call(j.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Fi);return gr(i,"single",e)}function Fi(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+di.call(e.toString(16))}function Te(t){return"Object("+t+")"}function Je(t){return t+" { ? }"}function Jt(t,e,r,n){var i=n?ft(r,n):V.call(r,", ");return t+" ("+e+") {"+i+"}"}function Ci(t){for(var e=0;e<t.length;e++)if(Sr(t[e],`
`)>=0)return!1;return!0}function Ni(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=V.call(Array(t.indent+1)," ");else return null;return{base:r,prev:V.call(Array(e+1),r)}}function ft(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+V.call(t,","+r)+`
`+e.prev}function Re(t,e){var r=ut(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=K(t,i)?e(t[i],t):""}var o=typeof je=="function"?je(t):[],a;if(me){a={};for(var s=0;s<o.length;s++)a["$"+o[s]]=o[s]}for(var l in t)K(t,l)&&(r&&String(Number(l))===l&&l<t.length||me&&a["$"+l]instanceof Symbol||(hr.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if(typeof je=="function")for(var f=0;f<o.length;f++)mr.call(t,o[f])&&n.push("["+e(o[f])+"]: "+e(t[o[f]],t));return n}var Tr=ve,Se=oi,Di=mi,$i=Pe,_e=Tr("%WeakMap%",!0),Me=Tr("%Map%",!0),Li=Se("WeakMap.prototype.get",!0),Gi=Se("WeakMap.prototype.set",!0),Ui=Se("WeakMap.prototype.has",!0),Bi=Se("Map.prototype.get",!0),Xi=Se("Map.prototype.set",!0),Wi=Se("Map.prototype.has",!0),Et=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},Yi=function(t,e){var r=Et(t,e);return r&&r.value},zi=function(t,e,r){var n=Et(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},Vi=function(t,e){return!!Et(t,e)},ki=function(){var e,r,n,i={assert:function(o){if(!i.has(o))throw new $i("Side channel does not contain "+Di(o))},get:function(o){if(_e&&o&&(typeof o=="object"||typeof o=="function")){if(e)return Li(e,o)}else if(Me){if(r)return Bi(r,o)}else if(n)return Yi(n,o)},has:function(o){if(_e&&o&&(typeof o=="object"||typeof o=="function")){if(e)return Ui(e,o)}else if(Me){if(r)return Wi(r,o)}else if(n)return Vi(n,o);return!1},set:function(o,a){_e&&o&&(typeof o=="object"||typeof o=="function")?(e||(e=new _e),Gi(e,o,a)):Me?(r||(r=new Me),Xi(r,o,a)):(n||(n={key:{},next:null}),zi(n,o,a))}};return i},Hi=String.prototype.replace,qi=/%20/g,et={RFC1738:"RFC1738",RFC3986:"RFC3986"},Tt={default:et.RFC3986,formatters:{RFC1738:function(t){return Hi.call(t,qi,"+")},RFC3986:function(t){return String(t)}},RFC1738:et.RFC1738,RFC3986:et.RFC3986},Zi=Tt,tt=Object.prototype.hasOwnProperty,ne=Array.isArray,Y=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Ki=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(ne(n)){for(var i=[],o=0;o<n.length;++o)typeof n[o]<"u"&&i.push(n[o]);r.obj[r.prop]=i}}},wr=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},Qi=function t(e,r,n){if(!r)return e;if(typeof r!="object"){if(ne(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!tt.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var i=e;return ne(e)&&!ne(r)&&(i=wr(e,n)),ne(e)&&ne(r)?(r.forEach(function(o,a){if(tt.call(e,a)){var s=e[a];s&&typeof s=="object"&&o&&typeof o=="object"?e[a]=t(s,o,n):e.push(o)}else e[a]=o}),e):Object.keys(r).reduce(function(o,a){var s=r[a];return tt.call(o,a)?o[a]=t(o[a],s,n):o[a]=s,o},i)},ji=function(e,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},e)},Ji=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},rt=1024,eo=function(e,r,n,i,o){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});for(var s="",l=0;l<a.length;l+=rt){for(var f=a.length>=rt?a.slice(l,l+rt):a,u=[],p=0;p<f.length;++p){var c=f.charCodeAt(p);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||o===Zi.RFC1738&&(c===40||c===41)){u[u.length]=f.charAt(p);continue}if(c<128){u[u.length]=Y[c];continue}if(c<2048){u[u.length]=Y[192|c>>6]+Y[128|c&63];continue}if(c<55296||c>=57344){u[u.length]=Y[224|c>>12]+Y[128|c>>6&63]+Y[128|c&63];continue}p+=1,c=65536+((c&1023)<<10|f.charCodeAt(p)&1023),u[u.length]=Y[240|c>>18]+Y[128|c>>12&63]+Y[128|c>>6&63]+Y[128|c&63]}s+=u.join("")}return s},to=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],i=0;i<r.length;++i)for(var o=r[i],a=o.obj[o.prop],s=Object.keys(a),l=0;l<s.length;++l){var f=s[l],u=a[f];typeof u=="object"&&u!==null&&n.indexOf(u)===-1&&(r.push({obj:a,prop:f}),n.push(u))}return Ki(r),e},ro=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},no=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},io=function(e,r){return[].concat(e,r)},oo=function(e,r){if(ne(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(r(e[i]));return n}return r(e)},xr={arrayToObject:wr,assign:ji,combine:io,compact:to,decode:Ji,encode:eo,isBuffer:no,isRegExp:ro,maybeMap:oo,merge:Qi},br=ki,Ge=xr,Ae=Tt,ao=Object.prototype.hasOwnProperty,Ar={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},z=Array.isArray,lo=Array.prototype.push,Pr=function(t,e){lo.apply(t,z(e)?e:[e])},so=Date.prototype.toISOString,er=Ae.default,R={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Ge.encode,encodeValuesOnly:!1,format:er,formatter:Ae.formatters[er],indices:!1,serializeDate:function(e){return so.call(e)},skipNulls:!1,strictNullHandling:!1},uo=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},nt={},fo=function t(e,r,n,i,o,a,s,l,f,u,p,c,h,g,S,T,P,_){for(var d=e,O=_,D=0,W=!1;(O=O.get(nt))!==void 0&&!W;){var I=O.get(e);if(D+=1,typeof I<"u"){if(I===D)throw new RangeError("Cyclic object value");W=!0}typeof O.get(nt)>"u"&&(D=0)}if(typeof u=="function"?d=u(r,d):d instanceof Date?d=h(d):n==="comma"&&z(d)&&(d=Ge.maybeMap(d,function(ze){return ze instanceof Date?h(ze):ze})),d===null){if(a)return f&&!T?f(r,R.encoder,P,"key",g):r;d=""}if(uo(d)||Ge.isBuffer(d)){if(f){var q=T?r:f(r,R.encoder,P,"key",g);return[S(q)+"="+S(f(d,R.encoder,P,"value",g))]}return[S(r)+"="+S(String(d))]}var H=[];if(typeof d>"u")return H;var L;if(n==="comma"&&z(d))T&&f&&(d=Ge.maybeMap(d,f)),L=[{value:d.length>0?d.join(",")||null:void 0}];else if(z(u))L=u;else{var G=Object.keys(d);L=p?G.sort(p):G}var m=l?r.replace(/\./g,"%2E"):r,x=i&&z(d)&&d.length===1?m+"[]":m;if(o&&z(d)&&d.length===0)return x+"[]";for(var F=0;F<L.length;++F){var U=L[F],$=typeof U=="object"&&typeof U.value<"u"?U.value:d[U];if(!(s&&$===null)){var te=c&&l?U.replace(/\./g,"%2E"):U,Lr=z(d)?typeof n=="function"?n(x,te):x:x+(c?"."+te:"["+te+"]");_.set(e,D);var Pt=br();Pt.set(nt,_),Pr(H,t($,Lr,n,i,o,a,s,l,n==="comma"&&T&&z(d)?null:f,u,p,c,h,g,S,T,P,Pt))}}return H},co=function(e){if(!e)return R;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||R.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Ae.default;if(typeof e.format<"u"){if(!ao.call(Ae.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=Ae.formatters[n],o=R.filter;(typeof e.filter=="function"||z(e.filter))&&(o=e.filter);var a;if(e.arrayFormat in Ar?a=e.arrayFormat:"indices"in e?a=e.indices?"indices":"repeat":a=R.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var s=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:R.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:R.addQueryPrefix,allowDots:s,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:R.allowEmptyArrays,arrayFormat:a,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:R.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?R.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:R.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:R.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:R.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:R.encodeValuesOnly,filter:o,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:R.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:R.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:R.strictNullHandling}},po=function(t,e){var r=t,n=co(e),i,o;typeof n.filter=="function"?(o=n.filter,r=o("",r)):z(n.filter)&&(o=n.filter,i=o);var a=[];if(typeof r!="object"||r===null)return"";var s=Ar[n.arrayFormat],l=s==="comma"&&n.commaRoundTrip;i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var f=br(),u=0;u<i.length;++u){var p=i[u];n.skipNulls&&r[p]===null||Pr(a,fo(r[p],p,s,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,f))}var c=a.join(n.delimiter),h=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),c.length>0?h+c:""},ge=xr,ct=Object.prototype.hasOwnProperty,yo=Array.isArray,A={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:ge.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},ho=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},Ir=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},mo="utf8=%26%2310003%3B",go="utf8=%E2%9C%93",vo=function(e,r){var n={__proto__:null},i=r.ignoreQueryPrefix?e.replace(/^\?/,""):e;i=i.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var o=r.parameterLimit===1/0?void 0:r.parameterLimit,a=i.split(r.delimiter,o),s=-1,l,f=r.charset;if(r.charsetSentinel)for(l=0;l<a.length;++l)a[l].indexOf("utf8=")===0&&(a[l]===go?f="utf-8":a[l]===mo&&(f="iso-8859-1"),s=l,l=a.length);for(l=0;l<a.length;++l)if(l!==s){var u=a[l],p=u.indexOf("]="),c=p===-1?u.indexOf("="):p+1,h,g;c===-1?(h=r.decoder(u,A.decoder,f,"key"),g=r.strictNullHandling?null:""):(h=r.decoder(u.slice(0,c),A.decoder,f,"key"),g=ge.maybeMap(Ir(u.slice(c+1),r),function(T){return r.decoder(T,A.decoder,f,"value")})),g&&r.interpretNumericEntities&&f==="iso-8859-1"&&(g=ho(g)),u.indexOf("[]=")>-1&&(g=yo(g)?[g]:g);var S=ct.call(n,h);S&&r.duplicates==="combine"?n[h]=ge.combine(n[h],g):(!S||r.duplicates==="last")&&(n[h]=g)}return n},So=function(t,e,r,n){for(var i=n?e:Ir(e,r),o=t.length-1;o>=0;--o){var a,s=t[o];if(s==="[]"&&r.parseArrays)a=r.allowEmptyArrays&&(i===""||r.strictNullHandling&&i===null)?[]:[].concat(i);else{a=r.plainObjects?Object.create(null):{};var l=s.charAt(0)==="["&&s.charAt(s.length-1)==="]"?s.slice(1,-1):s,f=r.decodeDotInKeys?l.replace(/%2E/g,"."):l,u=parseInt(f,10);!r.parseArrays&&f===""?a={0:i}:!isNaN(u)&&s!==f&&String(u)===f&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(a=[],a[u]=i):f!=="__proto__"&&(a[f]=i)}i=a}return i},Eo=function(e,r,n,i){if(e){var o=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,l=n.depth>0&&a.exec(o),f=l?o.slice(0,l.index):o,u=[];if(f){if(!n.plainObjects&&ct.call(Object.prototype,f)&&!n.allowPrototypes)return;u.push(f)}for(var p=0;n.depth>0&&(l=s.exec(o))!==null&&p<n.depth;){if(p+=1,!n.plainObjects&&ct.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(l[1])}if(l){if(n.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");u.push("["+o.slice(l.index)+"]")}return So(u,r,n,i)}},To=function(e){if(!e)return A;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?A.charset:e.charset,n=typeof e.duplicates>"u"?A.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:A.allowDots:!!e.allowDots;return{allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:A.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:A.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:A.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:A.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:A.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:A.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:A.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:A.decoder,delimiter:typeof e.delimiter=="string"||ge.isRegExp(e.delimiter)?e.delimiter:A.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:A.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:A.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:A.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:A.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:A.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:A.strictNullHandling}},wo=function(t,e){var r=To(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?vo(t,r):t,i=r.plainObjects?Object.create(null):{},o=Object.keys(n),a=0;a<o.length;++a){var s=o[a],l=Eo(s,n[s],r,typeof t=="string");i=ge.merge(i,l,r)}return r.allowSparse===!0?i:ge.compact(i)},xo=po,bo=wo,Ao=Tt,Po={formats:Ao,parse:bo,stringify:xo};const Io=Br(Po);function Oo(){throw new Error("Unimplemented abstract method.")}function Ro(t,e){return t>e?1:t<e?-1:0}function _o(t,e,r){if(t[0]<=e)return 0;const n=t.length;if(e<=t[n-1])return n-1;if(typeof r=="function"){for(let i=1;i<n;++i){const o=t[i];if(o===e)return i;if(o<e)return r(e,t[i-1],o)>0?i-1:i}return n-1}if(r>0){for(let i=1;i<n;++i)if(t[i]<e)return i-1;return n-1}if(r<0){for(let i=1;i<n;++i)if(t[i]<=e)return i;return n-1}for(let i=1;i<n;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return n-1}function Mo(t,e,r){const n=e||Ro;return t.every(function(i,o){if(o===0)return!0;const a=n(t[o-1],i);return!(a>0||a===0)})}function wt(t,e){return Or(t,e,[]).join("")}function Or(t,e,r){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)r.push(t.nodeValue);else{let n;for(n=t.firstChild;n;n=n.nextSibling)Or(n,e,r)}return r}function Fo(t){return"documentElement"in t}function Co(t){return new DOMParser().parseFromString(t,"application/xml")}function pt(t,e){return function(r,n){const i=t.call(this,r,n);i!==void 0&&n[n.length-1].push(i)}}function X(t,e,r){return function(n,i){const o=t.call(this,n,i);if(o!==void 0){const a=i[i.length-1],s=n.localName;let l;s in a?l=a[s]:(l=[],a[s]=l),l.push(o)}}}function y(t,e,r){return function(n,i){const o=t.call(this,n,i);if(o!==void 0){const a=i[i.length-1],s=n.localName;a[s]=o}}}function w(t,e,r){r=r!==void 0?r:{};let n,i;for(n=0,i=t.length;n<i;++n)r[t[n]]=e;return r}function No(t,e,r,n){let i;for(i=e.firstElementChild;i;i=i.nextElementSibling){const o=t[i.namespaceURI];if(o!==void 0){const a=o[i.localName];a!==void 0&&a.call(n,i,r)}}}function b(t,e,r,n,i){return n.push(t),No(e,r,n,i),n.pop()}class Rr{read(e){if(!e)return null;if(typeof e=="string"){const r=Co(e);return this.readFromDocument(r)}return Fo(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let r=e.firstChild;r;r=r.nextSibling)if(r.nodeType==Node.ELEMENT_NODE)return this.readFromNode(r);return null}readFromNode(e){Oo()}}const Do="http://www.w3.org/1999/xlink";function xt(t){return t.getAttributeNS(Do,"href")}function $o(t){const e=wt(t,!1);return Lo(e)}function Lo(t){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);if(e)return parseFloat(e[1])}function J(t){const e=wt(t,!1);return Go(e)}function Go(t){const e=/^\s*(\d+)\s*$/.exec(t);if(e)return parseInt(e[1],10)}function E(t){return wt(t,!1).trim()}const B=[null,"http://www.opengis.net/ows/1.1"],Uo=w(B,{ServiceIdentification:y(fa),ServiceProvider:y(pa),OperationsMetadata:y(sa)});class Bo extends Rr{constructor(){super()}readFromNode(e){const r=b({},Uo,e,[]);return r||null}}const Xo=w(B,{DeliveryPoint:y(E),City:y(E),AdministrativeArea:y(E),PostalCode:y(E),Country:y(E),ElectronicMailAddress:y(E)}),Wo=w(B,{Value:X(ya)}),Yo=w(B,{AllowedValues:y(ta)}),zo=w(B,{Phone:y(ua),Address:y(ea)}),Vo=w(B,{HTTP:y(aa)}),ko=w(B,{Get:X(oa),Post:void 0}),Ho=w(B,{DCP:y(ia)}),qo=w(B,{Operation:la}),Zo=w(B,{Voice:y(E),Facsimile:y(E)}),Ko=w(B,{Constraint:X(ra)}),Qo=w(B,{IndividualName:y(E),PositionName:y(E),ContactInfo:y(na)}),jo=w(B,{Abstract:y(E),AccessConstraints:y(E),Fees:y(E),Title:y(E),ServiceTypeVersion:y(E),ServiceType:y(E)}),Jo=w(B,{ProviderName:y(E),ProviderSite:y(xt),ServiceContact:y(ca)});function ea(t,e){return b({},Xo,t,e)}function ta(t,e){return b({},Wo,t,e)}function ra(t,e){const r=t.getAttribute("name");if(r)return b({name:r},Yo,t,e)}function na(t,e){return b({},zo,t,e)}function ia(t,e){return b({},Vo,t,e)}function oa(t,e){const r=xt(t);if(r)return b({href:r},Ko,t,e)}function aa(t,e){return b({},ko,t,e)}function la(t,e){const r=t.getAttribute("name"),n=b({},Ho,t,e);if(!n)return;const i=e[e.length-1];i[r]=n}function sa(t,e){return b({},qo,t,e)}function ua(t,e){return b({},Zo,t,e)}function fa(t,e){return b({},jo,t,e)}function ca(t,e){return b({},Qo,t,e)}function pa(t,e){return b({},Jo,t,e)}function ya(t,e){return E(t)}const C={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function da(t){const e=Mr();for(let r=0,n=t.length;r<n;++r)ga(e,t[r]);return e}function ha(t,e,r){const n=Math.min.apply(null,t),i=Math.min.apply(null,e),o=Math.max.apply(null,t),a=Math.max.apply(null,e);return bt(n,i,o,a,r)}function _r(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function tr(t,e){const r=t[0],n=t[1],i=t[2],o=t[3],a=e[0],s=e[1];let l=C.UNKNOWN;return a<r?l=l|C.LEFT:a>i&&(l=l|C.RIGHT),s<n?l=l|C.BELOW:s>o&&(l=l|C.ABOVE),l===C.UNKNOWN&&(l=C.INTERSECTING),l}function Mr(){return[1/0,1/0,-1/0,-1/0]}function bt(t,e,r,n,i){return i?(i[0]=t,i[1]=e,i[2]=r,i[3]=n,i):[t,e,r,n]}function ma(t){return bt(1/0,1/0,-1/0,-1/0,t)}function ga(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function va(t,e,r,n,i){for(;r<n;r+=i)Sa(t,e[r],e[r+1]);return t}function Sa(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)}function Ea(t){return[t[0],t[3]]}function Ta(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function wa(t){return t[2]<t[0]||t[3]<t[1]}function xa(t,e,r){let n=!1;const i=tr(t,e),o=tr(t,r);if(i===C.INTERSECTING||o===C.INTERSECTING)n=!0;else{const a=t[0],s=t[1],l=t[2],f=t[3],u=e[0],p=e[1],c=r[0],h=r[1],g=(h-p)/(c-u);let S,T;o&C.ABOVE&&!(i&C.ABOVE)&&(S=c-(h-f)/g,n=S>=a&&S<=l),!n&&o&C.RIGHT&&!(i&C.RIGHT)&&(T=h-(c-l)*g,n=T>=s&&T<=f),!n&&o&C.BELOW&&!(i&C.BELOW)&&(S=c-(h-s)/g,n=S>=a&&S<=l),!n&&o&C.LEFT&&!(i&C.LEFT)&&(T=h-(c-a)*g,n=T>=s&&T<=f)}return n}function ba(t,e,r,n){if(wa(t))return ma(r);let i=[];i=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]],e(i,i,2);const o=[],a=[];for(let s=0,l=i.length;s<l;s+=2)o.push(i[s]),a.push(i[s+1]);return ha(o,a,r)}const k=[null,"http://www.opengis.net/wmts/1.0"],Ee=[null,"http://www.opengis.net/ows/1.1"],Aa=w(k,{Contents:y(La)});class Pa extends Rr{constructor(){super(),this.owsParser_=new Bo}readFromNode(e){let r=e.getAttribute("version");r&&(r=r.trim());let n=this.owsParser_.readFromNode(e);return n?(n.version=r,n=b(n,Aa,e,[]),n||null):null}}const Ia=w(k,{Layer:X(Ga),TileMatrixSet:X(Ua)}),Oa=w(k,{Style:X(Ba),Format:X(E),TileMatrixSetLink:X(Xa),Dimension:X(Wa),ResourceURL:X(Ya)},w(Ee,{Title:y(E),Abstract:y(E),WGS84BoundingBox:y(Fr),Identifier:y(E)})),Ra=w(k,{LegendURL:X(za)},w(Ee,{Title:y(E),Identifier:y(E)})),_a=w(k,{TileMatrixSet:y(E),TileMatrixSetLimits:y(ka)}),Ma=w(k,{TileMatrixLimits:pt(Ha)}),Fa=w(k,{TileMatrix:y(E),MinTileRow:y(J),MaxTileRow:y(J),MinTileCol:y(J),MaxTileCol:y(J)}),Ca=w(k,{Default:y(E),Value:X(E)},w(Ee,{Identifier:y(E)})),Na=w(Ee,{LowerCorner:pt(yt),UpperCorner:pt(yt)}),Da=w(k,{WellKnownScaleSet:y(E),TileMatrix:X(Va)},w(Ee,{SupportedCRS:y(E),Identifier:y(E),BoundingBox:y(Fr)})),$a=w(k,{TopLeftCorner:y(yt),ScaleDenominator:y($o),TileWidth:y(J),TileHeight:y(J),MatrixWidth:y(J),MatrixHeight:y(J)},w(Ee,{Identifier:y(E)}));function La(t,e){return b({},Ia,t,e)}function Ga(t,e){return b({},Oa,t,e)}function Ua(t,e){return b({},Da,t,e)}function Ba(t,e){const r=b({},Ra,t,e);if(!r)return;const n=t.getAttribute("isDefault")==="true";return r.isDefault=n,r}function Xa(t,e){return b({},_a,t,e)}function Wa(t,e){return b({},Ca,t,e)}function Ya(t,e){const r=t.getAttribute("format"),n=t.getAttribute("template"),i=t.getAttribute("resourceType"),o={};return r&&(o.format=r),n&&(o.template=n),i&&(o.resourceType=i),o}function Fr(t,e){const r=b([],Na,t,e);if(r.length==2)return da(r)}function za(t,e){const r={};return r.format=t.getAttribute("format"),r.href=xt(t),r}function yt(t,e){const r=E(t).split(/\s+/);if(!r||r.length!=2)return;const n=+r[0],i=+r[1];if(!(isNaN(n)||isNaN(i)))return[n,i]}function Va(t,e){return b({},$a,t,e)}function ka(t,e){return b([],Ma,t,e)}function Ha(t,e){return b({},Fa,t,e)}const qa={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Cr{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||qa[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Oe=6378137,pe=Math.PI*Oe,Za=[-pe,-pe,pe,pe],Ka=[-180,-85,180,85],Fe=Oe*Math.log(Math.tan(Math.PI/2));class se extends Cr{constructor(e){super({code:e,units:"m",extent:Za,global:!0,worldExtent:Ka,getPointResolution:function(r,n){return r/Math.cosh(n[1]/Oe)}})}}const rr=[new se("EPSG:3857"),new se("EPSG:102100"),new se("EPSG:102113"),new se("EPSG:900913"),new se("http://www.opengis.net/def/crs/EPSG/0/3857"),new se("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Qa(t,e,r){const n=t.length;r=r>1?r:2,e===void 0&&(r>2?e=t.slice():e=new Array(n));for(let i=0;i<n;i+=r){e[i]=pe*t[i]/180;let o=Oe*Math.log(Math.tan(Math.PI*(+t[i+1]+90)/360));o>Fe?o=Fe:o<-Fe&&(o=-Fe),e[i+1]=o}return e}function ja(t,e,r){const n=t.length;r=r>1?r:2,e===void 0&&(r>2?e=t.slice():e=new Array(n));for(let i=0;i<n;i+=r)e[i]=180*t[i]/pe,e[i+1]=360*Math.atan(Math.exp(t[i+1]/Oe))/Math.PI-90;return e}const Ja=6378137,nr=[-180,-90,180,90],el=Math.PI*Ja/180;class re extends Cr{constructor(e,r){super({code:e,units:"degrees",extent:nr,axisOrientation:r,global:!0,metersPerUnit:el,worldExtent:nr})}}const ir=[new re("CRS:84"),new re("EPSG:4326","neu"),new re("urn:ogc:def:crs:OGC:1.3:CRS84"),new re("urn:ogc:def:crs:OGC:2:84"),new re("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new re("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new re("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let dt={};function tl(t){return dt[t]||dt[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function rl(t,e){dt[t]=e}let de={};function Ye(t,e,r){const n=t.getCode(),i=e.getCode();n in de||(de[n]={}),de[n][i]=r}function nl(t,e){let r;return t in de&&e in de[t]&&(r=de[t][e]),r}function il(t,e,r){return Math.min(Math.max(t,e),r)}function Nr(t,e){const r=Math.pow(10,e);return Math.round(t*r)/r}function Ce(t,e){return Math.floor(Nr(t,e))}function Ne(t,e){return Math.ceil(Nr(t,e))}function At(t,e){if(e!==void 0){for(let r=0,n=t.length;r<n;++r)e[r]=t[r];e=e}else e=t.slice();return e}function ol(t,e){if(e!==void 0&&t!==e){for(let r=0,n=t.length;r<n;++r)e[r]=t[r];t=e}return t}function al(t){rl(t.getCode(),t),Ye(t,t,At)}function ll(t){t.forEach(al)}function Q(t){return typeof t=="string"?tl(t):t||null}function or(t){ll(t),t.forEach(function(e){t.forEach(function(r){e!==r&&Ye(e,r,At)})})}function sl(t,e,r,n){t.forEach(function(i){e.forEach(function(o){Ye(i,o,r),Ye(o,i,n)})})}function ar(t,e){if(t===e)return!0;const r=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||Dr(t,e)===At)&&r}function Dr(t,e){const r=t.getCode(),n=e.getCode();let i=nl(r,n);return i||(i=ol),i}function ul(t,e){const r=Q(t),n=Q(e);return Dr(r,n)}function fl(t,e,r,n){const i=ul(e,r);return ba(t,i,void 0)}function cl(){or(rr),or(ir),sl(ir,rr,Qa,ja)}cl();function we(t,e){if(!t)throw new Error(e)}function lr(t,e,r,n){return n!==void 0?(n[0]=t,n[1]=e,n[2]=r,n):[t,e,r]}class $r{constructor(e,r,n,i){this.minX=e,this.maxX=r,this.minY=n,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,r){return this.minX<=e&&e<=this.maxX&&this.minY<=r&&r<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function ue(t,e,r,n,i){return i!==void 0?(i.minX=t,i.maxX=e,i.minY=r,i.maxY=n,i):new $r(t,e,r,n)}const pl=256;function yl(t,e,r,n,i){let o;for(e+=n;e<r;e+=n)if(o=i(t.slice(e-n,e),t.slice(e,e+n)),o)return o;return!1}function De(t,e,r,n,i,o){let a=0,s=t[r-n],l=t[r-n+1];for(;e<r;e+=n){const f=t[e],u=t[e+1];l<=o?u>o&&(f-s)*(o-l)-(i-s)*(u-l)>0&&a++:u<=o&&(f-s)*(o-l)-(i-s)*(u-l)<0&&a--,s=f,l=u}return a!==0}function dl(t,e,r,n,i){const o=va(Mr(),t,e,r,n);return Ta(i,o)?_r(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]?!0:yl(t,e,r,n,function(a,s){return xa(i,a,s)}):!1}function hl(t,e,r,n,i){return!!(dl(t,e,r,n,i)||De(t,e,r,n,i[0],i[1])||De(t,e,r,n,i[0],i[3])||De(t,e,r,n,i[2],i[1])||De(t,e,r,n,i[2],i[3]))}function $e(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}const fe=[0,0,0],Z=5;class ml{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,we(Mo(this.resolutions_,(i,o)=>o-i),"`resolutions` must be sorted in descending order");let r;if(!e.origins){for(let i=0,o=this.resolutions_.length-1;i<o;++i)if(!r)r=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==r){r=void 0;break}}this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,we(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Ea(n)),we(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,we(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:pl,we(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,o)=>{const a=new $r(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(n){const s=this.getTileRangeForExtentAndZ(n,o);a.minX=Math.max(s.minX,a.minX),a.maxX=Math.min(s.maxX,a.maxX),a.minY=Math.max(s.minY,a.minY),a.maxY=Math.min(s.maxY,a.maxY)}return a}):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,r,n){const i=this.getTileRangeForExtentAndZ(e,r);for(let o=i.minX,a=i.maxX;o<=a;++o)for(let s=i.minY,l=i.maxY;s<=l;++s)n([r,o,s])}forEachTileCoordParentTileRange(e,r,n,i){let o,a,s,l=null,f=e[0]-1;for(this.zoomFactor_===2?(a=e[1],s=e[2]):l=this.getTileCoordExtent(e,i);f>=this.minZoom;){if(a!==void 0&&s!==void 0?(a=Math.floor(a/2),s=Math.floor(s/2),o=ue(a,a,s,s,n)):o=this.getTileRangeForExtentAndZ(l,f,n),r(f,o))return!0;--f}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,r,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const o=e[1]*2,a=e[2]*2;return ue(o,o+1,a,a+1,r)}const i=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,r)}return null}getTileRangeForTileCoordAndZ(e,r,n){if(r>this.maxZoom||r<this.minZoom)return null;const i=e[0],o=e[1],a=e[2];if(r===i)return ue(o,a,o,a,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,r-i),f=Math.floor(o*l),u=Math.floor(a*l);if(r<i)return ue(f,f,u,u,n);const p=Math.floor(l*(o+1))-1,c=Math.floor(l*(a+1))-1;return ue(f,p,u,c,n)}const s=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,r,n)}getTileRangeForExtentAndZ(e,r,n){this.getTileCoordForXYAndZ_(e[0],e[3],r,!1,fe);const i=fe[1],o=fe[2];this.getTileCoordForXYAndZ_(e[2],e[1],r,!0,fe);const a=fe[1],s=fe[2];return ue(i,a,o,s,n)}getTileCoordCenter(e){const r=this.getOrigin(e[0]),n=this.getResolution(e[0]),i=$e(this.getTileSize(e[0]),this.tmpSize_);return[r[0]+(e[1]+.5)*i[0]*n,r[1]-(e[2]+.5)*i[1]*n]}getTileCoordExtent(e,r){const n=this.getOrigin(e[0]),i=this.getResolution(e[0]),o=$e(this.getTileSize(e[0]),this.tmpSize_),a=n[0]+e[1]*o[0]*i,s=n[1]-(e[2]+1)*o[1]*i,l=a+o[0]*i,f=s+o[1]*i;return bt(a,s,l,f,r)}getTileCoordForCoordAndResolution(e,r,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],r,!1,n)}getTileCoordForXYAndResolution_(e,r,n,i,o){const a=this.getZForResolution(n),s=n/this.getResolution(a),l=this.getOrigin(a),f=$e(this.getTileSize(a),this.tmpSize_);let u=s*(e-l[0])/n/f[0],p=s*(l[1]-r)/n/f[1];return i?(u=Ne(u,Z)-1,p=Ne(p,Z)-1):(u=Ce(u,Z),p=Ce(p,Z)),lr(a,u,p,o)}getTileCoordForXYAndZ_(e,r,n,i,o){const a=this.getOrigin(n),s=this.getResolution(n),l=$e(this.getTileSize(n),this.tmpSize_);let f=(e-a[0])/s/l[0],u=(a[1]-r)/s/l[1];return i?(f=Ne(f,Z)-1,u=Ne(u,Z)-1):(f=Ce(f,Z),u=Ce(u,Z)),lr(n,f,u,o)}getTileCoordForCoordAndZ(e,r,n){return this.getTileCoordForXYAndZ_(e[0],e[1],r,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,r){const n=_o(this.resolutions_,e,r||0);return il(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,r){return hl(r,0,r.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const r=this.resolutions_.length,n=new Array(r);for(let i=this.minZoom;i<r;++i)n[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=n}}class gl extends ml{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function vl(t,e,r){const n=[],i=[],o=[],a=[],s=[];r=r!==void 0?r:[];const l="SupportedCRS",f="TileMatrix",u="Identifier",p="ScaleDenominator",c="TopLeftCorner",h="TileWidth",g="TileHeight",S=t[l],T=Q(S),P=T.getMetersPerUnit(),_=T.getAxisOrientation().substr(0,2)=="ne";return t[f].sort(function(d,O){return O[p]-d[p]}),t[f].forEach(function(d){let O;if(r.length>0?O=r.find(function(D){return d[u]==D[f]?!0:d[u].includes(":")?!1:t[u]+":"+d[u]===D[f]}):O=!0,O){i.push(d[u]);const D=d[p]*28e-5/P,W=d[h],I=d[g];_?o.push([d[c][1],d[c][0]]):o.push(d[c]),n.push(D),a.push(W==I?W:[W,I]),s.push([d.MatrixWidth,d.MatrixHeight])}}),new gl({extent:e,origins:o,resolutions:n,matrixIds:i,tileSizes:a,sizes:s})}function Sl(t,e){const n=t.Contents.Layer.find(function(m){return m.Identifier==e.layer});if(!n)return null;const i=t.Contents.TileMatrixSet;let o;n.TileMatrixSetLink.length>1?"projection"in e?o=n.TileMatrixSetLink.findIndex(function(m){const F=i.find(function(te){return te.Identifier==m.TileMatrixSet}).SupportedCRS,U=Q(F),$=Q(e.projection);return U&&$?ar(U,$):F==e.projection}):o=n.TileMatrixSetLink.findIndex(function(m){return m.TileMatrixSet==e.matrixSet}):o=0,o<0&&(o=0);const a=n.TileMatrixSetLink[o].TileMatrixSet,s=n.TileMatrixSetLink[o].TileMatrixSetLimits;let l=n.Format[0];"format"in e&&(l=e.format),o=n.Style.findIndex(function(m){return"style"in e?m.Title==e.style:m.isDefault}),o<0&&(o=0);const f=n.Style[o].Identifier,u={};"Dimension"in n&&n.Dimension.forEach(function(m,x,F){const U=m.Identifier;let $=m.Default;$===void 0&&($=m.Value[0]),u[U]=$});const c=t.Contents.TileMatrixSet.find(function(m){return m.Identifier==a});let h;const g=c.SupportedCRS;if(g&&(h=Q(g)),"projection"in e){const m=Q(e.projection);m&&(!h||ar(m,h))&&(h=m)}let S=!1;const T=h.getAxisOrientation().substr(0,2)=="ne";let P=c.TileMatrix[0],_={MinTileCol:0,MinTileRow:0,MaxTileCol:P.MatrixWidth-1,MaxTileRow:P.MatrixHeight-1};if(s){_=s[s.length-1];const m=c.TileMatrix.find(x=>x.Identifier===_.TileMatrix||c.Identifier+":"+x.Identifier===_.TileMatrix);m&&(P=m)}const d=P.ScaleDenominator*28e-5/h.getMetersPerUnit(),O=T?[P.TopLeftCorner[1],P.TopLeftCorner[0]]:P.TopLeftCorner,D=P.TileWidth*d,W=P.TileHeight*d;let I=c.BoundingBox;I&&T&&(I=[I[1],I[0],I[3],I[2]]);let q=[O[0]+D*_.MinTileCol,O[1]-W*(1+_.MaxTileRow),O[0]+D*(1+_.MaxTileCol),O[1]-W*_.MinTileRow];if(I!==void 0&&!_r(I,q)){const m=n.WGS84BoundingBox,x=Q("EPSG:4326").getExtent();if(q=I,m)S=m[0]===x[0]&&m[2]===x[2];else{const F=fl(I,c.SupportedCRS,"EPSG:4326");S=F[0]-1e-10<=x[0]&&F[2]+1e-10>=x[2]}}const H=vl(c,q,s),L=[];let G=e.requestEncoding;if(G=G!==void 0?G:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata){const m=t.OperationsMetadata.GetTile.DCP.HTTP.Get;for(let x=0,F=m.length;x<F;++x)if(m[x].Constraint){const $=m[x].Constraint.find(function(te){return te.name=="GetEncoding"}).AllowedValues.Value;if(G===""&&(G=$[0]),G==="KVP")$.includes("KVP")&&L.push(m[x].href);else break}else m[x].href&&(G="KVP",L.push(m[x].href))}return L.length===0&&(G="REST",n.ResourceURL.forEach(function(m){m.resourceType==="tile"&&(l=m.format,L.push(m.template))})),{urls:L,layer:e.layer,matrixSet:a,format:l,projection:h,requestEncoding:G,tileGrid:H,style:f,dimensions:u,wrapX:S,crossOrigin:e.crossOrigin}}const El=new Pa,Tl=Xr({name:"VaGeoserverVectorTileLayer",components:{VaVectorTileLayer:rn},props:an,emits:ln,setup(t){const e=Wr({}),r=Yr(!0);t.optionsFromCapabilities&&(r.value=!1,s().then(async()=>{await Ot(),r.value=!0}),Rt(()=>[t.url,t.layerId,t.tileMatrixSetId],s));const{interceptorToggle:n}=tn({urls:[new RegExp(`${t.url}.*FORMAT=application%2Fvnd.mapbox-vector-tile`)],before:l=>{const f=Io.parse(l.url),u=l.requestOptions;u.query||(u.query={});const p=u.query;p.TILEMATRIX=`${f.TILEMATRIXSET}:${f.TILEMATRIX}`;for(const c in t.customParameters)p[c]=t.customParameters[c]}});n.add();const i=Ve(()=>{const l=t.tileInfo||e.tileInfo;if(!l)return"";const f=t.fullExtent||e.extent,u=Mt(t,l,f);return URL.createObjectURL(new Blob([JSON.stringify(u)],{type:"application/json"}))}),o=Ve(()=>{const l={type:"vector"};return i.value?l.url=i.value:l.tiles=Mt(t).tiles,l}),a=Ve(()=>({version:8,sources:{esri:o.value},layers:[{id:"main",type:"fill","source-layer":t.layerId.split(":")[1],source:"esri",paint:{"fill-color":"#088","fill-outline-color":"green"},...t.defaultLayerOptions}]}));Rt(()=>a.value,async()=>{r.value=!1,await Ot(),r.value=!0});async function s(){return zr(t.url,{responseType:"text",query:{SERVICE:"WMTS",REQUEST:"GetCapabilities",...t.customParameters}}).then(l=>{const f=El.read(l.data);return[Sl(f,{layer:t.layerId,matrixSet:t.tileMatrixSetId}),f]}).then(([l,f])=>{if(!l)return console.warn(`No capabilities found for layer ${t.layerId} in ${t.url}`);const u=l.tileGrid.getExtent(),p=f.Contents.TileMatrixSet.find(S=>S.Identifier===t.tileMatrixSetId);if(!p)return console.warn(`No tileMatrixSet found for layer ${t.layerId} in ${t.url}`);const c=p.SupportedCRS.split(":").pop(),h=p.TileMatrix,g=new Vr({lods:h.map((S,T)=>({level:T,resolution:l.tileGrid.getResolution(T),scale:S.ScaleDenominator,rows:S.MatrixHeight,cols:S.MatrixWidth,origin:l.tileGrid.getOrigin(T)})),size:[l.tileGrid.getTileSize(0),l.tileGrid.getTileSize(1)],spatialReference:{wkid:c}});e.extent=new kr({xmin:u[0],ymin:u[1],xmax:u[2],ymax:u[3],spatialReference:{wkid:c}}),e.tileInfo=g})}return{layerStyle:a,ready:r}}});function wl(t,e,r,n,i,o){const a=qr("VaVectorTileLayer");return t.ready?(Zr(),Kr(a,{key:0,style:Jr(t.layerStyle),"custom-parameters":t.customParameters},{default:Qr(()=>[jr(t.$slots,"default")]),_:3},8,["style","custom-parameters"])):en("",!0)}const it=Hr(Tl,[["render",wl]]);it.install=t=>{t.component(it.name,it)};export{it as V};
