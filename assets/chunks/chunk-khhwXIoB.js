import{p as x,u as y,a as I}from"./chunk-I0Ze1Lq5.js";import{gZ as h,oU as w,gU as c,lC as u,cJ as d,lH as _,hc as E}from"./chunk-fHrNL0KE.js";import{u as L}from"./chunk-oihAJXyJ.js";const $={...x,defaultOptions:{type:Object,default:()=>({})},url:{type:String,default:""},sublayers:{type:Array},customParameters:{type:Object,default:()=>({})}},g={load:a=>a},O=h({name:"VaWmsLayer",props:$,emits:g,setup(a,{emit:m}){const l=L(),i=l.map,t=new w({...a.defaultOptions});c(()=>{t.url=a.url}),c(()=>{t.customParameters=a.customParameters,t.refresh()}),c(()=>{a.sublayers&&(t.sublayers=a.sublayers,r())}),t.when(r),y(t,a),I(i,t,a),u("vaLayer",t),u("vaWmsLayer",t),m("load",{layer:t,view:l});function r(){if(console.log("setInfoToSublayer",t.resourceInfo),a.sublayers?.length&&t.resourceInfo){const S=t.resourceInfo.layers.reduce((e,n)=>(e[n.name]=n,e),{}),p=t.resourceInfo.layers.reduce((e,n)=>(e[n.title]=n,e),{});t.sublayers.forEach(e=>{let n=e.name;n.includes(":")&&(n=n.split(":")[1]);const s=S[n];s&&(e.title||(e.title=s.title),e.maxScale||(e.maxScale=s.maxScale),e.minScale||(e.minScale=s.minScale),e.fullExtent||(e.fullExtent=new d(s.extent)));const o=p[n];o&&(e.maxScale||(e.maxScale=o.maxScale),e.minScale||(e.minScale=o.minScale),e.fullExtent||(e.fullExtent=new d(o.extent)))})}}return{layer:t}}});function v(a,m,l,i,t,r){return E(a.$slots,"default")}const f=_(O,[["render",v]]);f.install=a=>{a.component(f.name,f)};export{f as V};
