import{gS as y,gY as d,U as _,D as V,gW as w,lD as b,hb as T,h2 as f,lt as $,g$ as g,h0 as v,h3 as s,h4 as n,h1 as e,h5 as F,he as L}from"./chunk-oRXQYLok.js";import{V as I,s as x}from"./chunk-VK_w1MQM.js";import"./chunk-aijaCNQ8.js";import{R as P}from"./chunk-KpbMssn-.js";import"./chunk-sXyVCGib.js";import"./chunk-T-B_0Vyf.js";import"./chunk-xUraNwuK.js";import"./chunk-gogdpjP8.js";import"./chunk-vyY1fBGx.js";import"./chunk-xGARg9zv.js";import"./chunk-mmzEulbl.js";import"./chunk-Pxza2OB5.js";import{V as S}from"./chunk-wK7dibwg.js";import"./chunk-9ThfxfNJ.js";import"./chunk-A2UinQ7e.js";import"./chunk-T9nXpXzY.js";import"./chunk-Vg_zrnUV.js";import{V as j}from"./chunk-ZA3U0P5r.js";import"./chunk-wlBD_SBS.js";import"./chunk-ZFbviF8k.js";import"./chunk-9RvLznUP.js";import"./chunk-zXzsfaNf.js";import"./chunk-wXnF7dcS.js";import"./chunk-8ucAXuuz.js";import"./chunk-enFnOtHr.js";import{V as k}from"./chunk-O7jcPrJf.js";import"./chunk-oJPnFwXT.js";import"./chunk-ElZqyyyM.js";import"./chunk-Tpubj2jI.js";import"./chunk-5aJqR9vD.js";import"./chunk-zjskD1F-.js";import"./chunk-M1BDU9kf.js";import"./chunk-ptnYzyPy.js";import"./chunk-SagWcp8m.js";import"./chunk-nIkj8RUP.js";import"./chunk-Yk-SfrTe.js";import"./chunk-aNXz7DQD.js";import"./chunk-mWEiczcY.js";import{V as D}from"./chunk-bry_bJTh.js";import"./chunk-R4aNuUyt.js";import"./chunk-uOmx7zFb.js";import{u as R}from"./chunk-QSHY8hht.js";import"./chunk-I9oa6RJ6.js";import"./chunk-TuNNQCxK.js";import"./chunk-IGmq6gCy.js";import"./chunk-B3AFDltd.js";import"./chunk-3UsUO1kR.js";import"./chunk-GueXDQz0.js";import"./chunk-Xt0lpKKL.js";import"./chunk-y1gIstDg.js";import"./chunk-2DW_cBUC.js";import"./chunk-kdjETlXL.js";import"./chunk-UBAdPdhr.js";import"./chunk-lk4P_n6s.js";import"./chunk-cLRjrqZN.js";import"./chunk-x4qYBYit.js";import"./chunk-yIcxEGwK.js";import"./chunk-af7bZGi_.js";import"./chunk-faqNsDuO.js";import"./chunk-t8DFEnzZ.js";function U(){const t=y("vaPopupTemplate");if(!t)throw new Error("The component which use usePopupTemplate() must be in a PopupTemplate component");return t}const h="http://t1.zjsophon.com:10000/geoserver",W=new P({baseURL:h,setRequestInit(t){return t.headers,t}}),B=t=>W.request(t),E=()=>B({method:"GET",url:"/rest/layers.json"}).then(t=>t.layers.layer),O={defaultOptions:{type:Object,default:()=>({})}},N={load:t=>t},q=d({name:"VaWmsLayerPopupTemplate",emits:N,props:O,setup(t,{emit:l}){const r=R(),i=r.fetchFeatureInfoFunction,p=U();return r.fetchFeatureInfoFunction=async m=>{m.info_format="application/json",m.feature_count=5;const{data:a}=await _(r.featureInfoUrl,{query:m});return a.features.map(o=>new V({attributes:o.properties,popupTemplate:p}))},w(()=>{r.fetchFeatureInfoFunction=i}),{popupTemplate:p}}});function C(t,l,r,i,p,m){return T(t.$slots,"default")}const u=b(q,[["render",C]]);u.install=t=>{t.component(u.name,u)};const Kt=d({__name:"index",setup(t){const l=async a=>{const o=a.view;await a.layer.when(),o.goTo(a.layer.fullExtent)},r=f([]),i=f([{templateType:"VkfSelect",prop:"name",filterable:!0,options:r}]),p=$({name:"pub:O3_predict_20220301"});m();function m(){E().then(a=>{r.value=a.map(o=>({label:o.name,value:o.name}))})}return(a,o)=>(g(),v(e(j),null,{before:s(()=>[n(e(I),{formItems:i.value,data:e(p),onSetData:o[0]||(o[0]=c=>e(x)(e(p),c))},null,8,["formItems","data"])]),default:s(()=>[n(e(S),{type:"vec_c",anno:!1,"spatial-reference":{wkid:4490}}),n(e(D),{url:e(h)+"/ows",onLoad:l,sublayers:[{name:e(p).name,queryable:!0,popupEnabled:!0}]},{default:s(()=>[n(e(k),{orphan:!0},{plugins:s(()=>[n(e(u))]),default:s(({attributes:c})=>[F(L(c),1)]),_:1})]),_:1},8,["url","sublayers"])]),_:1}))}});export{Kt as default};
