import{$ as l,j as y}from"./chunk-CqRmJ70k.js";import{hs as a,cB as f,r as v,k as d,m,n as I}from"./chunk-CGsGeN7j.js";import"./chunk-ByM7454y.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */const p="Group Layer",g="group-layer-save",A="group-layer-save-as",i=m.GROUP_LAYER_MAP;function s(r){return{isValid:r.type==="group",errorMessage:"Layer.type should be 'group'"}}function P(r){return{isValid:f(r,i),errorMessage:`Layer.portalItem.typeKeywords should have '${i}'`}}function n(r,e){return{...v(r,"web-map",!0),initiator:e}}function c(r){const e=r.layerJSON;return Promise.resolve(e&&Object.keys(e).length?e:null)}async function R(r,e){e.title||=r.title,d(e,m.METADATA),I(e,i)}async function or(r,e){return l({layer:r,itemType:p,validateLayer:s,validateItem:P,createJSONContext:t=>n(t,r),createItemData:c,errorNamePrefix:g,saveResources:async(t,o)=>(r.sourceIsPortalItem||await t.removeAllResources().catch(()=>{}),a(r.resourceReferences,o))},e)}async function ir(r,e,t){return y({layer:r,itemType:p,validateLayer:s,createJSONContext:o=>n(o,r),createItemData:c,errorNamePrefix:A,newItem:e,setItemProperties:R,saveResources:(o,u)=>a(r.resourceReferences,u)},t)}export{or as save,ir as saveAs};
